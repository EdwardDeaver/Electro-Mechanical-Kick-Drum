ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 2
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"USB_MIDI.cpp"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text._ZN5daisy9DaisySeedD2Ev,"axG",%progbits,_ZN5daisy9DaisySeedD5Ev,comdat
  17              		.align	1
  18              		.p2align 2,,3
  19              		.weak	_ZN5daisy9DaisySeedD2Ev
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv5-d16
  26              	_ZN5daisy9DaisySeedD2Ev:
  27              	.LVL0:
  28              	.LFB2529:
  29              		.file 1 "../../libDaisy//src/daisy_seed.h"
   1:../../libDaisy//src/daisy_seed.h **** #pragma once
   2:../../libDaisy//src/daisy_seed.h **** #ifndef DSY_SEED_H
   3:../../libDaisy//src/daisy_seed.h **** #define DSY_SEED_H
   4:../../libDaisy//src/daisy_seed.h **** 
   5:../../libDaisy//src/daisy_seed.h **** #include "daisy.h"
   6:../../libDaisy//src/daisy_seed.h **** 
   7:../../libDaisy//src/daisy_seed.h **** //Uncomment this out if you're still using the rev2 hardware
   8:../../libDaisy//src/daisy_seed.h **** //#define SEED_REV2
   9:../../libDaisy//src/daisy_seed.h **** 
  10:../../libDaisy//src/daisy_seed.h **** namespace daisy
  11:../../libDaisy//src/daisy_seed.h **** {
  12:../../libDaisy//src/daisy_seed.h **** /**
  13:../../libDaisy//src/daisy_seed.h ****    @brief This is the higher-level interface for the Daisy board. \n 
  14:../../libDaisy//src/daisy_seed.h ****     All basic peripheral configuration/initialization is setup here. \n
  15:../../libDaisy//src/daisy_seed.h **** 
  16:../../libDaisy//src/daisy_seed.h ****    @ingroup boards
  17:../../libDaisy//src/daisy_seed.h **** */
  18:../../libDaisy//src/daisy_seed.h **** class DaisySeed
  19:../../libDaisy//src/daisy_seed.h **** {
  20:../../libDaisy//src/daisy_seed.h ****   public:
  21:../../libDaisy//src/daisy_seed.h ****     DaisySeed() {}
  22:../../libDaisy//src/daisy_seed.h ****     ~DaisySeed() {}
  30              		.loc 1 22 5 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              	.LBB153:
  36              	.LBI153:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 2


  37              		.file 2 "../../libDaisy//src/sys/system.h"
   1:../../libDaisy//src/sys/system.h **** #ifndef DSY_SYSTEM_H
   2:../../libDaisy//src/sys/system.h **** #define DSY_SYSTEM_H
   3:../../libDaisy//src/sys/system.h **** 
   4:../../libDaisy//src/sys/system.h **** #ifndef UNIT_TEST // for unit tests, a dummy implementation is provided below
   5:../../libDaisy//src/sys/system.h **** 
   6:../../libDaisy//src/sys/system.h **** #include <cstdint>
   7:../../libDaisy//src/sys/system.h **** #include "per/tim.h"
   8:../../libDaisy//src/sys/system.h **** 
   9:../../libDaisy//src/sys/system.h **** namespace daisy
  10:../../libDaisy//src/sys/system.h **** {
  11:../../libDaisy//src/sys/system.h **** /** A handle for interacting with the Core System. 
  12:../../libDaisy//src/sys/system.h ****  ** This includes the Clock tree, MPU, global DMA initialization,
  13:../../libDaisy//src/sys/system.h ****  ** cache handling, and any other necessary global initiailzation
  14:../../libDaisy//src/sys/system.h ****  **
  15:../../libDaisy//src/sys/system.h ****  ** @author shensley
  16:../../libDaisy//src/sys/system.h ****  ** @ingroup system
  17:../../libDaisy//src/sys/system.h ****  */
  18:../../libDaisy//src/sys/system.h **** class System
  19:../../libDaisy//src/sys/system.h **** {
  20:../../libDaisy//src/sys/system.h ****   public:
  21:../../libDaisy//src/sys/system.h ****     /** Contains settings for initializing the System */
  22:../../libDaisy//src/sys/system.h ****     struct Config
  23:../../libDaisy//src/sys/system.h ****     {
  24:../../libDaisy//src/sys/system.h ****         /** Specifies the system clock frequency that feeds APB/AHB clocks, etc. */
  25:../../libDaisy//src/sys/system.h ****         enum class SysClkFreq
  26:../../libDaisy//src/sys/system.h ****         {
  27:../../libDaisy//src/sys/system.h ****             FREQ_400MHZ,
  28:../../libDaisy//src/sys/system.h ****             FREQ_480MHZ,
  29:../../libDaisy//src/sys/system.h ****         };
  30:../../libDaisy//src/sys/system.h **** 
  31:../../libDaisy//src/sys/system.h ****         /** Method to call on the struct to set to defaults
  32:../../libDaisy//src/sys/system.h ****          ** CPU Freq set to 400MHz
  33:../../libDaisy//src/sys/system.h ****          ** Cache Enabled 
  34:../../libDaisy//src/sys/system.h ****          ** */
  35:../../libDaisy//src/sys/system.h ****         void Defaults()
  36:../../libDaisy//src/sys/system.h ****         {
  37:../../libDaisy//src/sys/system.h ****             cpu_freq    = SysClkFreq::FREQ_400MHZ;
  38:../../libDaisy//src/sys/system.h ****             use_dcache  = true;
  39:../../libDaisy//src/sys/system.h ****             use_icache  = true;
  40:../../libDaisy//src/sys/system.h ****             skip_clocks = false;
  41:../../libDaisy//src/sys/system.h ****         }
  42:../../libDaisy//src/sys/system.h **** 
  43:../../libDaisy//src/sys/system.h ****         /** Method to call on the struct to set to boost mode:
  44:../../libDaisy//src/sys/system.h ****          ** CPU Freq set to 480MHz
  45:../../libDaisy//src/sys/system.h ****          ** Cache Enabled 
  46:../../libDaisy//src/sys/system.h ****          ** */
  47:../../libDaisy//src/sys/system.h ****         void Boost()
  48:../../libDaisy//src/sys/system.h ****         {
  49:../../libDaisy//src/sys/system.h ****             cpu_freq    = SysClkFreq::FREQ_480MHZ;
  50:../../libDaisy//src/sys/system.h ****             use_dcache  = true;
  51:../../libDaisy//src/sys/system.h ****             use_icache  = true;
  52:../../libDaisy//src/sys/system.h ****             skip_clocks = false;
  53:../../libDaisy//src/sys/system.h ****         }
  54:../../libDaisy//src/sys/system.h **** 
  55:../../libDaisy//src/sys/system.h ****         SysClkFreq cpu_freq;
  56:../../libDaisy//src/sys/system.h ****         bool       use_dcache;
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 3


  57:../../libDaisy//src/sys/system.h ****         bool       use_icache;
  58:../../libDaisy//src/sys/system.h ****         bool       skip_clocks;
  59:../../libDaisy//src/sys/system.h ****     };
  60:../../libDaisy//src/sys/system.h **** 
  61:../../libDaisy//src/sys/system.h ****     /** Describes the different regions of memory available to the Daisy
  62:../../libDaisy//src/sys/system.h ****      * 
  63:../../libDaisy//src/sys/system.h ****      */
  64:../../libDaisy//src/sys/system.h ****     enum MemoryRegion
  65:../../libDaisy//src/sys/system.h ****     {
  66:../../libDaisy//src/sys/system.h ****         INTERNAL_FLASH = 0,
  67:../../libDaisy//src/sys/system.h ****         ITCMRAM,
  68:../../libDaisy//src/sys/system.h ****         DTCMRAM,
  69:../../libDaisy//src/sys/system.h ****         SRAM_D1,
  70:../../libDaisy//src/sys/system.h ****         SRAM_D2,
  71:../../libDaisy//src/sys/system.h ****         SRAM_D3,
  72:../../libDaisy//src/sys/system.h ****         SDRAM,
  73:../../libDaisy//src/sys/system.h ****         QSPI,
  74:../../libDaisy//src/sys/system.h ****         INVALID_ADDRESS,
  75:../../libDaisy//src/sys/system.h ****     };
  76:../../libDaisy//src/sys/system.h **** 
  77:../../libDaisy//src/sys/system.h ****     System() {}
  78:../../libDaisy//src/sys/system.h ****     ~System() {}
  38              		.loc 2 78 5 view .LVU1
  39              		.loc 2 78 5 is_stmt 0 view .LVU2
  40              	.LBE153:
  41              	.LBB154:
  42              	.LBI154:
  43              		.file 3 "../../libDaisy//src/hid/usb.h"
   1:../../libDaisy//src/hid/usb.h **** #pragma once
   2:../../libDaisy//src/hid/usb.h **** #ifndef DSY_HID_USB_H
   3:../../libDaisy//src/hid/usb.h **** #define DSY_HID_USB_H
   4:../../libDaisy//src/hid/usb.h **** #include <stdint.h>
   5:../../libDaisy//src/hid/usb.h **** #include <stdlib.h>
   6:../../libDaisy//src/hid/usb.h **** 
   7:../../libDaisy//src/hid/usb.h **** namespace daisy
   8:../../libDaisy//src/hid/usb.h **** /** @addtogroup human_interface
   9:../../libDaisy//src/hid/usb.h ****     @{
  10:../../libDaisy//src/hid/usb.h **** */
  11:../../libDaisy//src/hid/usb.h **** 
  12:../../libDaisy//src/hid/usb.h **** {
  13:../../libDaisy//src/hid/usb.h **** /** 
  14:../../libDaisy//src/hid/usb.h ****     @brief Interface for initializing and using the USB Peripherals on the daisy
  15:../../libDaisy//src/hid/usb.h ****     @author Stephen Hensley
  16:../../libDaisy//src/hid/usb.h ****     @date December 2019
  17:../../libDaisy//src/hid/usb.h **** */
  18:../../libDaisy//src/hid/usb.h **** class UsbHandle
  19:../../libDaisy//src/hid/usb.h **** {
  20:../../libDaisy//src/hid/usb.h ****   public:
  21:../../libDaisy//src/hid/usb.h ****     /** Return values for USBHandle Functions */
  22:../../libDaisy//src/hid/usb.h ****     enum class Result
  23:../../libDaisy//src/hid/usb.h ****     {
  24:../../libDaisy//src/hid/usb.h ****         OK,
  25:../../libDaisy//src/hid/usb.h ****         ERR,
  26:../../libDaisy//src/hid/usb.h ****     };
  27:../../libDaisy//src/hid/usb.h **** 
  28:../../libDaisy//src/hid/usb.h ****     /** Specified which of the two USB Peripherals to initialize. */
  29:../../libDaisy//src/hid/usb.h ****     enum UsbPeriph
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 4


  30:../../libDaisy//src/hid/usb.h ****     {
  31:../../libDaisy//src/hid/usb.h ****         FS_INTERNAL, /**< Internal pin */
  32:../../libDaisy//src/hid/usb.h ****         FS_EXTERNAL, /**< FS External D+ pin is Pin 38 (GPIO32). FS External D- pin is Pin 37 (GPIO
  33:../../libDaisy//src/hid/usb.h ****         FS_BOTH,     /**< Both */
  34:../../libDaisy//src/hid/usb.h ****     };
  35:../../libDaisy//src/hid/usb.h **** 
  36:../../libDaisy//src/hid/usb.h **** 
  37:../../libDaisy//src/hid/usb.h ****     /** Function called upon reception of a buffer */
  38:../../libDaisy//src/hid/usb.h ****     typedef void (*ReceiveCallback)(uint8_t* buff, uint32_t* len);
  39:../../libDaisy//src/hid/usb.h **** 
  40:../../libDaisy//src/hid/usb.h ****     UsbHandle() {}
  41:../../libDaisy//src/hid/usb.h **** 
  42:../../libDaisy//src/hid/usb.h ****     ~UsbHandle() {}
  44              		.loc 3 42 5 is_stmt 1 view .LVU3
  45              		.loc 3 42 5 is_stmt 0 view .LVU4
  46              	.LBE154:
  47              	.LBB155:
  48              	.LBI155:
  49              		.file 4 "../../libDaisy//src/per/adc.h"
   1:../../libDaisy//src/per/adc.h **** #pragma once
   2:../../libDaisy//src/per/adc.h **** #ifndef DSY_ADC_H
   3:../../libDaisy//src/per/adc.h **** #define DSY_ADC_H /**< Macro */
   4:../../libDaisy//src/per/adc.h **** #include <stdint.h>
   5:../../libDaisy//src/per/adc.h **** #include <stdlib.h>
   6:../../libDaisy//src/per/adc.h **** #include "daisy_core.h"
   7:../../libDaisy//src/per/adc.h **** #include "per/gpio.h"
   8:../../libDaisy//src/per/adc.h **** 
   9:../../libDaisy//src/per/adc.h **** #define DSY_ADC_MAX_CHANNELS 16 /**< Maximum number of ADC channels */
  10:../../libDaisy//src/per/adc.h **** 
  11:../../libDaisy//src/per/adc.h **** namespace daisy
  12:../../libDaisy//src/per/adc.h **** {
  13:../../libDaisy//src/per/adc.h **** /** @addtogroup per_analog
  14:../../libDaisy//src/per/adc.h ****     @{
  15:../../libDaisy//src/per/adc.h **** */
  16:../../libDaisy//src/per/adc.h **** 
  17:../../libDaisy//src/per/adc.h **** /* While there may not be many configuration options here,
  18:../../libDaisy//src/per/adc.h **** using a struct like this allows us to add more configuration
  19:../../libDaisy//src/per/adc.h **** later without breaking existing functionality.
  20:../../libDaisy//src/per/adc.h **** */
  21:../../libDaisy//src/per/adc.h **** 
  22:../../libDaisy//src/per/adc.h **** /** @brief   Configuration Structure for an ADC Channel 
  23:../../libDaisy//src/per/adc.h ****  *  @details This can be used to configure a a single input, 
  24:../../libDaisy//src/per/adc.h ****  *           or a multiplexed input, allowing up to 8 inputs on 
  25:../../libDaisy//src/per/adc.h ****  *           one channel.
  26:../../libDaisy//src/per/adc.h ****  *  @note    Sharing data lines to multiple muxes _is_ possible, but
  27:../../libDaisy//src/per/adc.h ****  *           each channel sharing data lines must be set to the maximum
  28:../../libDaisy//src/per/adc.h ****  *           number of channels, even if some multiplexers have fewer
  29:../../libDaisy//src/per/adc.h ****  *           inputs connected.
  30:../../libDaisy//src/per/adc.h **** */
  31:../../libDaisy//src/per/adc.h **** struct AdcChannelConfig
  32:../../libDaisy//src/per/adc.h **** {
  33:../../libDaisy//src/per/adc.h ****     /** Which pin to use for multiplexing */
  34:../../libDaisy//src/per/adc.h ****     enum MuxPin
  35:../../libDaisy//src/per/adc.h ****     {
  36:../../libDaisy//src/per/adc.h ****         MUX_SEL_0,    /**< & */
  37:../../libDaisy//src/per/adc.h ****         MUX_SEL_1,    /**< & */
  38:../../libDaisy//src/per/adc.h ****         MUX_SEL_2,    /**< & */
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 5


  39:../../libDaisy//src/per/adc.h ****         MUX_SEL_LAST, /**< & */
  40:../../libDaisy//src/per/adc.h ****     };
  41:../../libDaisy//src/per/adc.h **** 
  42:../../libDaisy//src/per/adc.h ****     /** Initializes a single ADC pin as an ADC. 
  43:../../libDaisy//src/per/adc.h ****     \param pin Pin to init.
  44:../../libDaisy//src/per/adc.h ****      */
  45:../../libDaisy//src/per/adc.h ****     void InitSingle(dsy_gpio_pin pin);
  46:../../libDaisy//src/per/adc.h **** 
  47:../../libDaisy//src/per/adc.h ****     /** 
  48:../../libDaisy//src/per/adc.h ****     Initializes a single ADC pin as a Multiplexed ADC.
  49:../../libDaisy//src/per/adc.h ****     Requires a CD405X Multiplexer connected to the pin.
  50:../../libDaisy//src/per/adc.h ****     You only need to supply the mux pins that are required,
  51:../../libDaisy//src/per/adc.h ****     e.g. a 4052 mux would only require mux_0 and mux_1.
  52:../../libDaisy//src/per/adc.h ****     Internal Callbacks handle the pin addressing.
  53:../../libDaisy//src/per/adc.h ****     \param mux_channels must be 1-8
  54:../../libDaisy//src/per/adc.h ****     \param mux_0 First mux pin
  55:../../libDaisy//src/per/adc.h ****     \param mux_1 Second mux pin
  56:../../libDaisy//src/per/adc.h ****     \param mux_2 Third mux pin
  57:../../libDaisy//src/per/adc.h ****     \param adc_pin &
  58:../../libDaisy//src/per/adc.h ****     */
  59:../../libDaisy//src/per/adc.h ****     void InitMux(dsy_gpio_pin adc_pin,
  60:../../libDaisy//src/per/adc.h ****                  size_t       mux_channels,
  61:../../libDaisy//src/per/adc.h ****                  dsy_gpio_pin mux_0,
  62:../../libDaisy//src/per/adc.h ****                  dsy_gpio_pin mux_1 = {DSY_GPIOX, 0},
  63:../../libDaisy//src/per/adc.h ****                  dsy_gpio_pin mux_2 = {DSY_GPIOX, 0});
  64:../../libDaisy//src/per/adc.h **** 
  65:../../libDaisy//src/per/adc.h ****     dsy_gpio pin_;                   /**< & */
  66:../../libDaisy//src/per/adc.h ****     dsy_gpio mux_pin_[MUX_SEL_LAST]; /**< & */
  67:../../libDaisy//src/per/adc.h ****     uint8_t  mux_channels_;          /**< & */
  68:../../libDaisy//src/per/adc.h **** };
  69:../../libDaisy//src/per/adc.h **** 
  70:../../libDaisy//src/per/adc.h **** /**
  71:../../libDaisy//src/per/adc.h ****    @brief Handler for analog to digital conversion
  72:../../libDaisy//src/per/adc.h **** */
  73:../../libDaisy//src/per/adc.h **** class AdcHandle
  74:../../libDaisy//src/per/adc.h **** {
  75:../../libDaisy//src/per/adc.h ****   public:
  76:../../libDaisy//src/per/adc.h ****     /** Supported oversampling amounts */
  77:../../libDaisy//src/per/adc.h ****     enum OverSampling
  78:../../libDaisy//src/per/adc.h ****     {
  79:../../libDaisy//src/per/adc.h ****         OVS_NONE, /**< & */
  80:../../libDaisy//src/per/adc.h ****         OVS_4,    /**< & */
  81:../../libDaisy//src/per/adc.h ****         OVS_8,    /**< & */
  82:../../libDaisy//src/per/adc.h ****         OVS_16,   /**< & */
  83:../../libDaisy//src/per/adc.h ****         OVS_32,   /**< & */
  84:../../libDaisy//src/per/adc.h ****         OVS_64,   /**< & */
  85:../../libDaisy//src/per/adc.h ****         OVS_128,  /**< & */
  86:../../libDaisy//src/per/adc.h ****         OVS_256,  /**< & */
  87:../../libDaisy//src/per/adc.h ****         OVS_512,  /**< & */
  88:../../libDaisy//src/per/adc.h ****         OVS_1024, /**< & */
  89:../../libDaisy//src/per/adc.h ****         OVS_LAST, /**< & */
  90:../../libDaisy//src/per/adc.h ****     };
  91:../../libDaisy//src/per/adc.h **** 
  92:../../libDaisy//src/per/adc.h ****     AdcHandle() {}
  93:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
  50              		.loc 4 93 5 is_stmt 1 view .LVU5
  51              		.loc 4 93 5 is_stmt 0 view .LVU6
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 6


  52              	.LBE155:
  53              	.LBB156:
  54              	.LBI156:
  55              		.file 5 "../../libDaisy//src/hid/audio.h"
   1:../../libDaisy//src/hid/audio.h **** #ifndef DSY_AUDIO_H
   2:../../libDaisy//src/hid/audio.h **** #define DSY_AUDIO_H /**< & */
   3:../../libDaisy//src/hid/audio.h **** 
   4:../../libDaisy//src/hid/audio.h **** #include "per/sai.h"
   5:../../libDaisy//src/hid/audio.h **** 
   6:../../libDaisy//src/hid/audio.h **** namespace daisy
   7:../../libDaisy//src/hid/audio.h **** {
   8:../../libDaisy//src/hid/audio.h **** /** @brief Audio Engine Handle
   9:../../libDaisy//src/hid/audio.h ****  *  @ingroup audio 
  10:../../libDaisy//src/hid/audio.h ****  *  @details This class allows for higher level access to an audio engine.
  11:../../libDaisy//src/hid/audio.h ****  *           If you're using a SOM like the DaisySeed or DaisyPatchSM (or any 
  12:../../libDaisy//src/hid/audio.h ****  *            board that includes one of those objects) then the intialization
  13:../../libDaisy//src/hid/audio.h ****  *            is already taken  care of.
  14:../../libDaisy//src/hid/audio.h ****  *           If you're setting up your own custom hardware, or need to make changes
  15:../../libDaisy//src/hid/audio.h ****  *           you will have to take the following steps:
  16:../../libDaisy//src/hid/audio.h ****  *             1. Create and Initialize an SaiHandle or two depending on your requirements
  17:../../libDaisy//src/hid/audio.h ****  *             2. Initialize the Audio Handle with the desired settings and the Initialized SaiHand
  18:../../libDaisy//src/hid/audio.h ****  *             3. If the connected codec requires special configuration or initialization, do so
  19:../../libDaisy//src/hid/audio.h ****  *             4. Write a callback method using either the AudioCallback or the InterleavingAudioCa
  20:../../libDaisy//src/hid/audio.h ****  *             5. Start the Audio using one of the StartAudio function
  21:../../libDaisy//src/hid/audio.h ****  */
  22:../../libDaisy//src/hid/audio.h **** class AudioHandle
  23:../../libDaisy//src/hid/audio.h **** {
  24:../../libDaisy//src/hid/audio.h ****   public:
  25:../../libDaisy//src/hid/audio.h ****     /** Manually configurable details about the Audio Engine */
  26:../../libDaisy//src/hid/audio.h ****     /** TODO: Figure out how to get samplerate in here. */
  27:../../libDaisy//src/hid/audio.h ****     struct Config
  28:../../libDaisy//src/hid/audio.h ****     {
  29:../../libDaisy//src/hid/audio.h ****         /** number of samples to process per callback */
  30:../../libDaisy//src/hid/audio.h ****         size_t blocksize;
  31:../../libDaisy//src/hid/audio.h **** 
  32:../../libDaisy//src/hid/audio.h ****         /**< Sample rate of audio */
  33:../../libDaisy//src/hid/audio.h ****         SaiHandle::Config::SampleRate samplerate;
  34:../../libDaisy//src/hid/audio.h **** 
  35:../../libDaisy//src/hid/audio.h ****         /** factor for adjustment before and after callback for hardware that may have extra headro
  36:../../libDaisy//src/hid/audio.h ****         float postgain;
  37:../../libDaisy//src/hid/audio.h **** 
  38:../../libDaisy//src/hid/audio.h ****         /** factor for additional one-sided compensation to audio path for hardware that may
  39:../../libDaisy//src/hid/audio.h ****          *  have unequal input/output ranges
  40:../../libDaisy//src/hid/audio.h ****          */
  41:../../libDaisy//src/hid/audio.h ****         float output_compensation;
  42:../../libDaisy//src/hid/audio.h **** 
  43:../../libDaisy//src/hid/audio.h ****         /** Sets default values for config struct */
  44:../../libDaisy//src/hid/audio.h ****         Config()
  45:../../libDaisy//src/hid/audio.h ****         : blocksize(48),
  46:../../libDaisy//src/hid/audio.h ****           samplerate(SaiHandle::Config::SampleRate::SAI_48KHZ),
  47:../../libDaisy//src/hid/audio.h ****           postgain(1.f),
  48:../../libDaisy//src/hid/audio.h ****           output_compensation(1.f)
  49:../../libDaisy//src/hid/audio.h ****         {
  50:../../libDaisy//src/hid/audio.h ****         }
  51:../../libDaisy//src/hid/audio.h ****     };
  52:../../libDaisy//src/hid/audio.h **** 
  53:../../libDaisy//src/hid/audio.h ****     enum class Result
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 7


  54:../../libDaisy//src/hid/audio.h ****     {
  55:../../libDaisy//src/hid/audio.h ****         OK,
  56:../../libDaisy//src/hid/audio.h ****         ERR,
  57:../../libDaisy//src/hid/audio.h ****     };
  58:../../libDaisy//src/hid/audio.h **** 
  59:../../libDaisy//src/hid/audio.h ****     /** Non-Interleaving input buffer
  60:../../libDaisy//src/hid/audio.h ****      * Buffer arranged by float[chn][sample] 
  61:../../libDaisy//src/hid/audio.h ****      * const so that the user can't modify the input
  62:../../libDaisy//src/hid/audio.h ****      */
  63:../../libDaisy//src/hid/audio.h ****     typedef const float* const* InputBuffer;
  64:../../libDaisy//src/hid/audio.h **** 
  65:../../libDaisy//src/hid/audio.h ****     /** Non-Interleaving output buffer
  66:../../libDaisy//src/hid/audio.h ****      * Arranged by float[chn][sample] 
  67:../../libDaisy//src/hid/audio.h ****      */
  68:../../libDaisy//src/hid/audio.h ****     typedef float** OutputBuffer;
  69:../../libDaisy//src/hid/audio.h **** 
  70:../../libDaisy//src/hid/audio.h ****     /** Type for a Non-Interleaving audio callback 
  71:../../libDaisy//src/hid/audio.h ****      * Non-Interleaving audio callbacks in daisy will be of this type
  72:../../libDaisy//src/hid/audio.h ****      */
  73:../../libDaisy//src/hid/audio.h ****     typedef void (*AudioCallback)(InputBuffer  in,
  74:../../libDaisy//src/hid/audio.h ****                                   OutputBuffer out,
  75:../../libDaisy//src/hid/audio.h ****                                   size_t       size);
  76:../../libDaisy//src/hid/audio.h **** 
  77:../../libDaisy//src/hid/audio.h ****     /** Interleaving Input buffer
  78:../../libDaisy//src/hid/audio.h ****      ** audio is prepared as { L0, R0, L1, R1, . . . LN, RN }]
  79:../../libDaisy//src/hid/audio.h ****      ** this is const, as the user shouldn't modify it
  80:../../libDaisy//src/hid/audio.h ****     */
  81:../../libDaisy//src/hid/audio.h ****     typedef const float* InterleavingInputBuffer;
  82:../../libDaisy//src/hid/audio.h **** 
  83:../../libDaisy//src/hid/audio.h ****     /** Interleaving Output buffer 
  84:../../libDaisy//src/hid/audio.h ****      ** audio is prepared as { L0, R0, L1, R1, . . . LN, RN }
  85:../../libDaisy//src/hid/audio.h ****     */
  86:../../libDaisy//src/hid/audio.h ****     typedef float* InterleavingOutputBuffer;
  87:../../libDaisy//src/hid/audio.h **** 
  88:../../libDaisy//src/hid/audio.h ****     /** Interleaving Audio Callback 
  89:../../libDaisy//src/hid/audio.h ****      * Interleaving audio callbacks in daisy must be of this type
  90:../../libDaisy//src/hid/audio.h ****      */
  91:../../libDaisy//src/hid/audio.h ****     typedef void (*InterleavingAudioCallback)(InterleavingInputBuffer  in,
  92:../../libDaisy//src/hid/audio.h ****                                               InterleavingOutputBuffer out,
  93:../../libDaisy//src/hid/audio.h ****                                               size_t                   size);
  94:../../libDaisy//src/hid/audio.h **** 
  95:../../libDaisy//src/hid/audio.h ****     AudioHandle() : pimpl_(nullptr) {}
  96:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
  56              		.loc 5 96 5 is_stmt 1 view .LVU7
  57              		.loc 5 96 5 is_stmt 0 view .LVU8
  58              	.LBE156:
  59              		.loc 1 22 19 view .LVU9
  60 0000 7047     		bx	lr
  61              		.cfi_endproc
  62              	.LFE2529:
  64              		.weak	_ZN5daisy9DaisySeedD1Ev
  65              		.thumb_set _ZN5daisy9DaisySeedD1Ev,_ZN5daisy9DaisySeedD2Ev
  66 0002 00BF     		.section	.text._ZN7daisysp10OscillatorD2Ev,"axG",%progbits,_ZN7daisysp10OscillatorD5Ev,comdat
  67              		.align	1
  68              		.p2align 2,,3
  69              		.weak	_ZN7daisysp10OscillatorD2Ev
  70              		.syntax unified
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 8


  71              		.thumb
  72              		.thumb_func
  73              		.fpu fpv5-d16
  75              	_ZN7daisysp10OscillatorD2Ev:
  76              	.LVL1:
  77              	.LFB4219:
  78              		.file 6 "../../DaisySP//Source/Synthesis/oscillator.h"
   1:../../DaisySP//Source/Synthesis/oscillator.h **** #pragma once
   2:../../DaisySP//Source/Synthesis/oscillator.h **** #ifndef DSY_OSCILLATOR_H
   3:../../DaisySP//Source/Synthesis/oscillator.h **** #define DSY_OSCILLATOR_H
   4:../../DaisySP//Source/Synthesis/oscillator.h **** #include <stdint.h>
   5:../../DaisySP//Source/Synthesis/oscillator.h **** #include "Utility/dsp.h"
   6:../../DaisySP//Source/Synthesis/oscillator.h **** #ifdef __cplusplus
   7:../../DaisySP//Source/Synthesis/oscillator.h **** 
   8:../../DaisySP//Source/Synthesis/oscillator.h **** namespace daisysp
   9:../../DaisySP//Source/Synthesis/oscillator.h **** {
  10:../../DaisySP//Source/Synthesis/oscillator.h **** /** Synthesis of several waveforms, including polyBLEP bandlimited waveforms.
  11:../../DaisySP//Source/Synthesis/oscillator.h **** */
  12:../../DaisySP//Source/Synthesis/oscillator.h **** class Oscillator
  13:../../DaisySP//Source/Synthesis/oscillator.h **** {
  14:../../DaisySP//Source/Synthesis/oscillator.h ****   public:
  15:../../DaisySP//Source/Synthesis/oscillator.h ****     Oscillator() {}
  16:../../DaisySP//Source/Synthesis/oscillator.h ****     ~Oscillator() {}
  79              		.loc 6 16 5 is_stmt 1 view -0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 0
  82              		@ frame_needed = 0, uses_anonymous_args = 0
  83              		@ link register save eliminated.
  84              		.loc 6 16 20 is_stmt 0 view .LVU11
  85 0000 7047     		bx	lr
  86              		.cfi_endproc
  87              	.LFE4219:
  89              		.weak	_ZN7daisysp10OscillatorD1Ev
  90              		.thumb_set _ZN7daisysp10OscillatorD1Ev,_ZN7daisysp10OscillatorD2Ev
  91 0002 00BF     		.section	.text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev,"axG",%progbits,_ZN5daisy11MidiH
  92              		.align	1
  93              		.p2align 2,,3
  94              		.weak	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  98              		.fpu fpv5-d16
 100              	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev:
 101              	.LVL2:
 102              	.LFB5370:
 103              		.file 7 "../../libDaisy//src/hid/midi.h"
   1:../../libDaisy//src/hid/midi.h **** #pragma once
   2:../../libDaisy//src/hid/midi.h **** #ifndef DSY_MIDI_H
   3:../../libDaisy//src/hid/midi.h **** #define DSY_MIDI_H
   4:../../libDaisy//src/hid/midi.h **** 
   5:../../libDaisy//src/hid/midi.h **** // TODO: make this adjustable
   6:../../libDaisy//src/hid/midi.h **** #define SYSEX_BUFFER_LEN 128
   7:../../libDaisy//src/hid/midi.h **** 
   8:../../libDaisy//src/hid/midi.h **** #include <stdint.h>
   9:../../libDaisy//src/hid/midi.h **** #include <stdlib.h>
  10:../../libDaisy//src/hid/midi.h **** #include "per/uart.h"
  11:../../libDaisy//src/hid/midi.h **** #include "util/ringbuffer.h"
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 9


  12:../../libDaisy//src/hid/midi.h **** #include "hid/MidiEvent.h"
  13:../../libDaisy//src/hid/midi.h **** #include "hid/usb_midi.h"
  14:../../libDaisy//src/hid/midi.h **** #include "sys/system.h"
  15:../../libDaisy//src/hid/midi.h **** 
  16:../../libDaisy//src/hid/midi.h **** namespace daisy
  17:../../libDaisy//src/hid/midi.h **** {
  18:../../libDaisy//src/hid/midi.h **** /** @brief   Transport layer for sending and receiving MIDI data over UART 
  19:../../libDaisy//src/hid/midi.h ****  *  @details This is the mode of communication used for TRS and DIN MIDI
  20:../../libDaisy//src/hid/midi.h ****  *  @ingroup midi
  21:../../libDaisy//src/hid/midi.h **** */
  22:../../libDaisy//src/hid/midi.h **** class MidiUartTransport
  23:../../libDaisy//src/hid/midi.h **** {
  24:../../libDaisy//src/hid/midi.h ****   public:
  25:../../libDaisy//src/hid/midi.h ****     MidiUartTransport() {}
  26:../../libDaisy//src/hid/midi.h ****     ~MidiUartTransport() {}
  27:../../libDaisy//src/hid/midi.h **** 
  28:../../libDaisy//src/hid/midi.h ****     struct Config
  29:../../libDaisy//src/hid/midi.h ****     {
  30:../../libDaisy//src/hid/midi.h ****         UartHandler::Config::Peripheral periph;
  31:../../libDaisy//src/hid/midi.h ****         dsy_gpio_pin                    rx;
  32:../../libDaisy//src/hid/midi.h ****         dsy_gpio_pin                    tx;
  33:../../libDaisy//src/hid/midi.h **** 
  34:../../libDaisy//src/hid/midi.h ****         Config()
  35:../../libDaisy//src/hid/midi.h ****         {
  36:../../libDaisy//src/hid/midi.h ****             periph = UartHandler::Config::Peripheral::USART_1;
  37:../../libDaisy//src/hid/midi.h ****             rx     = {DSY_GPIOB, 7};
  38:../../libDaisy//src/hid/midi.h ****             tx     = {DSY_GPIOB, 6};
  39:../../libDaisy//src/hid/midi.h ****         }
  40:../../libDaisy//src/hid/midi.h ****     };
  41:../../libDaisy//src/hid/midi.h **** 
  42:../../libDaisy//src/hid/midi.h ****     inline void Init(Config config)
  43:../../libDaisy//src/hid/midi.h ****     {
  44:../../libDaisy//src/hid/midi.h ****         UartHandler::Config uart_config;
  45:../../libDaisy//src/hid/midi.h **** 
  46:../../libDaisy//src/hid/midi.h ****         //defaults
  47:../../libDaisy//src/hid/midi.h ****         uart_config.baudrate   = 31250;
  48:../../libDaisy//src/hid/midi.h ****         uart_config.stopbits   = UartHandler::Config::StopBits::BITS_1;
  49:../../libDaisy//src/hid/midi.h ****         uart_config.parity     = UartHandler::Config::Parity::NONE;
  50:../../libDaisy//src/hid/midi.h ****         uart_config.mode       = UartHandler::Config::Mode::TX_RX;
  51:../../libDaisy//src/hid/midi.h ****         uart_config.wordlength = UartHandler::Config::WordLength::BITS_8;
  52:../../libDaisy//src/hid/midi.h **** 
  53:../../libDaisy//src/hid/midi.h ****         //user settings
  54:../../libDaisy//src/hid/midi.h ****         uart_config.periph        = config.periph;
  55:../../libDaisy//src/hid/midi.h ****         uart_config.pin_config.rx = config.rx;
  56:../../libDaisy//src/hid/midi.h ****         uart_config.pin_config.tx = config.tx;
  57:../../libDaisy//src/hid/midi.h **** 
  58:../../libDaisy//src/hid/midi.h ****         uart_.Init(uart_config);
  59:../../libDaisy//src/hid/midi.h ****     }
  60:../../libDaisy//src/hid/midi.h **** 
  61:../../libDaisy//src/hid/midi.h ****     inline void    StartRx() { uart_.StartRx(); }
  62:../../libDaisy//src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
  63:../../libDaisy//src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
  64:../../libDaisy//src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
  65:../../libDaisy//src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
  66:../../libDaisy//src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
  67:../../libDaisy//src/hid/midi.h **** 
  68:../../libDaisy//src/hid/midi.h ****   private:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 10


  69:../../libDaisy//src/hid/midi.h ****     UartHandler uart_;
  70:../../libDaisy//src/hid/midi.h **** };
  71:../../libDaisy//src/hid/midi.h **** 
  72:../../libDaisy//src/hid/midi.h **** /** 
  73:../../libDaisy//src/hid/midi.h ****     @brief Simple MIDI Handler \n 
  74:../../libDaisy//src/hid/midi.h ****     Parses bytes from an input into valid MidiEvents. \n 
  75:../../libDaisy//src/hid/midi.h ****     The MidiEvents fill a FIFO queue that the user can pop messages from.
  76:../../libDaisy//src/hid/midi.h ****     @author shensley
  77:../../libDaisy//src/hid/midi.h ****     @date March 2020
  78:../../libDaisy//src/hid/midi.h ****     @ingroup midi
  79:../../libDaisy//src/hid/midi.h **** */
  80:../../libDaisy//src/hid/midi.h **** template <typename Transport>
  81:../../libDaisy//src/hid/midi.h **** class MidiHandler
  82:../../libDaisy//src/hid/midi.h **** {
  83:../../libDaisy//src/hid/midi.h ****   public:
  84:../../libDaisy//src/hid/midi.h ****     MidiHandler() {}
  85:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 104              		.loc 7 85 5 is_stmt 1 view -0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 0, uses_anonymous_args = 0
 108              		@ link register save eliminated.
 109              	.LBB157:
 110              	.LBI157:
 111              		.file 8 "../../libDaisy//src/hid/usb_midi.h"
   1:../../libDaisy//src/hid/usb_midi.h **** #pragma once
   2:../../libDaisy//src/hid/usb_midi.h **** #ifndef __DSY_MIDIUSBTRANSPORT_H__
   3:../../libDaisy//src/hid/usb_midi.h **** #define __DSY_MIDIUSBTRANSPORT_H__
   4:../../libDaisy//src/hid/usb_midi.h **** 
   5:../../libDaisy//src/hid/usb_midi.h **** #include "hid/usb.h"
   6:../../libDaisy//src/hid/usb_midi.h **** #include "sys/system.h"
   7:../../libDaisy//src/hid/usb_midi.h **** #include "util/ringbuffer.h"
   8:../../libDaisy//src/hid/usb_midi.h **** 
   9:../../libDaisy//src/hid/usb_midi.h **** namespace daisy
  10:../../libDaisy//src/hid/usb_midi.h **** {
  11:../../libDaisy//src/hid/usb_midi.h **** /** @brief USB Transport for MIDI 
  12:../../libDaisy//src/hid/usb_midi.h ****  *  @ingroup midi
  13:../../libDaisy//src/hid/usb_midi.h ****  */
  14:../../libDaisy//src/hid/usb_midi.h **** class MidiUsbTransport
  15:../../libDaisy//src/hid/usb_midi.h **** {
  16:../../libDaisy//src/hid/usb_midi.h ****   public:
  17:../../libDaisy//src/hid/usb_midi.h ****     // MidiUsbTransport() {}
  18:../../libDaisy//src/hid/usb_midi.h ****     ~MidiUsbTransport() {}
 112              		.loc 8 18 5 view .LVU13
 113              		.loc 8 18 5 is_stmt 0 view .LVU14
 114              	.LBE157:
 115              		.loc 7 85 21 view .LVU15
 116 0000 7047     		bx	lr
 117              		.cfi_endproc
 118              	.LFE5370:
 120              		.weak	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED1Ev
 121              		.thumb_set _ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED1Ev,_ZN5daisy11MidiHandlerINS_16MidiUsbT
 122 0002 00BF     		.section	.text._Z13AudioCallbackPKPKfPPfj,"ax",%progbits
 123              		.align	1
 124              		.p2align 2,,3
 125              		.global	_Z13AudioCallbackPKPKfPPfj
 126              		.syntax unified
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 11


 127              		.thumb
 128              		.thumb_func
 129              		.fpu fpv5-d16
 131              	_Z13AudioCallbackPKPKfPPfj:
 132              	.LVL3:
 133              	.LFB4789:
 134              		.file 9 "USB_MIDI.cpp"
   1:USB_MIDI.cpp  **** /** Simple example of using USB MIDI 
   2:USB_MIDI.cpp  ****  * 
   3:USB_MIDI.cpp  ****  *  When the project boots up, a 100Hz sine wave will emit from both outputs,
   4:USB_MIDI.cpp  ****  *  and the Daisy should appear as an Audio/MIDI device on a connected host.
   5:USB_MIDI.cpp  ****  * 
   6:USB_MIDI.cpp  ****  *  To keep the example short, only note on messages are handled, and there
   7:USB_MIDI.cpp  ****  *  is only a single oscillator voice that tracks the most recent note message.
   8:USB_MIDI.cpp  ****  */
   9:USB_MIDI.cpp  **** #include "daisy_seed.h"
  10:USB_MIDI.cpp  **** #include "daisysp.h"
  11:USB_MIDI.cpp  **** 
  12:USB_MIDI.cpp  **** using namespace daisy;
  13:USB_MIDI.cpp  **** using namespace daisysp;
  14:USB_MIDI.cpp  **** using namespace daisy::seed;
  15:USB_MIDI.cpp  **** DaisySeed      hw;
  16:USB_MIDI.cpp  **** MidiUsbHandler midi;
  17:USB_MIDI.cpp  **** Oscillator     osc;
  18:USB_MIDI.cpp  **** 
  19:USB_MIDI.cpp  **** void AudioCallback(AudioHandle::InputBuffer  in,
  20:USB_MIDI.cpp  ****                    AudioHandle::OutputBuffer out,
  21:USB_MIDI.cpp  ****                    size_t                    size)
  22:USB_MIDI.cpp  **** {
 135              		.loc 9 22 1 is_stmt 1 view -0
 136              		.cfi_startproc
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
  23:USB_MIDI.cpp  ****     for(size_t i = 0; i < size; i++)
 139              		.loc 9 23 5 view .LVU17
 140              	.LBB158:
 141              		.loc 9 23 25 view .LVU18
 142 0000 B2B1     		cbz	r2, .L13
 143              	.LBE158:
  22:USB_MIDI.cpp  ****     for(size_t i = 0; i < size; i++)
 144              		.loc 9 22 1 is_stmt 0 view .LVU19
 145 0002 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 146              		.cfi_def_cfa_offset 24
 147              		.cfi_offset 4, -24
 148              		.cfi_offset 5, -20
 149              		.cfi_offset 6, -16
 150              		.cfi_offset 7, -12
 151              		.cfi_offset 8, -8
 152              		.cfi_offset 14, -4
 153 0006 0E46     		mov	r6, r1
 154 0008 9046     		mov	r8, r2
 155              	.LBB159:
 156              		.loc 9 23 16 view .LVU20
 157 000a 0024     		movs	r4, #0
 158              	.LVL4:
 159              	.L7:
  24:USB_MIDI.cpp  ****         out[0][i] = out[1][i] = osc.Process();
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 12


 160              		.loc 9 24 9 is_stmt 1 discriminator 2 view .LVU21
 161              		.loc 9 24 29 is_stmt 0 discriminator 2 view .LVU22
 162 000c 7568     		ldr	r5, [r6, #4]
 163 000e A700     		lsls	r7, r4, #2
 164              		.loc 9 24 44 discriminator 2 view .LVU23
 165 0010 0848     		ldr	r0, .L16
 166 0012 FFF7FEFF 		bl	_ZN7daisysp10Oscillator7ProcessEv
 167              	.LVL5:
 168              		.loc 9 24 19 discriminator 2 view .LVU24
 169 0016 3368     		ldr	r3, [r6]
 170              		.loc 9 24 29 discriminator 2 view .LVU25
 171 0018 05EB8405 		add	r5, r5, r4, lsl #2
  23:USB_MIDI.cpp  ****     for(size_t i = 0; i < size; i++)
 172              		.loc 9 23 5 discriminator 2 view .LVU26
 173 001c 0134     		adds	r4, r4, #1
 174              	.LVL6:
 175              		.loc 9 24 19 discriminator 2 view .LVU27
 176 001e 3B44     		add	r3, r3, r7
  23:USB_MIDI.cpp  ****     for(size_t i = 0; i < size; i++)
 177              		.loc 9 23 25 discriminator 2 view .LVU28
 178 0020 A045     		cmp	r8, r4
 179              		.loc 9 24 31 discriminator 2 view .LVU29
 180 0022 85ED000A 		vstr.32	s0, [r5]
 181              		.loc 9 24 19 discriminator 2 view .LVU30
 182 0026 83ED000A 		vstr.32	s0, [r3]
  23:USB_MIDI.cpp  ****     for(size_t i = 0; i < size; i++)
 183              		.loc 9 23 5 is_stmt 1 discriminator 2 view .LVU31
 184              	.LVL7:
  23:USB_MIDI.cpp  ****     for(size_t i = 0; i < size; i++)
 185              		.loc 9 23 25 discriminator 2 view .LVU32
 186 002a EFD1     		bne	.L7
 187              	.LBE159:
  25:USB_MIDI.cpp  **** }
 188              		.loc 9 25 1 is_stmt 0 view .LVU33
 189 002c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 190              	.LVL8:
 191              	.L13:
 192              		.cfi_def_cfa_offset 0
 193              		.cfi_restore 4
 194              		.cfi_restore 5
 195              		.cfi_restore 6
 196              		.cfi_restore 7
 197              		.cfi_restore 8
 198              		.cfi_restore 14
 199              		.loc 9 25 1 view .LVU34
 200 0030 7047     		bx	lr
 201              	.L17:
 202 0032 00BF     		.align	2
 203              	.L16:
 204 0034 00000000 		.word	.LANCHOR0
 205              		.cfi_endproc
 206              	.LFE4789:
 208              		.section	.text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh,"axG",%progbits,_ZN5daisy11M
 209              		.align	1
 210              		.p2align 2,,3
 211              		.weak	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh
 212              		.syntax unified
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 13


 213              		.thumb
 214              		.thumb_func
 215              		.fpu fpv5-d16
 217              	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh:
 218              	.LVL9:
 219              	.LFB5223:
  86:../../libDaisy//src/hid/midi.h **** 
  87:../../libDaisy//src/hid/midi.h ****     struct Config
  88:../../libDaisy//src/hid/midi.h ****     {
  89:../../libDaisy//src/hid/midi.h ****         typename Transport::Config transport_config;
  90:../../libDaisy//src/hid/midi.h ****     };
  91:../../libDaisy//src/hid/midi.h **** 
  92:../../libDaisy//src/hid/midi.h ****     /** Initializes the MidiHandler 
  93:../../libDaisy//src/hid/midi.h ****      *  \param config Configuration structure used to define specifics to the MIDI Handler.
  94:../../libDaisy//src/hid/midi.h ****      */
  95:../../libDaisy//src/hid/midi.h ****     void Init(Config config)
  96:../../libDaisy//src/hid/midi.h ****     {
  97:../../libDaisy//src/hid/midi.h ****         config_ = config;
  98:../../libDaisy//src/hid/midi.h **** 
  99:../../libDaisy//src/hid/midi.h ****         transport_.Init(config_.transport_config);
 100:../../libDaisy//src/hid/midi.h **** 
 101:../../libDaisy//src/hid/midi.h ****         event_q_.Init();
 102:../../libDaisy//src/hid/midi.h ****         incoming_message_.type = MessageLast;
 103:../../libDaisy//src/hid/midi.h ****         pstate_                = ParserEmpty;
 104:../../libDaisy//src/hid/midi.h ****     }
 105:../../libDaisy//src/hid/midi.h **** 
 106:../../libDaisy//src/hid/midi.h ****     /** Starts listening on the selected input mode(s). MidiEvent Queue will begin to fill, and can
 107:../../libDaisy//src/hid/midi.h ****     void StartReceive() { transport_.StartRx(); }
 108:../../libDaisy//src/hid/midi.h **** 
 109:../../libDaisy//src/hid/midi.h ****     /** Start listening */
 110:../../libDaisy//src/hid/midi.h ****     void Listen()
 111:../../libDaisy//src/hid/midi.h ****     {
 112:../../libDaisy//src/hid/midi.h ****         uint32_t now;
 113:../../libDaisy//src/hid/midi.h ****         now = System::GetNow();
 114:../../libDaisy//src/hid/midi.h ****         while(transport_.Readable())
 115:../../libDaisy//src/hid/midi.h ****         {
 116:../../libDaisy//src/hid/midi.h ****             last_read_ = now;
 117:../../libDaisy//src/hid/midi.h ****             Parse(transport_.Rx());
 118:../../libDaisy//src/hid/midi.h ****         }
 119:../../libDaisy//src/hid/midi.h **** 
 120:../../libDaisy//src/hid/midi.h ****         // In case of UART Error, (particularly
 121:../../libDaisy//src/hid/midi.h ****         //  overrun error), UART disables itself.
 122:../../libDaisy//src/hid/midi.h ****         // Flush the buff, and restart.
 123:../../libDaisy//src/hid/midi.h ****         if(!transport_.RxActive())
 124:../../libDaisy//src/hid/midi.h ****         {
 125:../../libDaisy//src/hid/midi.h ****             pstate_ = ParserEmpty;
 126:../../libDaisy//src/hid/midi.h ****             transport_.FlushRx();
 127:../../libDaisy//src/hid/midi.h ****             StartReceive();
 128:../../libDaisy//src/hid/midi.h ****         }
 129:../../libDaisy//src/hid/midi.h ****     }
 130:../../libDaisy//src/hid/midi.h **** 
 131:../../libDaisy//src/hid/midi.h ****     /** Checks if there are unhandled messages in the queue 
 132:../../libDaisy//src/hid/midi.h ****     \return True if there are events to be handled, else false.
 133:../../libDaisy//src/hid/midi.h ****      */
 134:../../libDaisy//src/hid/midi.h ****     bool HasEvents() const { return event_q_.readable(); }
 135:../../libDaisy//src/hid/midi.h **** 
 136:../../libDaisy//src/hid/midi.h **** 
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 14


 137:../../libDaisy//src/hid/midi.h ****     /** Pops the oldest unhandled MidiEvent from the internal queue
 138:../../libDaisy//src/hid/midi.h ****     \return The event to be handled
 139:../../libDaisy//src/hid/midi.h ****      */
 140:../../libDaisy//src/hid/midi.h ****     MidiEvent PopEvent() { return event_q_.Read(); }
 141:../../libDaisy//src/hid/midi.h **** 
 142:../../libDaisy//src/hid/midi.h ****     /** SendMessage
 143:../../libDaisy//src/hid/midi.h ****     Send raw bytes as message
 144:../../libDaisy//src/hid/midi.h ****     */
 145:../../libDaisy//src/hid/midi.h ****     void SendMessage(uint8_t* bytes, size_t size)
 146:../../libDaisy//src/hid/midi.h ****     {
 147:../../libDaisy//src/hid/midi.h ****         transport_.Tx(bytes, size);
 148:../../libDaisy//src/hid/midi.h ****     }
 149:../../libDaisy//src/hid/midi.h **** 
 150:../../libDaisy//src/hid/midi.h ****     /** Feed in bytes to state machine from a queue.
 151:../../libDaisy//src/hid/midi.h ****     Populates internal FIFO queue with MIDI Messages
 152:../../libDaisy//src/hid/midi.h ****     For example with uart:
 153:../../libDaisy//src/hid/midi.h ****     midi.Parse(uart.PopRx());
 154:../../libDaisy//src/hid/midi.h ****     \param byte &
 155:../../libDaisy//src/hid/midi.h ****     */
 156:../../libDaisy//src/hid/midi.h ****     void Parse(uint8_t byte)
 220              		.loc 7 156 10 is_stmt 1 view -0
 221              		.cfi_startproc
 222              		@ args = 0, pretend = 0, frame = 288
 223              		@ frame_needed = 0, uses_anonymous_args = 0
 224              		.loc 7 156 10 is_stmt 0 view .LVU36
 225 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 226              		.cfi_def_cfa_offset 24
 227              		.cfi_offset 4, -24
 228              		.cfi_offset 5, -20
 229              		.cfi_offset 6, -16
 230              		.cfi_offset 7, -12
 231              		.cfi_offset 8, -8
 232              		.cfi_offset 14, -4
 157:../../libDaisy//src/hid/midi.h ****     {
 158:../../libDaisy//src/hid/midi.h ****         // reset parser when status byte is received
 159:../../libDaisy//src/hid/midi.h ****         if((byte & kStatusByteMask) && pstate_ != ParserSysEx)
 233              		.loc 7 159 20 view .LVU37
 234 0004 00F51044 		add	r4, r0, #36864
 156:../../libDaisy//src/hid/midi.h ****     {
 235              		.loc 7 156 10 view .LVU38
 236 0008 C8B0     		sub	sp, sp, #288
 237              		.cfi_def_cfa_offset 312
 156:../../libDaisy//src/hid/midi.h ****     {
 238              		.loc 7 156 10 view .LVU39
 239 000a 0546     		mov	r5, r0
 240              		.loc 7 159 18 view .LVU40
 241 000c 94F8AC30 		ldrb	r3, [r4, #172]	@ zero_extendqisi2
 242              		.loc 7 159 9 view .LVU41
 243 0010 1942     		tst	r1, r3
 244              		.loc 7 159 37 view .LVU42
 245 0012 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 246              		.loc 7 159 9 view .LVU43
 247 0014 18D0     		beq	.L19
 248              		.loc 7 159 37 discriminator 1 view .LVU44
 249 0016 032B     		cmp	r3, #3
 250 0018 1CD0     		beq	.L20
 160:../../libDaisy//src/hid/midi.h ****         {
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 15


 161:../../libDaisy//src/hid/midi.h ****             pstate_ = ParserEmpty;
 251              		.loc 7 161 21 view .LVU45
 252 001a 0022     		movs	r2, #0
 253 001c 0271     		strb	r2, [r0, #4]
 162:../../libDaisy//src/hid/midi.h ****         }
 163:../../libDaisy//src/hid/midi.h ****         switch(pstate_)
 164:../../libDaisy//src/hid/midi.h ****         {
 165:../../libDaisy//src/hid/midi.h ****             case ParserEmpty:
 166:../../libDaisy//src/hid/midi.h ****                 // check byte for valid Status Byte
 167:../../libDaisy//src/hid/midi.h ****                 if(byte & kStatusByteMask)
 168:../../libDaisy//src/hid/midi.h ****                 {
 169:../../libDaisy//src/hid/midi.h ****                     // Get MessageType, and Channel
 170:../../libDaisy//src/hid/midi.h ****                     incoming_message_.channel = byte & kChannelMask;
 254              		.loc 7 170 54 view .LVU46
 255 001e 94F8B030 		ldrb	r3, [r4, #176]	@ zero_extendqisi2
 256 0022 0B40     		ands	r3, r3, r1
 257 0024 C360     		str	r3, [r0, #12]
 171:../../libDaisy//src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 172:../../libDaisy//src/hid/midi.h ****                         (byte & kMessageMask) >> 4);
 258              		.loc 7 172 31 view .LVU47
 259 0026 94F8AD30 		ldrb	r3, [r4, #173]	@ zero_extendqisi2
 260              		.loc 7 172 47 view .LVU48
 261 002a 0B40     		ands	r3, r3, r1
 262 002c 1B09     		lsrs	r3, r3, #4
 173:../../libDaisy//src/hid/midi.h **** 
 174:../../libDaisy//src/hid/midi.h ****                     // Validate, and move on.
 175:../../libDaisy//src/hid/midi.h ****                     if(incoming_message_.type < MessageLast)
 263              		.loc 7 175 21 view .LVU49
 264 002e 092B     		cmp	r3, #9
 171:../../libDaisy//src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 265              		.loc 7 171 47 view .LVU50
 266 0030 0372     		strb	r3, [r0, #8]
 267              		.loc 7 175 21 view .LVU51
 268 0032 06D8     		bhi	.L18
 176:../../libDaisy//src/hid/midi.h ****                     {
 177:../../libDaisy//src/hid/midi.h ****                         pstate_ = ParserHasStatus;
 269              		.loc 7 177 33 view .LVU52
 270 0034 0120     		movs	r0, #1
 271              	.LVL10:
 178:../../libDaisy//src/hid/midi.h ****                         // Mark this status byte as running_status
 179:../../libDaisy//src/hid/midi.h ****                         running_status_ = incoming_message_.type;
 180:../../libDaisy//src/hid/midi.h **** 
 181:../../libDaisy//src/hid/midi.h ****                         if(running_status_ == SystemCommon)
 272              		.loc 7 181 25 view .LVU53
 273 0036 072B     		cmp	r3, #7
 177:../../libDaisy//src/hid/midi.h ****                         // Mark this status byte as running_status
 274              		.loc 7 177 33 view .LVU54
 275 0038 2871     		strb	r0, [r5, #4]
 179:../../libDaisy//src/hid/midi.h **** 
 276              		.loc 7 179 41 view .LVU55
 277 003a 84F8A430 		strb	r3, [r4, #164]
 278              		.loc 7 181 25 view .LVU56
 279 003e 00F0E880 		beq	.L76
 280              	.LVL11:
 281              	.L18:
 182:../../libDaisy//src/hid/midi.h ****                         {
 183:../../libDaisy//src/hid/midi.h ****                             incoming_message_.channel = 0;
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 16


 184:../../libDaisy//src/hid/midi.h ****                             //system real time = 1111 1xxx
 185:../../libDaisy//src/hid/midi.h ****                             if(byte & 0x08)
 186:../../libDaisy//src/hid/midi.h ****                             {
 187:../../libDaisy//src/hid/midi.h ****                                 incoming_message_.type = SystemRealTime;
 188:../../libDaisy//src/hid/midi.h ****                                 running_status_        = SystemRealTime;
 189:../../libDaisy//src/hid/midi.h ****                                 incoming_message_.srt_type
 190:../../libDaisy//src/hid/midi.h ****                                     = static_cast<SystemRealTimeType>(
 191:../../libDaisy//src/hid/midi.h ****                                         byte & kSystemRealTimeMask);
 192:../../libDaisy//src/hid/midi.h **** 
 193:../../libDaisy//src/hid/midi.h ****                                 //short circuit to start
 194:../../libDaisy//src/hid/midi.h ****                                 pstate_ = ParserEmpty;
 195:../../libDaisy//src/hid/midi.h ****                                 event_q_.Write(incoming_message_);
 196:../../libDaisy//src/hid/midi.h ****                             }
 197:../../libDaisy//src/hid/midi.h ****                             //system common
 198:../../libDaisy//src/hid/midi.h ****                             else
 199:../../libDaisy//src/hid/midi.h ****                             {
 200:../../libDaisy//src/hid/midi.h ****                                 incoming_message_.sc_type
 201:../../libDaisy//src/hid/midi.h ****                                     = static_cast<SystemCommonType>(byte
 202:../../libDaisy//src/hid/midi.h ****                                                                     & 0x07);
 203:../../libDaisy//src/hid/midi.h ****                                 //sysex
 204:../../libDaisy//src/hid/midi.h ****                                 if(incoming_message_.sc_type == SystemExclusive)
 205:../../libDaisy//src/hid/midi.h ****                                 {
 206:../../libDaisy//src/hid/midi.h ****                                     pstate_ = ParserSysEx;
 207:../../libDaisy//src/hid/midi.h ****                                     incoming_message_.sysex_message_len = 0;
 208:../../libDaisy//src/hid/midi.h ****                                 }
 209:../../libDaisy//src/hid/midi.h ****                                 //short circuit
 210:../../libDaisy//src/hid/midi.h ****                                 else if(incoming_message_.sc_type > SongSelect)
 211:../../libDaisy//src/hid/midi.h ****                                 {
 212:../../libDaisy//src/hid/midi.h ****                                     pstate_ = ParserEmpty;
 213:../../libDaisy//src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 214:../../libDaisy//src/hid/midi.h ****                                 }
 215:../../libDaisy//src/hid/midi.h ****                             }
 216:../../libDaisy//src/hid/midi.h ****                         }
 217:../../libDaisy//src/hid/midi.h ****                     }
 218:../../libDaisy//src/hid/midi.h ****                     // Else we'll keep waiting for a valid incoming status byte
 219:../../libDaisy//src/hid/midi.h ****                 }
 220:../../libDaisy//src/hid/midi.h ****                 else
 221:../../libDaisy//src/hid/midi.h ****                 {
 222:../../libDaisy//src/hid/midi.h ****                     // Handle as running status
 223:../../libDaisy//src/hid/midi.h ****                     incoming_message_.type    = running_status_;
 224:../../libDaisy//src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 225:../../libDaisy//src/hid/midi.h ****                     //check for single byte running status, really this only applies to channel pre
 226:../../libDaisy//src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 227:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 228:../../libDaisy//src/hid/midi.h ****                        || incoming_message_.sc_type == MTCQuarterFrame
 229:../../libDaisy//src/hid/midi.h ****                        || incoming_message_.sc_type == SongSelect)
 230:../../libDaisy//src/hid/midi.h ****                     {
 231:../../libDaisy//src/hid/midi.h ****                         //Send the single byte update
 232:../../libDaisy//src/hid/midi.h ****                         pstate_ = ParserEmpty;
 233:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 234:../../libDaisy//src/hid/midi.h ****                     }
 235:../../libDaisy//src/hid/midi.h ****                     else
 236:../../libDaisy//src/hid/midi.h ****                     {
 237:../../libDaisy//src/hid/midi.h ****                         pstate_
 238:../../libDaisy//src/hid/midi.h ****                             = ParserHasData0; //we need to get the 2nd byte yet.
 239:../../libDaisy//src/hid/midi.h ****                     }
 240:../../libDaisy//src/hid/midi.h ****                 }
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 17


 241:../../libDaisy//src/hid/midi.h ****                 break;
 242:../../libDaisy//src/hid/midi.h ****             case ParserHasStatus:
 243:../../libDaisy//src/hid/midi.h ****                 if((byte & kStatusByteMask) == 0)
 244:../../libDaisy//src/hid/midi.h ****                 {
 245:../../libDaisy//src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 246:../../libDaisy//src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 247:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 248:../../libDaisy//src/hid/midi.h ****                        || incoming_message_.sc_type == MTCQuarterFrame
 249:../../libDaisy//src/hid/midi.h ****                        || incoming_message_.sc_type == SongSelect)
 250:../../libDaisy//src/hid/midi.h ****                     {
 251:../../libDaisy//src/hid/midi.h ****                         //these are just one data byte, so we short circuit back to start
 252:../../libDaisy//src/hid/midi.h ****                         pstate_ = ParserEmpty;
 253:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 254:../../libDaisy//src/hid/midi.h ****                     }
 255:../../libDaisy//src/hid/midi.h ****                     else
 256:../../libDaisy//src/hid/midi.h ****                     {
 257:../../libDaisy//src/hid/midi.h ****                         pstate_ = ParserHasData0;
 258:../../libDaisy//src/hid/midi.h ****                     }
 259:../../libDaisy//src/hid/midi.h **** 
 260:../../libDaisy//src/hid/midi.h ****                     //ChannelModeMessages (reserved Control Changes)
 261:../../libDaisy//src/hid/midi.h ****                     if(running_status_ == ControlChange
 262:../../libDaisy//src/hid/midi.h ****                        && incoming_message_.data[0] > 119)
 263:../../libDaisy//src/hid/midi.h ****                     {
 264:../../libDaisy//src/hid/midi.h ****                         incoming_message_.type = ChannelMode;
 265:../../libDaisy//src/hid/midi.h ****                         running_status_        = ChannelMode;
 266:../../libDaisy//src/hid/midi.h ****                         incoming_message_.cm_type
 267:../../libDaisy//src/hid/midi.h ****                             = static_cast<ChannelModeType>(
 268:../../libDaisy//src/hid/midi.h ****                                 incoming_message_.data[0] - 120);
 269:../../libDaisy//src/hid/midi.h ****                     }
 270:../../libDaisy//src/hid/midi.h ****                 }
 271:../../libDaisy//src/hid/midi.h ****                 else
 272:../../libDaisy//src/hid/midi.h ****                 {
 273:../../libDaisy//src/hid/midi.h ****                     // invalid message go back to start ;p
 274:../../libDaisy//src/hid/midi.h ****                     pstate_ = ParserEmpty;
 275:../../libDaisy//src/hid/midi.h ****                 }
 276:../../libDaisy//src/hid/midi.h ****                 break;
 277:../../libDaisy//src/hid/midi.h ****             case ParserHasData0:
 278:../../libDaisy//src/hid/midi.h ****                 if((byte & kStatusByteMask) == 0)
 279:../../libDaisy//src/hid/midi.h ****                 {
 280:../../libDaisy//src/hid/midi.h ****                     incoming_message_.data[1] = byte & kDataByteMask;
 281:../../libDaisy//src/hid/midi.h **** 
 282:../../libDaisy//src/hid/midi.h ****                     //velocity 0 NoteOns are NoteOffs
 283:../../libDaisy//src/hid/midi.h ****                     if(running_status_ == NoteOn
 284:../../libDaisy//src/hid/midi.h ****                        && incoming_message_.data[1] == 0)
 285:../../libDaisy//src/hid/midi.h ****                     {
 286:../../libDaisy//src/hid/midi.h ****                         incoming_message_.type = NoteOff;
 287:../../libDaisy//src/hid/midi.h ****                     }
 288:../../libDaisy//src/hid/midi.h **** 
 289:../../libDaisy//src/hid/midi.h ****                     // At this point the message is valid, and we can add this MidiEvent to the que
 290:../../libDaisy//src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 291:../../libDaisy//src/hid/midi.h ****                 }
 292:../../libDaisy//src/hid/midi.h ****                 else
 293:../../libDaisy//src/hid/midi.h ****                 {
 294:../../libDaisy//src/hid/midi.h ****                     // invalid message go back to start ;p
 295:../../libDaisy//src/hid/midi.h ****                     pstate_ = ParserEmpty;
 296:../../libDaisy//src/hid/midi.h ****                 }
 297:../../libDaisy//src/hid/midi.h ****                 // Regardless, of whether the data was valid or not we go back to empty
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 18


 298:../../libDaisy//src/hid/midi.h ****                 // because either the message is queued for handling or its not.
 299:../../libDaisy//src/hid/midi.h ****                 pstate_ = ParserEmpty;
 300:../../libDaisy//src/hid/midi.h ****                 break;
 301:../../libDaisy//src/hid/midi.h ****             case ParserSysEx:
 302:../../libDaisy//src/hid/midi.h ****                 // end of sysex
 303:../../libDaisy//src/hid/midi.h ****                 if(byte == 0xf7)
 304:../../libDaisy//src/hid/midi.h ****                 {
 305:../../libDaisy//src/hid/midi.h ****                     pstate_ = ParserEmpty;
 306:../../libDaisy//src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 307:../../libDaisy//src/hid/midi.h ****                 }
 308:../../libDaisy//src/hid/midi.h ****                 else if(incoming_message_.sysex_message_len < SYSEX_BUFFER_LEN)
 309:../../libDaisy//src/hid/midi.h ****                 {
 310:../../libDaisy//src/hid/midi.h ****                     incoming_message_
 311:../../libDaisy//src/hid/midi.h ****                         .sysex_data[incoming_message_.sysex_message_len]
 312:../../libDaisy//src/hid/midi.h ****                         = byte;
 313:../../libDaisy//src/hid/midi.h ****                     incoming_message_.sysex_message_len++;
 314:../../libDaisy//src/hid/midi.h ****                 }
 315:../../libDaisy//src/hid/midi.h ****                 break;
 316:../../libDaisy//src/hid/midi.h ****             default: break;
 317:../../libDaisy//src/hid/midi.h ****         }
 318:../../libDaisy//src/hid/midi.h ****     }
 282              		.loc 7 318 5 view .LVU57
 283 0042 48B0     		add	sp, sp, #288
 284              		.cfi_remember_state
 285              		.cfi_def_cfa_offset 24
 286              		@ sp needed
 287 0044 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 288              	.LVL12:
 289              	.L19:
 290              		.cfi_restore_state
 163:../../libDaisy//src/hid/midi.h ****         {
 291              		.loc 7 163 9 view .LVU58
 292 0048 032B     		cmp	r3, #3
 293 004a FAD8     		bhi	.L18
 294 004c DFE803F0 		tbb	[pc, r3]
 295              	.L42:
 296 0050 8D       		.byte	(.L28-.L42)/2
 297 0051 11       		.byte	(.L32-.L42)/2
 298 0052 58       		.byte	(.L37-.L42)/2
 299 0053 02       		.byte	(.L20-.L42)/2
 300              		.p2align 1
 301              	.L20:
 303:../../libDaisy//src/hid/midi.h ****                 {
 302              		.loc 7 303 17 view .LVU59
 303 0054 F729     		cmp	r1, #247
 304 0056 00F0C380 		beq	.L77
 308:../../libDaisy//src/hid/midi.h ****                 {
 305              		.loc 7 308 22 view .LVU60
 306 005a 95F99220 		ldrsb	r2, [r5, #146]
 308:../../libDaisy//src/hid/midi.h ****                 {
 307              		.loc 7 308 43 view .LVU61
 308 005e 95F89230 		ldrb	r3, [r5, #146]	@ zero_extendqisi2
 308:../../libDaisy//src/hid/midi.h ****                 {
 309              		.loc 7 308 22 view .LVU62
 310 0062 002A     		cmp	r2, #0
 311 0064 EDDB     		blt	.L18
 312:../../libDaisy//src/hid/midi.h ****                     incoming_message_.sysex_message_len++;
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 19


 312              		.loc 7 312 25 view .LVU63
 313 0066 EA18     		adds	r2, r5, r3
 313:../../libDaisy//src/hid/midi.h ****                 }
 314              		.loc 7 313 21 view .LVU64
 315 0068 0133     		adds	r3, r3, #1
 312:../../libDaisy//src/hid/midi.h ****                     incoming_message_.sysex_message_len++;
 316              		.loc 7 312 25 view .LVU65
 317 006a 9174     		strb	r1, [r2, #18]
 313:../../libDaisy//src/hid/midi.h ****                 }
 318              		.loc 7 313 21 view .LVU66
 319 006c 85F89230 		strb	r3, [r5, #146]
 320              		.loc 7 318 5 view .LVU67
 321 0070 E7E7     		b	.L18
 322              	.L32:
 245:../../libDaisy//src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 323              		.loc 7 245 54 view .LVU68
 324 0072 94F8AE80 		ldrb	r8, [r4, #174]	@ zero_extendqisi2
 325 0076 01EA0808 		and	r8, r1, r8
 245:../../libDaisy//src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 326              		.loc 7 245 47 view .LVU69
 327 007a 85F81080 		strb	r8, [r5, #16]
 246:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 328              		.loc 7 246 24 view .LVU70
 329 007e 94F8A470 		ldrb	r7, [r4, #164]	@ zero_extendqisi2
 246:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 330              		.loc 7 246 21 view .LVU71
 331 0082 3B1F     		subs	r3, r7, #4
 332 0084 012B     		cmp	r3, #1
 333 0086 06D9     		bls	.L33
 248:../../libDaisy//src/hid/midi.h ****                        || incoming_message_.sc_type == SongSelect)
 334              		.loc 7 248 24 view .LVU72
 335 0088 95F89330 		ldrb	r3, [r5, #147]	@ zero_extendqisi2
 249:../../libDaisy//src/hid/midi.h ****                     {
 336              		.loc 7 249 24 view .LVU73
 337 008c 03F0FD03 		and	r3, r3, #253
 338 0090 012B     		cmp	r3, #1
 339 0092 40F0BB80 		bne	.L34
 340              	.L33:
 252:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 341              		.loc 7 252 33 view .LVU74
 342 0096 0023     		movs	r3, #0
 343 0098 6E46     		mov	r6, sp
 344 009a 9022     		movs	r2, #144
 345 009c 05F10801 		add	r1, r5, #8
 346              	.LVL13:
 252:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 347              		.loc 7 252 33 view .LVU75
 348 00a0 3046     		mov	r0, r6
 349              	.LVL14:
 252:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 350              		.loc 7 252 33 view .LVU76
 351 00a2 2B71     		strb	r3, [r5, #4]
 352              	.LVL15:
 252:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 353              		.loc 7 252 33 view .LVU77
 354 00a4 FFF7FEFF 		bl	memcpy
 355              	.LVL16:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 20


 356              	.LBB196:
 357              	.LBI196:
 358              		.file 10 "../../libDaisy//src/util/ringbuffer.h"
   1:../../libDaisy//src/util/ringbuffer.h **** #pragma once
   2:../../libDaisy//src/util/ringbuffer.h **** #ifndef DSY_RINGBUFFER_H
   3:../../libDaisy//src/util/ringbuffer.h **** #define DSY_RINGBUFFER_H
   4:../../libDaisy//src/util/ringbuffer.h **** 
   5:../../libDaisy//src/util/ringbuffer.h **** #include <algorithm>
   6:../../libDaisy//src/util/ringbuffer.h **** 
   7:../../libDaisy//src/util/ringbuffer.h **** namespace daisy
   8:../../libDaisy//src/util/ringbuffer.h **** {
   9:../../libDaisy//src/util/ringbuffer.h **** /** @addtogroup utility
  10:../../libDaisy//src/util/ringbuffer.h ****     @{
  11:../../libDaisy//src/util/ringbuffer.h **** */
  12:../../libDaisy//src/util/ringbuffer.h **** 
  13:../../libDaisy//src/util/ringbuffer.h **** /**
  14:../../libDaisy//src/util/ringbuffer.h **** Utility Ring Buffer \n 
  15:../../libDaisy//src/util/ringbuffer.h **** imported from pichenettes/stmlib
  16:../../libDaisy//src/util/ringbuffer.h **** */
  17:../../libDaisy//src/util/ringbuffer.h **** template <typename T, size_t size>
  18:../../libDaisy//src/util/ringbuffer.h **** class RingBuffer
  19:../../libDaisy//src/util/ringbuffer.h **** {
  20:../../libDaisy//src/util/ringbuffer.h ****   public:
  21:../../libDaisy//src/util/ringbuffer.h ****     RingBuffer() {}
  22:../../libDaisy//src/util/ringbuffer.h **** 
  23:../../libDaisy//src/util/ringbuffer.h ****     /** Initializes the Ring Buffer */
  24:../../libDaisy//src/util/ringbuffer.h ****     inline void Init() { read_ptr_ = write_ptr_ = 0; }
  25:../../libDaisy//src/util/ringbuffer.h **** 
  26:../../libDaisy//src/util/ringbuffer.h ****     /** \return The total size of the ring buffer */
  27:../../libDaisy//src/util/ringbuffer.h ****     inline size_t capacity() const { return size; }
  28:../../libDaisy//src/util/ringbuffer.h **** 
  29:../../libDaisy//src/util/ringbuffer.h ****     /** \return the number of samples that can be written to ring buffer without overwriting unread
  30:../../libDaisy//src/util/ringbuffer.h ****     inline size_t writable() const
  31:../../libDaisy//src/util/ringbuffer.h ****     {
  32:../../libDaisy//src/util/ringbuffer.h ****         return (read_ptr_ - write_ptr_ - 1) % size;
  33:../../libDaisy//src/util/ringbuffer.h ****     }
  34:../../libDaisy//src/util/ringbuffer.h **** 
  35:../../libDaisy//src/util/ringbuffer.h ****     /** \return number of unread elements in ring buffer */
  36:../../libDaisy//src/util/ringbuffer.h ****     inline size_t readable() const { return (write_ptr_ - read_ptr_) % size; }
  37:../../libDaisy//src/util/ringbuffer.h **** 
  38:../../libDaisy//src/util/ringbuffer.h ****     /** \returns True, if the buffer is empty. */
  39:../../libDaisy//src/util/ringbuffer.h ****     inline bool isEmpty() const { return write_ptr_ == read_ptr_; }
  40:../../libDaisy//src/util/ringbuffer.h **** 
  41:../../libDaisy//src/util/ringbuffer.h ****     /** Writes the value to the next available position in the ring buffer
  42:../../libDaisy//src/util/ringbuffer.h ****     \param v Value to write
  43:../../libDaisy//src/util/ringbuffer.h ****     */
  44:../../libDaisy//src/util/ringbuffer.h ****     inline void Write(T v)
 359              		.loc 10 44 17 is_stmt 1 view .LVU78
 360              	.L35:
 361              	.LBB197:
  45:../../libDaisy//src/util/ringbuffer.h ****     {
  46:../../libDaisy//src/util/ringbuffer.h ****         while(!writable())
 362              		.loc 10 46 24 view .LVU79
 363              	.LBB198:
 364              	.LBI198:
  30:../../libDaisy//src/util/ringbuffer.h ****     {
 365              		.loc 10 30 19 view .LVU80
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 21


 366              	.LBB199:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 367              		.loc 10 32 17 is_stmt 0 view .LVU81
 368 00a8 D4F89830 		ldr	r3, [r4, #152]
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 369              		.loc 10 32 29 view .LVU82
 370 00ac D4F89C20 		ldr	r2, [r4, #156]
 371              	.LVL17:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 372              		.loc 10 32 40 view .LVU83
 373 00b0 013B     		subs	r3, r3, #1
 374 00b2 9B1A     		subs	r3, r3, r2
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 375              		.loc 10 32 47 view .LVU84
 376 00b4 DBB2     		uxtb	r3, r3
 377              	.LBE199:
 378              	.LBE198:
 379              		.loc 10 46 24 view .LVU85
 380 00b6 002B     		cmp	r3, #0
 381 00b8 F6D0     		beq	.L35
 382              	.LVL18:
 383              		.loc 10 46 24 view .LVU86
 384 00ba 9022     		movs	r2, #144
 385 00bc 3146     		mov	r1, r6
 386 00be 0DEB0200 		add	r0, sp, r2
 387 00c2 FFF7FEFF 		bl	memcpy
 388              	.LVL19:
 389              	.LBB200:
 390              	.LBI200:
  47:../../libDaisy//src/util/ringbuffer.h ****             ;
  48:../../libDaisy//src/util/ringbuffer.h ****         Overwrite(v);
  49:../../libDaisy//src/util/ringbuffer.h ****     }
  50:../../libDaisy//src/util/ringbuffer.h **** 
  51:../../libDaisy//src/util/ringbuffer.h ****     /** Writes the new element to the ring buffer, overwriting unread data if necessary. 
  52:../../libDaisy//src/util/ringbuffer.h ****     \param v Value to overwrite
  53:../../libDaisy//src/util/ringbuffer.h ****      */
  54:../../libDaisy//src/util/ringbuffer.h ****     inline void Overwrite(T v)
 391              		.loc 10 54 17 is_stmt 1 view .LVU87
 392              	.LBB201:
  55:../../libDaisy//src/util/ringbuffer.h ****     {
  56:../../libDaisy//src/util/ringbuffer.h ****         size_t w   = write_ptr_;
 393              		.loc 10 56 16 is_stmt 0 view .LVU88
 394 00c6 D4F89C60 		ldr	r6, [r4, #156]
 395              	.LVL20:
  57:../../libDaisy//src/util/ringbuffer.h ****         buffer_[w] = v;
 396              		.loc 10 57 9 view .LVU89
 397 00ca 24A9     		add	r1, sp, #144
 398 00cc 9022     		movs	r2, #144
 399 00ce 06EBC600 		add	r0, r6, r6, lsl #3
  58:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 400              		.loc 10 58 25 view .LVU90
 401 00d2 0136     		adds	r6, r6, #1
 402              	.LVL21:
  57:../../libDaisy//src/util/ringbuffer.h ****         buffer_[w] = v;
 403              		.loc 10 57 9 view .LVU91
 404 00d4 05EB0010 		add	r0, r5, r0, lsl #4
 405              		.loc 10 58 30 view .LVU92
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 22


 406 00d8 F6B2     		uxtb	r6, r6
 407              	.LVL22:
  57:../../libDaisy//src/util/ringbuffer.h ****         buffer_[w] = v;
 408              		.loc 10 57 9 view .LVU93
 409 00da 9830     		adds	r0, r0, #152
 410 00dc FFF7FEFF 		bl	memcpy
 411              	.LVL23:
 412              		.loc 10 58 20 view .LVU94
 413 00e0 C4F89C60 		str	r6, [r4, #156]
 414              	.LVL24:
 415              	.L36:
 416              		.loc 10 58 20 view .LVU95
 417              	.LBE201:
 418              	.LBE200:
 419              	.LBE197:
 420              	.LBE196:
 262:../../libDaisy//src/hid/midi.h ****                     {
 421              		.loc 7 262 24 view .LVU96
 422 00e4 B8F1770F 		cmp	r8, #119
 423 00e8 ABD9     		bls	.L18
 424 00ea 032F     		cmp	r7, #3
 425 00ec A9D1     		bne	.L18
 264:../../libDaisy//src/hid/midi.h ****                         running_status_        = ChannelMode;
 426              		.loc 7 264 48 view .LVU97
 427 00ee 0923     		movs	r3, #9
 268:../../libDaisy//src/hid/midi.h ****                     }
 428              		.loc 7 268 59 view .LVU98
 429 00f0 A8F17801 		sub	r1, r8, #120
 264:../../libDaisy//src/hid/midi.h ****                         running_status_        = ChannelMode;
 430              		.loc 7 264 48 view .LVU99
 431 00f4 2B72     		strb	r3, [r5, #8]
 265:../../libDaisy//src/hid/midi.h ****                         incoming_message_.cm_type
 432              		.loc 7 265 48 view .LVU100
 433 00f6 84F8A430 		strb	r3, [r4, #164]
 267:../../libDaisy//src/hid/midi.h ****                                 incoming_message_.data[0] - 120);
 434              		.loc 7 267 29 view .LVU101
 435 00fa 85F89510 		strb	r1, [r5, #149]
 436 00fe A0E7     		b	.L18
 437              	.LVL25:
 438              	.L37:
 280:../../libDaisy//src/hid/midi.h **** 
 439              		.loc 7 280 54 view .LVU102
 440 0100 94F8AE30 		ldrb	r3, [r4, #174]	@ zero_extendqisi2
 441 0104 1940     		ands	r1, r1, r3
 442              	.LVL26:
 280:../../libDaisy//src/hid/midi.h **** 
 443              		.loc 7 280 47 view .LVU103
 444 0106 6974     		strb	r1, [r5, #17]
 283:../../libDaisy//src/hid/midi.h ****                        && incoming_message_.data[1] == 0)
 445              		.loc 7 283 21 view .LVU104
 446 0108 94F8A430 		ldrb	r3, [r4, #164]	@ zero_extendqisi2
 284:../../libDaisy//src/hid/midi.h ****                     {
 447              		.loc 7 284 24 view .LVU105
 448 010c 012B     		cmp	r3, #1
 449 010e 02D1     		bne	.L38
 450 0110 0029     		cmp	r1, #0
 451 0112 00F08C80 		beq	.L78
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 23


 452              	.L38:
 453              	.LVL27:
 284:../../libDaisy//src/hid/midi.h ****                     {
 454              		.loc 7 284 24 view .LVU106
 455 0116 6E46     		mov	r6, sp
 456 0118 9022     		movs	r2, #144
 457 011a 05F10801 		add	r1, r5, #8
 458 011e 3046     		mov	r0, r6
 459              	.LVL28:
 284:../../libDaisy//src/hid/midi.h ****                     {
 460              		.loc 7 284 24 view .LVU107
 461 0120 FFF7FEFF 		bl	memcpy
 462              	.LVL29:
 463              	.LBB202:
 464              	.LBI202:
  44:../../libDaisy//src/util/ringbuffer.h ****     {
 465              		.loc 10 44 17 is_stmt 1 view .LVU108
 466              	.L39:
 467              	.LBB203:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 468              		.loc 10 46 24 view .LVU109
 469              	.LBB204:
 470              	.LBI204:
  30:../../libDaisy//src/util/ringbuffer.h ****     {
 471              		.loc 10 30 19 view .LVU110
 472              	.LBB205:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 473              		.loc 10 32 17 is_stmt 0 view .LVU111
 474 0124 D4F89830 		ldr	r3, [r4, #152]
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 475              		.loc 10 32 29 view .LVU112
 476 0128 D4F89C20 		ldr	r2, [r4, #156]
 477              	.LVL30:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 478              		.loc 10 32 40 view .LVU113
 479 012c 013B     		subs	r3, r3, #1
 480 012e 9B1A     		subs	r3, r3, r2
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 481              		.loc 10 32 47 view .LVU114
 482 0130 DBB2     		uxtb	r3, r3
 483              	.LBE205:
 484              	.LBE204:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 485              		.loc 10 46 24 view .LVU115
 486 0132 002B     		cmp	r3, #0
 487 0134 F6D0     		beq	.L39
 488              	.LVL31:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 489              		.loc 10 46 24 view .LVU116
 490 0136 9022     		movs	r2, #144
 491 0138 3146     		mov	r1, r6
 492 013a 0DEB0200 		add	r0, sp, r2
 493 013e FFF7FEFF 		bl	memcpy
 494              	.LVL32:
 495              	.LBB206:
 496              	.LBI206:
  54:../../libDaisy//src/util/ringbuffer.h ****     {
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 24


 497              		.loc 10 54 17 is_stmt 1 view .LVU117
 498              	.LBB207:
  56:../../libDaisy//src/util/ringbuffer.h ****         buffer_[w] = v;
 499              		.loc 10 56 16 is_stmt 0 view .LVU118
 500 0142 D4F89C60 		ldr	r6, [r4, #156]
 501              	.LVL33:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 502              		.loc 10 57 9 view .LVU119
 503 0146 24A9     		add	r1, sp, #144
 504 0148 9022     		movs	r2, #144
 505 014a 06EBC600 		add	r0, r6, r6, lsl #3
 506              		.loc 10 58 25 view .LVU120
 507 014e 0136     		adds	r6, r6, #1
 508              	.LVL34:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 509              		.loc 10 57 9 view .LVU121
 510 0150 05EB0010 		add	r0, r5, r0, lsl #4
 511              		.loc 10 58 30 view .LVU122
 512 0154 F6B2     		uxtb	r6, r6
 513              	.LVL35:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 514              		.loc 10 57 9 view .LVU123
 515 0156 9830     		adds	r0, r0, #152
 516 0158 FFF7FEFF 		bl	memcpy
 517              	.LVL36:
 518              	.LBE207:
 519              	.LBE206:
 520              	.LBE203:
 521              	.LBE202:
 299:../../libDaisy//src/hid/midi.h ****                 break;
 522              		.loc 7 299 25 view .LVU124
 523 015c 0023     		movs	r3, #0
 524              	.LBB211:
 525              	.LBB210:
 526              	.LBB209:
 527              	.LBB208:
 528              		.loc 10 58 20 view .LVU125
 529 015e C4F89C60 		str	r6, [r4, #156]
 530              	.LVL37:
 531              		.loc 10 58 20 view .LVU126
 532              	.LBE208:
 533              	.LBE209:
 534              	.LBE210:
 535              	.LBE211:
 299:../../libDaisy//src/hid/midi.h ****                 break;
 536              		.loc 7 299 25 view .LVU127
 537 0162 2B71     		strb	r3, [r5, #4]
 538              		.loc 7 318 5 view .LVU128
 539 0164 48B0     		add	sp, sp, #288
 540              		.cfi_remember_state
 541              		.cfi_def_cfa_offset 24
 542              		@ sp needed
 543 0166 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 544              	.LVL38:
 545              	.L28:
 546              		.cfi_restore_state
 223:../../libDaisy//src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 25


 547              		.loc 7 223 49 view .LVU129
 548 016a 94F8A430 		ldrb	r3, [r4, #164]	@ zero_extendqisi2
 223:../../libDaisy//src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 549              		.loc 7 223 47 view .LVU130
 550 016e 2B72     		strb	r3, [r5, #8]
 226:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 551              		.loc 7 226 21 view .LVU131
 552 0170 043B     		subs	r3, r3, #4
 224:../../libDaisy//src/hid/midi.h ****                     //check for single byte running status, really this only applies to channel pre
 553              		.loc 7 224 54 view .LVU132
 554 0172 94F8AE20 		ldrb	r2, [r4, #174]	@ zero_extendqisi2
 226:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 555              		.loc 7 226 21 view .LVU133
 556 0176 012B     		cmp	r3, #1
 224:../../libDaisy//src/hid/midi.h ****                     //check for single byte running status, really this only applies to channel pre
 557              		.loc 7 224 54 view .LVU134
 558 0178 01EA0201 		and	r1, r1, r2
 559              	.LVL39:
 224:../../libDaisy//src/hid/midi.h ****                     //check for single byte running status, really this only applies to channel pre
 560              		.loc 7 224 47 view .LVU135
 561 017c 2974     		strb	r1, [r5, #16]
 226:../../libDaisy//src/hid/midi.h ****                        || running_status_ == ProgramChange
 562              		.loc 7 226 21 view .LVU136
 563 017e 05D9     		bls	.L29
 228:../../libDaisy//src/hid/midi.h ****                        || incoming_message_.sc_type == SongSelect)
 564              		.loc 7 228 24 view .LVU137
 565 0180 95F89330 		ldrb	r3, [r5, #147]	@ zero_extendqisi2
 229:../../libDaisy//src/hid/midi.h ****                     {
 566              		.loc 7 229 24 view .LVU138
 567 0184 03F0FD03 		and	r3, r3, #253
 568 0188 012B     		cmp	r3, #1
 569 018a 3CD1     		bne	.L30
 570              	.L29:
 232:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 571              		.loc 7 232 33 view .LVU139
 572 018c 0023     		movs	r3, #0
 573 018e 6E46     		mov	r6, sp
 574 0190 9022     		movs	r2, #144
 575 0192 05F10801 		add	r1, r5, #8
 576 0196 3046     		mov	r0, r6
 577              	.LVL40:
 232:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 578              		.loc 7 232 33 view .LVU140
 579 0198 2B71     		strb	r3, [r5, #4]
 580              	.LVL41:
 232:../../libDaisy//src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 581              		.loc 7 232 33 view .LVU141
 582 019a FFF7FEFF 		bl	memcpy
 583              	.LVL42:
 584              	.LBB212:
 585              	.LBI212:
  44:../../libDaisy//src/util/ringbuffer.h ****     {
 586              		.loc 10 44 17 is_stmt 1 view .LVU142
 587              	.L31:
 588              	.LBB213:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 589              		.loc 10 46 24 view .LVU143
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 26


 590              	.LBB214:
 591              	.LBI214:
  30:../../libDaisy//src/util/ringbuffer.h ****     {
 592              		.loc 10 30 19 view .LVU144
 593              	.LBB215:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 594              		.loc 10 32 17 is_stmt 0 view .LVU145
 595 019e D4F89830 		ldr	r3, [r4, #152]
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 596              		.loc 10 32 29 view .LVU146
 597 01a2 D4F89C20 		ldr	r2, [r4, #156]
 598              	.LVL43:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 599              		.loc 10 32 40 view .LVU147
 600 01a6 013B     		subs	r3, r3, #1
 601 01a8 9B1A     		subs	r3, r3, r2
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 602              		.loc 10 32 47 view .LVU148
 603 01aa DBB2     		uxtb	r3, r3
 604              	.LBE215:
 605              	.LBE214:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 606              		.loc 10 46 24 view .LVU149
 607 01ac 002B     		cmp	r3, #0
 608 01ae F6D0     		beq	.L31
 609              	.LVL44:
 610              	.L75:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 611              		.loc 10 46 24 view .LVU150
 612 01b0 9022     		movs	r2, #144
 613 01b2 3146     		mov	r1, r6
 614 01b4 0DEB0200 		add	r0, sp, r2
 615 01b8 FFF7FEFF 		bl	memcpy
 616              	.LVL45:
 617              	.LBE213:
 618              	.LBE212:
 619              	.LBB216:
 620              	.LBB217:
 621              	.LBB218:
 622              	.LBI218:
  54:../../libDaisy//src/util/ringbuffer.h ****     {
 623              		.loc 10 54 17 is_stmt 1 view .LVU151
 624              	.LBB219:
  56:../../libDaisy//src/util/ringbuffer.h ****         buffer_[w] = v;
 625              		.loc 10 56 16 is_stmt 0 view .LVU152
 626 01bc D4F89C60 		ldr	r6, [r4, #156]
 627              	.LVL46:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 628              		.loc 10 57 9 view .LVU153
 629 01c0 24A9     		add	r1, sp, #144
 630 01c2 9022     		movs	r2, #144
 631 01c4 06EBC600 		add	r0, r6, r6, lsl #3
 632              		.loc 10 58 25 view .LVU154
 633 01c8 0136     		adds	r6, r6, #1
 634              	.LVL47:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 635              		.loc 10 57 9 view .LVU155
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 27


 636 01ca 05EB0010 		add	r0, r5, r0, lsl #4
 637              		.loc 10 58 30 view .LVU156
 638 01ce F6B2     		uxtb	r6, r6
 639              	.LVL48:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 640              		.loc 10 57 9 view .LVU157
 641 01d0 9830     		adds	r0, r0, #152
 642 01d2 FFF7FEFF 		bl	memcpy
 643              	.LVL49:
 644              		.loc 10 58 20 view .LVU158
 645 01d6 C4F89C60 		str	r6, [r4, #156]
 646              		.loc 10 58 20 view .LVU159
 647              	.LBE219:
 648              	.LBE218:
 649              	.LBE217:
 650              	.LBE216:
 651              		.loc 7 318 5 view .LVU160
 652 01da 48B0     		add	sp, sp, #288
 653              		.cfi_remember_state
 654              		.cfi_def_cfa_offset 24
 655              		@ sp needed
 656 01dc BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 657              	.LVL50:
 658              	.L77:
 659              		.cfi_restore_state
 305:../../libDaisy//src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 660              		.loc 7 305 29 view .LVU161
 661 01e0 0023     		movs	r3, #0
 662 01e2 6E46     		mov	r6, sp
 663 01e4 9022     		movs	r2, #144
 664 01e6 05F10801 		add	r1, r5, #8
 665              	.LVL51:
 305:../../libDaisy//src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 666              		.loc 7 305 29 view .LVU162
 667 01ea 3046     		mov	r0, r6
 668              	.LVL52:
 305:../../libDaisy//src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 669              		.loc 7 305 29 view .LVU163
 670 01ec 2B71     		strb	r3, [r5, #4]
 671              	.LVL53:
 305:../../libDaisy//src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 672              		.loc 7 305 29 view .LVU164
 673 01ee FFF7FEFF 		bl	memcpy
 674              	.LVL54:
 675              	.LBB223:
 676              	.LBI216:
  44:../../libDaisy//src/util/ringbuffer.h ****     {
 677              		.loc 10 44 17 is_stmt 1 view .LVU165
 678              	.L41:
 679              	.LBB222:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 680              		.loc 10 46 24 view .LVU166
 681              	.LBB220:
 682              	.LBI220:
  30:../../libDaisy//src/util/ringbuffer.h ****     {
 683              		.loc 10 30 19 view .LVU167
 684              	.LBB221:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 28


  32:../../libDaisy//src/util/ringbuffer.h ****     }
 685              		.loc 10 32 17 is_stmt 0 view .LVU168
 686 01f2 D4F89830 		ldr	r3, [r4, #152]
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 687              		.loc 10 32 29 view .LVU169
 688 01f6 D4F89C20 		ldr	r2, [r4, #156]
 689              	.LVL55:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 690              		.loc 10 32 40 view .LVU170
 691 01fa 013B     		subs	r3, r3, #1
 692 01fc 9B1A     		subs	r3, r3, r2
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 693              		.loc 10 32 47 view .LVU171
 694 01fe DBB2     		uxtb	r3, r3
 695              	.LBE221:
 696              	.LBE220:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 697              		.loc 10 46 24 view .LVU172
 698 0200 002B     		cmp	r3, #0
 699 0202 F6D0     		beq	.L41
 700 0204 D4E7     		b	.L75
 701              	.LVL56:
 702              	.L30:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 703              		.loc 10 46 24 view .LVU173
 704              	.LBE222:
 705              	.LBE223:
 238:../../libDaisy//src/hid/midi.h ****                     }
 706              		.loc 7 238 29 view .LVU174
 707 0206 0223     		movs	r3, #2
 708 0208 2B71     		strb	r3, [r5, #4]
 709 020a 1AE7     		b	.L18
 710              	.LVL57:
 711              	.L34:
 257:../../libDaisy//src/hid/midi.h ****                     }
 712              		.loc 7 257 33 view .LVU175
 713 020c 0223     		movs	r3, #2
 714 020e 2B71     		strb	r3, [r5, #4]
 715 0210 68E7     		b	.L36
 716              	.LVL58:
 717              	.L76:
 185:../../libDaisy//src/hid/midi.h ****                             {
 718              		.loc 7 185 29 view .LVU176
 719 0212 11F00800 		ands	r0, r1, #8
 183:../../libDaisy//src/hid/midi.h ****                             //system real time = 1111 1xxx
 720              		.loc 7 183 55 view .LVU177
 721 0216 EA60     		str	r2, [r5, #12]
 185:../../libDaisy//src/hid/midi.h ****                             {
 722              		.loc 7 185 29 view .LVU178
 723 0218 36D1     		bne	.L79
 202:../../libDaisy//src/hid/midi.h ****                                 //sysex
 724              		.loc 7 202 69 view .LVU179
 725 021a 01F00703 		and	r3, r1, #7
 201:../../libDaisy//src/hid/midi.h ****                                                                     & 0x07);
 726              		.loc 7 201 37 view .LVU180
 727 021e 85F89330 		strb	r3, [r5, #147]
 204:../../libDaisy//src/hid/midi.h ****                                 {
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 29


 728              		.loc 7 204 33 view .LVU181
 729 0222 3BB9     		cbnz	r3, .L26
 206:../../libDaisy//src/hid/midi.h ****                                     incoming_message_.sysex_message_len = 0;
 730              		.loc 7 206 45 view .LVU182
 731 0224 0322     		movs	r2, #3
 207:../../libDaisy//src/hid/midi.h ****                                 }
 732              		.loc 7 207 73 view .LVU183
 733 0226 85F89230 		strb	r3, [r5, #146]
 206:../../libDaisy//src/hid/midi.h ****                                     incoming_message_.sysex_message_len = 0;
 734              		.loc 7 206 45 view .LVU184
 735 022a 2A71     		strb	r2, [r5, #4]
 736 022c 09E7     		b	.L18
 737              	.LVL59:
 738              	.L78:
 286:../../libDaisy//src/hid/midi.h ****                     }
 739              		.loc 7 286 48 view .LVU185
 740 022e 0023     		movs	r3, #0
 741 0230 2B72     		strb	r3, [r5, #8]
 742 0232 70E7     		b	.L38
 743              	.LVL60:
 744              	.L26:
 210:../../libDaisy//src/hid/midi.h ****                                 {
 745              		.loc 7 210 38 view .LVU186
 746 0234 4B07     		lsls	r3, r1, #29
 747 0236 7FF504AF 		bpl	.L18
 748 023a 6E46     		mov	r6, sp
 212:../../libDaisy//src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 749              		.loc 7 212 45 view .LVU187
 750 023c 2871     		strb	r0, [r5, #4]
 751              	.LVL61:
 212:../../libDaisy//src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 752              		.loc 7 212 45 view .LVU188
 753 023e 9022     		movs	r2, #144
 754 0240 05F10801 		add	r1, r5, #8
 755              	.LVL62:
 212:../../libDaisy//src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 756              		.loc 7 212 45 view .LVU189
 757 0244 3046     		mov	r0, r6
 758 0246 FFF7FEFF 		bl	memcpy
 759              	.LVL63:
 760              	.LBB224:
 761              	.LBI224:
  44:../../libDaisy//src/util/ringbuffer.h ****     {
 762              		.loc 10 44 17 is_stmt 1 view .LVU190
 763              	.L27:
 764              	.LBB225:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 765              		.loc 10 46 24 view .LVU191
 766              	.LBB226:
 767              	.LBI226:
  30:../../libDaisy//src/util/ringbuffer.h ****     {
 768              		.loc 10 30 19 view .LVU192
 769              	.LBB227:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 770              		.loc 10 32 17 is_stmt 0 view .LVU193
 771 024a D4F89830 		ldr	r3, [r4, #152]
  32:../../libDaisy//src/util/ringbuffer.h ****     }
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 30


 772              		.loc 10 32 29 view .LVU194
 773 024e D4F89C20 		ldr	r2, [r4, #156]
 774              	.LVL64:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 775              		.loc 10 32 40 view .LVU195
 776 0252 013B     		subs	r3, r3, #1
 777 0254 9B1A     		subs	r3, r3, r2
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 778              		.loc 10 32 47 view .LVU196
 779 0256 DBB2     		uxtb	r3, r3
 780              	.LBE227:
 781              	.LBE226:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 782              		.loc 10 46 24 view .LVU197
 783 0258 002B     		cmp	r3, #0
 784 025a F6D0     		beq	.L27
 785              	.LVL65:
 786              	.L74:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 787              		.loc 10 46 24 view .LVU198
 788 025c 9022     		movs	r2, #144
 789 025e 3146     		mov	r1, r6
 790 0260 0DEB0200 		add	r0, sp, r2
 791 0264 FFF7FEFF 		bl	memcpy
 792              	.LVL66:
 793              	.LBB228:
 794              	.LBI228:
  54:../../libDaisy//src/util/ringbuffer.h ****     {
 795              		.loc 10 54 17 is_stmt 1 view .LVU199
 796              	.LBB229:
  56:../../libDaisy//src/util/ringbuffer.h ****         buffer_[w] = v;
 797              		.loc 10 56 16 is_stmt 0 view .LVU200
 798 0268 D4F89C60 		ldr	r6, [r4, #156]
 799              	.LVL67:
  57:../../libDaisy//src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 800              		.loc 10 57 9 view .LVU201
 801 026c 24A9     		add	r1, sp, #144
 802 026e 9022     		movs	r2, #144
 803 0270 06EBC600 		add	r0, r6, r6, lsl #3
 804 0274 05EB0010 		add	r0, r5, r0, lsl #4
 805 0278 9830     		adds	r0, r0, #152
 806 027a FFF7FEFF 		bl	memcpy
 807              	.LVL68:
 808              		.loc 10 58 25 view .LVU202
 809 027e 731C     		adds	r3, r6, #1
 810              		.loc 10 58 30 view .LVU203
 811 0280 DBB2     		uxtb	r3, r3
 812              		.loc 10 58 20 view .LVU204
 813 0282 C4F89C30 		str	r3, [r4, #156]
 814              	.LVL69:
 815              		.loc 10 58 20 view .LVU205
 816              	.LBE229:
 817              	.LBE228:
 818              	.LBE225:
 819              	.LBE224:
 820 0286 DCE6     		b	.L18
 821              	.LVL70:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 31


 822              	.L79:
 187:../../libDaisy//src/hid/midi.h ****                                 running_status_        = SystemRealTime;
 823              		.loc 7 187 56 view .LVU206
 824 0288 0823     		movs	r3, #8
 825 028a 6E46     		mov	r6, sp
 826 028c 2B72     		strb	r3, [r5, #8]
 827 028e 3046     		mov	r0, r6
 188:../../libDaisy//src/hid/midi.h ****                                 incoming_message_.srt_type
 828              		.loc 7 188 56 view .LVU207
 829 0290 84F8A430 		strb	r3, [r4, #164]
 191:../../libDaisy//src/hid/midi.h **** 
 830              		.loc 7 191 46 view .LVU208
 831 0294 94F8B230 		ldrb	r3, [r4, #178]	@ zero_extendqisi2
 194:../../libDaisy//src/hid/midi.h ****                                 event_q_.Write(incoming_message_);
 832              		.loc 7 194 41 view .LVU209
 833 0298 2A71     		strb	r2, [r5, #4]
 834              	.LVL71:
 194:../../libDaisy//src/hid/midi.h ****                                 event_q_.Write(incoming_message_);
 835              		.loc 7 194 41 view .LVU210
 836 029a 9022     		movs	r2, #144
 191:../../libDaisy//src/hid/midi.h **** 
 837              		.loc 7 191 46 view .LVU211
 838 029c 1940     		ands	r1, r1, r3
 839              	.LVL72:
 190:../../libDaisy//src/hid/midi.h ****                                         byte & kSystemRealTimeMask);
 840              		.loc 7 190 37 view .LVU212
 841 029e 85F89410 		strb	r1, [r5, #148]
 842 02a2 05F10801 		add	r1, r5, #8
 843 02a6 FFF7FEFF 		bl	memcpy
 844              	.LVL73:
 845              	.LBB230:
 846              	.LBI230:
  44:../../libDaisy//src/util/ringbuffer.h ****     {
 847              		.loc 10 44 17 is_stmt 1 view .LVU213
 848              	.L25:
 849              	.LBB231:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 850              		.loc 10 46 24 view .LVU214
 851              	.LBB232:
 852              	.LBI232:
  30:../../libDaisy//src/util/ringbuffer.h ****     {
 853              		.loc 10 30 19 view .LVU215
 854              	.LBB233:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 855              		.loc 10 32 17 is_stmt 0 view .LVU216
 856 02aa D4F89830 		ldr	r3, [r4, #152]
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 857              		.loc 10 32 29 view .LVU217
 858 02ae D4F89C20 		ldr	r2, [r4, #156]
 859              	.LVL74:
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 860              		.loc 10 32 40 view .LVU218
 861 02b2 013B     		subs	r3, r3, #1
 862 02b4 9B1A     		subs	r3, r3, r2
  32:../../libDaisy//src/util/ringbuffer.h ****     }
 863              		.loc 10 32 47 view .LVU219
 864 02b6 DBB2     		uxtb	r3, r3
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 32


 865              	.LBE233:
 866              	.LBE232:
  46:../../libDaisy//src/util/ringbuffer.h ****             ;
 867              		.loc 10 46 24 view .LVU220
 868 02b8 002B     		cmp	r3, #0
 869 02ba F6D0     		beq	.L25
 870 02bc CEE7     		b	.L74
 871              	.LBE231:
 872              	.LBE230:
 873              		.cfi_endproc
 874              	.LFE5223:
 876 02be 00BF     		.section	.text.startup.main,"ax",%progbits
 877              		.align	1
 878              		.p2align 2,,3
 879              		.global	main
 880              		.syntax unified
 881              		.thumb
 882              		.thumb_func
 883              		.fpu fpv5-d16
 885              	main:
 886              	.LFB4790:
  26:USB_MIDI.cpp  **** 
  27:USB_MIDI.cpp  **** int main(void)
  28:USB_MIDI.cpp  **** {
 887              		.loc 9 28 1 is_stmt 1 view -0
 888              		.cfi_startproc
 889              		@ args = 0, pretend = 0, frame = 24
 890              		@ frame_needed = 0, uses_anonymous_args = 0
  29:USB_MIDI.cpp  ****     /** Basic initialization of Daisy hardware */
  30:USB_MIDI.cpp  ****     hw.Configure();
 891              		.loc 9 30 5 view .LVU222
  28:USB_MIDI.cpp  ****     /** Basic initialization of Daisy hardware */
 892              		.loc 9 28 1 is_stmt 0 view .LVU223
 893 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 894              		.cfi_def_cfa_offset 36
 895              		.cfi_offset 4, -36
 896              		.cfi_offset 5, -32
 897              		.cfi_offset 6, -28
 898              		.cfi_offset 7, -24
 899              		.cfi_offset 8, -20
 900              		.cfi_offset 9, -16
 901              		.cfi_offset 10, -12
 902              		.cfi_offset 11, -8
 903              		.cfi_offset 14, -4
 904              	.LBB274:
 905              	.LBB275:
 906              	.LBB276:
 907              	.LBB277:
 908              	.LBB278:
 909              		.file 11 "../../libDaisy//src/per/gpio.h"
   1:../../libDaisy//src/per/gpio.h **** #pragma once
   2:../../libDaisy//src/per/gpio.h **** #ifndef DSY_GPIO_H
   3:../../libDaisy//src/per/gpio.h **** #define DSY_GPIO_H
   4:../../libDaisy//src/per/gpio.h **** #include "daisy_core.h"
   5:../../libDaisy//src/per/gpio.h **** 
   6:../../libDaisy//src/per/gpio.h **** #ifdef __cplusplus
   7:../../libDaisy//src/per/gpio.h **** 
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 33


   8:../../libDaisy//src/per/gpio.h **** namespace daisy
   9:../../libDaisy//src/per/gpio.h **** {
  10:../../libDaisy//src/per/gpio.h **** /** @brief General Purpose I/O control 
  11:../../libDaisy//src/per/gpio.h ****  *  @details peripheral control over a single GPIO
  12:../../libDaisy//src/per/gpio.h ****  *  @ingroup peripheral
  13:../../libDaisy//src/per/gpio.h ****  *   
  14:../../libDaisy//src/per/gpio.h ****  *  Button Input (with internal Pullup resistor)
  15:../../libDaisy//src/per/gpio.h ****  *  @include GPIO_Input.cpp 
  16:../../libDaisy//src/per/gpio.h ****  * 
  17:../../libDaisy//src/per/gpio.h ****  *  Output Example (perfect for blinking an LED)
  18:../../libDaisy//src/per/gpio.h ****  *  @include GPIO_Output.cpp
  19:../../libDaisy//src/per/gpio.h ****  * 
  20:../../libDaisy//src/per/gpio.h **** */
  21:../../libDaisy//src/per/gpio.h **** class GPIO
  22:../../libDaisy//src/per/gpio.h **** {
  23:../../libDaisy//src/per/gpio.h ****   public:
  24:../../libDaisy//src/per/gpio.h ****     /** @brief Mode of operation for the specified GPIO */
  25:../../libDaisy//src/per/gpio.h ****     enum class Mode
  26:../../libDaisy//src/per/gpio.h ****     {
  27:../../libDaisy//src/per/gpio.h ****         INPUT,     /**< Input for reading state of pin */
  28:../../libDaisy//src/per/gpio.h ****         OUTPUT,    /**< Output w/ push-pull configuration */
  29:../../libDaisy//src/per/gpio.h ****         OUTPUT_OD, /**< Output w/ open-drain configuration */
  30:../../libDaisy//src/per/gpio.h ****         ANALOG,    /**< Analog for connection to ADC or DAC peripheral */
  31:../../libDaisy//src/per/gpio.h ****     };
  32:../../libDaisy//src/per/gpio.h **** 
  33:../../libDaisy//src/per/gpio.h ****     /** @brief Configures whether an internal Pull up or Pull down resistor is used. 
  34:../../libDaisy//src/per/gpio.h ****      *  
  35:../../libDaisy//src/per/gpio.h ****      * Internal Pull up/down resistors are typically 40k ohms, and will be between
  36:../../libDaisy//src/per/gpio.h ****      * 30k and 50k
  37:../../libDaisy//src/per/gpio.h ****      * 
  38:../../libDaisy//src/per/gpio.h ****      * When the Pin is configured in Analog mode, the pull up/down resistors are
  39:../../libDaisy//src/per/gpio.h ****      * disabled by hardware. 
  40:../../libDaisy//src/per/gpio.h ****      */
  41:../../libDaisy//src/per/gpio.h ****     enum class Pull
  42:../../libDaisy//src/per/gpio.h ****     {
  43:../../libDaisy//src/per/gpio.h ****         NOPULL,   /**< No pull up resistor */
  44:../../libDaisy//src/per/gpio.h ****         PULLUP,   /**< Internal pull up enabled */
  45:../../libDaisy//src/per/gpio.h ****         PULLDOWN, /**< Internal pull down enabled*/
  46:../../libDaisy//src/per/gpio.h ****     };
  47:../../libDaisy//src/per/gpio.h **** 
  48:../../libDaisy//src/per/gpio.h ****     /** @brief Output speed controls the drive strength, and slew rate of the pin */
  49:../../libDaisy//src/per/gpio.h ****     enum class Speed
  50:../../libDaisy//src/per/gpio.h ****     {
  51:../../libDaisy//src/per/gpio.h ****         LOW,
  52:../../libDaisy//src/per/gpio.h ****         MEDIUM,
  53:../../libDaisy//src/per/gpio.h ****         HIGH,
  54:../../libDaisy//src/per/gpio.h ****         VERY_HIGH,
  55:../../libDaisy//src/per/gpio.h ****     };
  56:../../libDaisy//src/per/gpio.h **** 
  57:../../libDaisy//src/per/gpio.h ****     /** @brief Configuration for a given GPIO */
  58:../../libDaisy//src/per/gpio.h ****     struct Config
  59:../../libDaisy//src/per/gpio.h ****     {
  60:../../libDaisy//src/per/gpio.h ****         Pin   pin;
  61:../../libDaisy//src/per/gpio.h ****         Mode  mode;
  62:../../libDaisy//src/per/gpio.h ****         Pull  pull;
  63:../../libDaisy//src/per/gpio.h ****         Speed speed;
  64:../../libDaisy//src/per/gpio.h **** 
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 34


  65:../../libDaisy//src/per/gpio.h ****         /** Constructor with no arguments will prepare an invalid GPIO set as
  66:../../libDaisy//src/per/gpio.h ****          *  an input, with no pullup. 
  67:../../libDaisy//src/per/gpio.h ****          */
  68:../../libDaisy//src/per/gpio.h ****         Config()
  69:../../libDaisy//src/per/gpio.h ****         : pin(), mode(Mode::INPUT), pull(Pull::NOPULL), speed(Speed::LOW)
 910              		.loc 11 69 73 view .LVU224
 911 0004 0026     		movs	r6, #0
 912              	.LBE278:
 913              	.LBE277:
 914              	.LBE276:
 915              	.LBE275:
 916              	.LBE274:
  28:USB_MIDI.cpp  ****     /** Basic initialization of Daisy hardware */
 917              		.loc 9 28 1 view .LVU225
 918 0006 89B0     		sub	sp, sp, #36
 919              		.cfi_def_cfa_offset 72
 920              		.loc 9 30 17 view .LVU226
 921 0008 6648     		ldr	r0, .L99
  31:USB_MIDI.cpp  ****     hw.Init();
  32:USB_MIDI.cpp  ****     GPIO my_led;
  33:USB_MIDI.cpp  ****     my_led.Init(D1, GPIO::Mode::OUTPUT);
  34:USB_MIDI.cpp  ****     bool led_state;
  35:USB_MIDI.cpp  ****     led_state = true;
 922              		.loc 9 35 15 view .LVU227
 923 000a 0127     		movs	r7, #1
  30:USB_MIDI.cpp  ****     hw.Init();
 924              		.loc 9 30 17 view .LVU228
 925 000c FFF7FEFF 		bl	_ZN5daisy9DaisySeed9ConfigureEv
 926              	.LVL75:
  31:USB_MIDI.cpp  ****     hw.Init();
 927              		.loc 9 31 5 is_stmt 1 view .LVU229
 928              	.LBB292:
 929              	.LBB293:
  97:../../libDaisy//src/hid/midi.h **** 
 930              		.loc 7 97 9 is_stmt 0 view .LVU230
 931 0010 654D     		ldr	r5, .L99+4
 932              	.LBE293:
 933              	.LBE292:
  31:USB_MIDI.cpp  ****     hw.Init();
 934              		.loc 9 31 12 view .LVU231
 935 0012 3146     		mov	r1, r6
 936 0014 6348     		ldr	r0, .L99
 937 0016 FFF7FEFF 		bl	_ZN5daisy9DaisySeed4InitEb
 938              	.LVL76:
  32:USB_MIDI.cpp  ****     my_led.Init(D1, GPIO::Mode::OUTPUT);
 939              		.loc 9 32 5 is_stmt 1 view .LVU232
 940              	.LBB303:
 941              	.LBI274:
  70:../../libDaisy//src/per/gpio.h ****         {
  71:../../libDaisy//src/per/gpio.h ****         }
  72:../../libDaisy//src/per/gpio.h ****     };
  73:../../libDaisy//src/per/gpio.h **** 
  74:../../libDaisy//src/per/gpio.h ****     GPIO() {}
 942              		.loc 11 74 5 view .LVU233
 943              	.LBB289:
 944              	.LBB286:
 945              	.LBI276:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 35


  68:../../libDaisy//src/per/gpio.h ****         : pin(), mode(Mode::INPUT), pull(Pull::NOPULL), speed(Speed::LOW)
 946              		.loc 11 68 9 view .LVU234
 947              	.LBB283:
 948              	.LBB280:
 949              	.LBB279:
 950              	.LBI279:
 951              		.file 12 "../../libDaisy//src/daisy_core.h"
   1:../../libDaisy//src/daisy_core.h **** #pragma once
   2:../../libDaisy//src/daisy_core.h **** #ifndef DSY_CORE_HW_H
   3:../../libDaisy//src/daisy_core.h **** #define DSY_CORE_HW_H /**< & */
   4:../../libDaisy//src/daisy_core.h **** #include <stdint.h>
   5:../../libDaisy//src/daisy_core.h **** #include <stdlib.h>
   6:../../libDaisy//src/daisy_core.h **** 
   7:../../libDaisy//src/daisy_core.h **** #if defined(_MSC_VER)
   8:../../libDaisy//src/daisy_core.h **** #define FORCE_INLINE __forceinline /**< & */
   9:../../libDaisy//src/daisy_core.h **** #elif defined(__clang__)
  10:../../libDaisy//src/daisy_core.h **** #define FORCE_INLINE inline __attribute__((always_inline)) /**< & */
  11:../../libDaisy//src/daisy_core.h **** #pragma clang diagnostic ignored "-Wduplicate-decl-specifier"
  12:../../libDaisy//src/daisy_core.h **** #elif defined(__GNUC__)
  13:../../libDaisy//src/daisy_core.h **** #define FORCE_INLINE inline __attribute__((always_inline)) /**< & */
  14:../../libDaisy//src/daisy_core.h **** #else
  15:../../libDaisy//src/daisy_core.h **** #error unknown compiler
  16:../../libDaisy//src/daisy_core.h **** #endif
  17:../../libDaisy//src/daisy_core.h **** 
  18:../../libDaisy//src/daisy_core.h **** /** @addtogroup utility
  19:../../libDaisy//src/daisy_core.h ****     @{
  20:../../libDaisy//src/daisy_core.h **** */
  21:../../libDaisy//src/daisy_core.h **** 
  22:../../libDaisy//src/daisy_core.h **** /** Macro for area of memory that is configured as cacheless
  23:../../libDaisy//src/daisy_core.h **** This should be used primarily for DMA buffers, and the like.
  24:../../libDaisy//src/daisy_core.h **** */
  25:../../libDaisy//src/daisy_core.h **** #define DMA_BUFFER_MEM_SECTION __attribute__((section(".sram1_bss")))
  26:../../libDaisy//src/daisy_core.h **** /** 
  27:../../libDaisy//src/daisy_core.h **** THE DTCM RAM section is also non-cached. However, is not suitable 
  28:../../libDaisy//src/daisy_core.h **** for DMA transfers. Performance is on par with internal SRAM w/ 
  29:../../libDaisy//src/daisy_core.h **** cache enabled.
  30:../../libDaisy//src/daisy_core.h **** */
  31:../../libDaisy//src/daisy_core.h **** #define DTCM_MEM_SECTION __attribute__((section(".dtcmram_bss")))
  32:../../libDaisy//src/daisy_core.h **** 
  33:../../libDaisy//src/daisy_core.h **** #define FBIPMAX 0.999985f             /**< close to 1.0f-LSB at 16 bit */
  34:../../libDaisy//src/daisy_core.h **** #define FBIPMIN (-FBIPMAX)            /**< - (1 - LSB) */
  35:../../libDaisy//src/daisy_core.h **** #define U82F_SCALE 0.0078740f         /**< 1 / 127 */
  36:../../libDaisy//src/daisy_core.h **** #define F2U8_SCALE 127.0f             /**< 128 - 1 */
  37:../../libDaisy//src/daisy_core.h **** #define S82F_SCALE 0.0078125f         /**< 1 / (2**7) */
  38:../../libDaisy//src/daisy_core.h **** #define F2S8_SCALE 127.0f             /**< (2 ** 7) - 1 */
  39:../../libDaisy//src/daisy_core.h **** #define S162F_SCALE 3.0517578125e-05f /**< 1 / (2** 15) */
  40:../../libDaisy//src/daisy_core.h **** #define F2S16_SCALE 32767.0f          /**< (2 ** 15) - 1 */
  41:../../libDaisy//src/daisy_core.h **** #define F2S24_SCALE 8388608.0f        /**< 2 ** 23 */
  42:../../libDaisy//src/daisy_core.h **** #define S242F_SCALE 1.192092896e-07f  /**< 1 / (2 ** 23) */
  43:../../libDaisy//src/daisy_core.h **** #define S24SIGN 0x800000              /**< 2 ** 23 */
  44:../../libDaisy//src/daisy_core.h **** #define S322F_SCALE 4.6566129e-10f    /**< 1 / (2** 31) */
  45:../../libDaisy//src/daisy_core.h **** #define F2S32_SCALE 2147483647.f      /**< (2 ** 31) - 1 */
  46:../../libDaisy//src/daisy_core.h **** 
  47:../../libDaisy//src/daisy_core.h **** 
  48:../../libDaisy//src/daisy_core.h **** /** shorthand macro for simplifying the reading of the left 
  49:../../libDaisy//src/daisy_core.h ****  *  channel of a non-interleaved output buffer named out */
  50:../../libDaisy//src/daisy_core.h **** #define OUT_L out[0]
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 36


  51:../../libDaisy//src/daisy_core.h **** 
  52:../../libDaisy//src/daisy_core.h **** /** shorthand macro for simplifying the reading of the right 
  53:../../libDaisy//src/daisy_core.h ****  *  channel of a non-interleaved output buffer named out */
  54:../../libDaisy//src/daisy_core.h **** #define OUT_R out[1]
  55:../../libDaisy//src/daisy_core.h **** 
  56:../../libDaisy//src/daisy_core.h **** /** shorthand macro for simplifying the reading of the left 
  57:../../libDaisy//src/daisy_core.h ****  *  channel of a non-interleaved input buffer named in */
  58:../../libDaisy//src/daisy_core.h **** #define IN_L in[0]
  59:../../libDaisy//src/daisy_core.h **** 
  60:../../libDaisy//src/daisy_core.h **** /** shorthand macro for simplifying the reading of the right 
  61:../../libDaisy//src/daisy_core.h ****  *  channel of a non-interleaved input buffer named in */
  62:../../libDaisy//src/daisy_core.h **** #define IN_R in[1]
  63:../../libDaisy//src/daisy_core.h **** 
  64:../../libDaisy//src/daisy_core.h **** /** 
  65:../../libDaisy//src/daisy_core.h ****     Computes cube.
  66:../../libDaisy//src/daisy_core.h ****     \param x Number to be cubed
  67:../../libDaisy//src/daisy_core.h ****     \return x ^ 3
  68:../../libDaisy//src/daisy_core.h **** */
  69:../../libDaisy//src/daisy_core.h **** FORCE_INLINE float cube(float x)
  70:../../libDaisy//src/daisy_core.h **** {
  71:../../libDaisy//src/daisy_core.h ****     return (x * x) * x;
  72:../../libDaisy//src/daisy_core.h **** }
  73:../../libDaisy//src/daisy_core.h **** 
  74:../../libDaisy//src/daisy_core.h **** /** 
  75:../../libDaisy//src/daisy_core.h ****     Converts unsigned 8-bit to float
  76:../../libDaisy//src/daisy_core.h ****     \param x Number to be scaled.
  77:../../libDaisy//src/daisy_core.h ****     \return Scaled number.
  78:../../libDaisy//src/daisy_core.h **** */
  79:../../libDaisy//src/daisy_core.h **** FORCE_INLINE float u82f(uint8_t x)
  80:../../libDaisy//src/daisy_core.h **** {
  81:../../libDaisy//src/daisy_core.h ****     return ((float)x - 127.f) * U82F_SCALE;
  82:../../libDaisy//src/daisy_core.h **** }
  83:../../libDaisy//src/daisy_core.h **** 
  84:../../libDaisy//src/daisy_core.h **** /**
  85:../../libDaisy//src/daisy_core.h ****     Converts float to unsigned 8-bit
  86:../../libDaisy//src/daisy_core.h **** */
  87:../../libDaisy//src/daisy_core.h **** FORCE_INLINE uint8_t f2u8(float x)
  88:../../libDaisy//src/daisy_core.h **** {
  89:../../libDaisy//src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
  90:../../libDaisy//src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
  91:../../libDaisy//src/daisy_core.h ****     return (uint8_t)((x * F2U8_SCALE) + F2U8_SCALE);
  92:../../libDaisy//src/daisy_core.h **** }
  93:../../libDaisy//src/daisy_core.h **** 
  94:../../libDaisy//src/daisy_core.h **** 
  95:../../libDaisy//src/daisy_core.h **** /** 
  96:../../libDaisy//src/daisy_core.h ****     Converts Signed 8-bit to float
  97:../../libDaisy//src/daisy_core.h ****     \param x Number to be scaled.
  98:../../libDaisy//src/daisy_core.h ****     \return Scaled number.
  99:../../libDaisy//src/daisy_core.h **** */
 100:../../libDaisy//src/daisy_core.h **** FORCE_INLINE float s82f(int8_t x)
 101:../../libDaisy//src/daisy_core.h **** {
 102:../../libDaisy//src/daisy_core.h ****     return (float)x * S82F_SCALE;
 103:../../libDaisy//src/daisy_core.h **** }
 104:../../libDaisy//src/daisy_core.h **** 
 105:../../libDaisy//src/daisy_core.h **** /**
 106:../../libDaisy//src/daisy_core.h ****     Converts float to Signed 8-bit
 107:../../libDaisy//src/daisy_core.h **** */
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 37


 108:../../libDaisy//src/daisy_core.h **** FORCE_INLINE int8_t f2s8(float x)
 109:../../libDaisy//src/daisy_core.h **** {
 110:../../libDaisy//src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
 111:../../libDaisy//src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
 112:../../libDaisy//src/daisy_core.h ****     return (int32_t)(x * F2S8_SCALE);
 113:../../libDaisy//src/daisy_core.h **** }
 114:../../libDaisy//src/daisy_core.h **** 
 115:../../libDaisy//src/daisy_core.h **** /** 
 116:../../libDaisy//src/daisy_core.h ****     Converts Signed 16-bit to float
 117:../../libDaisy//src/daisy_core.h ****     \param x Number to be scaled.
 118:../../libDaisy//src/daisy_core.h ****     \return Scaled number.
 119:../../libDaisy//src/daisy_core.h **** */
 120:../../libDaisy//src/daisy_core.h **** FORCE_INLINE float s162f(int16_t x)
 121:../../libDaisy//src/daisy_core.h **** {
 122:../../libDaisy//src/daisy_core.h ****     return (float)x * S162F_SCALE;
 123:../../libDaisy//src/daisy_core.h **** }
 124:../../libDaisy//src/daisy_core.h **** 
 125:../../libDaisy//src/daisy_core.h **** /**
 126:../../libDaisy//src/daisy_core.h ****     Converts float to Signed 16-bit
 127:../../libDaisy//src/daisy_core.h **** */
 128:../../libDaisy//src/daisy_core.h **** FORCE_INLINE int16_t f2s16(float x)
 129:../../libDaisy//src/daisy_core.h **** {
 130:../../libDaisy//src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
 131:../../libDaisy//src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
 132:../../libDaisy//src/daisy_core.h ****     return (int32_t)(x * F2S16_SCALE);
 133:../../libDaisy//src/daisy_core.h **** }
 134:../../libDaisy//src/daisy_core.h **** 
 135:../../libDaisy//src/daisy_core.h **** /**
 136:../../libDaisy//src/daisy_core.h ****     Converts Signed 24-bit to float
 137:../../libDaisy//src/daisy_core.h ****  */
 138:../../libDaisy//src/daisy_core.h **** FORCE_INLINE float s242f(int32_t x)
 139:../../libDaisy//src/daisy_core.h **** {
 140:../../libDaisy//src/daisy_core.h ****     x = (x ^ S24SIGN) - S24SIGN; //sign extend aka ((x<<8)>>8)
 141:../../libDaisy//src/daisy_core.h ****     return (float)x * S242F_SCALE;
 142:../../libDaisy//src/daisy_core.h **** }
 143:../../libDaisy//src/daisy_core.h **** /**
 144:../../libDaisy//src/daisy_core.h ****     Converts float to Signed 24-bit
 145:../../libDaisy//src/daisy_core.h ****  */
 146:../../libDaisy//src/daisy_core.h **** FORCE_INLINE int32_t f2s24(float x)
 147:../../libDaisy//src/daisy_core.h **** {
 148:../../libDaisy//src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
 149:../../libDaisy//src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
 150:../../libDaisy//src/daisy_core.h ****     return (int32_t)(x * F2S24_SCALE);
 151:../../libDaisy//src/daisy_core.h **** }
 152:../../libDaisy//src/daisy_core.h **** 
 153:../../libDaisy//src/daisy_core.h **** /**
 154:../../libDaisy//src/daisy_core.h ****     Converts Signed 32-bit to float
 155:../../libDaisy//src/daisy_core.h ****  */
 156:../../libDaisy//src/daisy_core.h **** FORCE_INLINE float s322f(int32_t x)
 157:../../libDaisy//src/daisy_core.h **** {
 158:../../libDaisy//src/daisy_core.h ****     return (float)x * S322F_SCALE;
 159:../../libDaisy//src/daisy_core.h **** }
 160:../../libDaisy//src/daisy_core.h **** /**
 161:../../libDaisy//src/daisy_core.h ****     Converts float to Signed 24-bit
 162:../../libDaisy//src/daisy_core.h ****  */
 163:../../libDaisy//src/daisy_core.h **** FORCE_INLINE int32_t f2s32(float x)
 164:../../libDaisy//src/daisy_core.h **** {
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 38


 165:../../libDaisy//src/daisy_core.h ****     x = x <= FBIPMIN ? FBIPMIN : x;
 166:../../libDaisy//src/daisy_core.h ****     x = x >= FBIPMAX ? FBIPMAX : x;
 167:../../libDaisy//src/daisy_core.h ****     return (int32_t)(x * F2S32_SCALE);
 168:../../libDaisy//src/daisy_core.h **** }
 169:../../libDaisy//src/daisy_core.h **** 
 170:../../libDaisy//src/daisy_core.h **** 
 171:../../libDaisy//src/daisy_core.h **** /** Enums and a simple struct for defining a hardware pin on the MCU
 172:../../libDaisy//src/daisy_core.h ****  *  These correlate with the stm32 datasheet, and are used to configure
 173:../../libDaisy//src/daisy_core.h ****  *  the hardware.
 174:../../libDaisy//src/daisy_core.h ****  * 
 175:../../libDaisy//src/daisy_core.h ****  *  This along with the dsy_gpio_pin class should no longer be used.
 176:../../libDaisy//src/daisy_core.h ****  *  They are available for backwards compatability. 
 177:../../libDaisy//src/daisy_core.h ****  * 
 178:../../libDaisy//src/daisy_core.h ****  *  Please use GPIOPort enum and the Pin struct instead.
 179:../../libDaisy//src/daisy_core.h ****  */
 180:../../libDaisy//src/daisy_core.h **** typedef enum
 181:../../libDaisy//src/daisy_core.h **** {
 182:../../libDaisy//src/daisy_core.h ****     DSY_GPIOA, /**< & */
 183:../../libDaisy//src/daisy_core.h ****     DSY_GPIOB, /**< & */
 184:../../libDaisy//src/daisy_core.h ****     DSY_GPIOC, /**< & */
 185:../../libDaisy//src/daisy_core.h ****     DSY_GPIOD, /**< & */
 186:../../libDaisy//src/daisy_core.h ****     DSY_GPIOE, /**< & */
 187:../../libDaisy//src/daisy_core.h ****     DSY_GPIOF, /**< & */
 188:../../libDaisy//src/daisy_core.h ****     DSY_GPIOG, /**< & */
 189:../../libDaisy//src/daisy_core.h ****     DSY_GPIOH, /**< & */
 190:../../libDaisy//src/daisy_core.h ****     DSY_GPIOI, /**< & */
 191:../../libDaisy//src/daisy_core.h ****     DSY_GPIOJ, /**< & */
 192:../../libDaisy//src/daisy_core.h ****     DSY_GPIOK, /**< & */
 193:../../libDaisy//src/daisy_core.h ****     DSY_GPIOX, /** This is a non-existant port for unsupported bits of hardware. */
 194:../../libDaisy//src/daisy_core.h ****     DSY_GPIO_LAST, /** Final enum member */
 195:../../libDaisy//src/daisy_core.h **** } dsy_gpio_port;
 196:../../libDaisy//src/daisy_core.h **** 
 197:../../libDaisy//src/daisy_core.h **** /** Hardware define pins 
 198:../../libDaisy//src/daisy_core.h ****  *  
 199:../../libDaisy//src/daisy_core.h ****  *  The dsy_gpio_pin struct should no longer be used, and is only available for
 200:../../libDaisy//src/daisy_core.h ****  *  backwards compatability.
 201:../../libDaisy//src/daisy_core.h ****  * 
 202:../../libDaisy//src/daisy_core.h ****  *  Please use Pin struct instead.
 203:../../libDaisy//src/daisy_core.h ****  */
 204:../../libDaisy//src/daisy_core.h **** typedef struct
 205:../../libDaisy//src/daisy_core.h **** {
 206:../../libDaisy//src/daisy_core.h ****     dsy_gpio_port port; /**< & */
 207:../../libDaisy//src/daisy_core.h ****     uint8_t       pin;  /**< number 0-15 */
 208:../../libDaisy//src/daisy_core.h **** } dsy_gpio_pin;
 209:../../libDaisy//src/daisy_core.h **** 
 210:../../libDaisy//src/daisy_core.h **** /** Helper for creating pins from port/pin combos easily
 211:../../libDaisy//src/daisy_core.h ****  * 
 212:../../libDaisy//src/daisy_core.h ****  *  The dsy_gpio_pin struct should no longer be used, and is only available for
 213:../../libDaisy//src/daisy_core.h ****  *  backwards compatability.
 214:../../libDaisy//src/daisy_core.h ****  * 
 215:../../libDaisy//src/daisy_core.h ****  *  Please use Pin struct instead.
 216:../../libDaisy//src/daisy_core.h **** */
 217:../../libDaisy//src/daisy_core.h **** FORCE_INLINE dsy_gpio_pin dsy_pin(dsy_gpio_port port, uint8_t pin)
 218:../../libDaisy//src/daisy_core.h **** {
 219:../../libDaisy//src/daisy_core.h ****     dsy_gpio_pin p;
 220:../../libDaisy//src/daisy_core.h ****     p.port = port;
 221:../../libDaisy//src/daisy_core.h ****     p.pin  = pin;
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 39


 222:../../libDaisy//src/daisy_core.h ****     return p;
 223:../../libDaisy//src/daisy_core.h **** }
 224:../../libDaisy//src/daisy_core.h **** 
 225:../../libDaisy//src/daisy_core.h **** /** Helper for testing sameness of two dsy_gpio_pins
 226:../../libDaisy//src/daisy_core.h ****  *  \return    1 if same, 0 if different
 227:../../libDaisy//src/daisy_core.h ****  * 
 228:../../libDaisy//src/daisy_core.h ****  *  The dsy_gpio_pin struct should no longer be used, and is only available for
 229:../../libDaisy//src/daisy_core.h ****  *  backwards compatability.
 230:../../libDaisy//src/daisy_core.h ****  * 
 231:../../libDaisy//src/daisy_core.h ****  *  Please use Pin struct instead.
 232:../../libDaisy//src/daisy_core.h ****  */
 233:../../libDaisy//src/daisy_core.h **** FORCE_INLINE uint8_t dsy_pin_cmp(dsy_gpio_pin *a, dsy_gpio_pin *b)
 234:../../libDaisy//src/daisy_core.h **** {
 235:../../libDaisy//src/daisy_core.h ****     return ((a->port == b->port) && (a->pin == b->pin));
 236:../../libDaisy//src/daisy_core.h **** }
 237:../../libDaisy//src/daisy_core.h **** 
 238:../../libDaisy//src/daisy_core.h **** #ifdef __cplusplus
 239:../../libDaisy//src/daisy_core.h **** 
 240:../../libDaisy//src/daisy_core.h **** namespace daisy
 241:../../libDaisy//src/daisy_core.h **** {
 242:../../libDaisy//src/daisy_core.h **** /** @brief GPIO Port names */
 243:../../libDaisy//src/daisy_core.h **** enum GPIOPort
 244:../../libDaisy//src/daisy_core.h **** {
 245:../../libDaisy//src/daisy_core.h ****     PORTA, /**< Port A */
 246:../../libDaisy//src/daisy_core.h ****     PORTB, /**< Port B */
 247:../../libDaisy//src/daisy_core.h ****     PORTC, /**< Port C */
 248:../../libDaisy//src/daisy_core.h ****     PORTD, /**< Port D */
 249:../../libDaisy//src/daisy_core.h ****     PORTE, /**< Port E */
 250:../../libDaisy//src/daisy_core.h ****     PORTF, /**< Port F */
 251:../../libDaisy//src/daisy_core.h ****     PORTG, /**< Port G */
 252:../../libDaisy//src/daisy_core.h ****     PORTH, /**< Port H */
 253:../../libDaisy//src/daisy_core.h ****     PORTI, /**< Port I */
 254:../../libDaisy//src/daisy_core.h ****     PORTJ, /**< Port J */
 255:../../libDaisy//src/daisy_core.h ****     PORTK, /**< Port K */
 256:../../libDaisy//src/daisy_core.h ****     PORTX, /**< Used as a dummy port to signal an invalid pin. */
 257:../../libDaisy//src/daisy_core.h **** };
 258:../../libDaisy//src/daisy_core.h **** 
 259:../../libDaisy//src/daisy_core.h **** /** @brief representation of hardware port/pin combination */
 260:../../libDaisy//src/daisy_core.h **** struct Pin
 261:../../libDaisy//src/daisy_core.h **** {
 262:../../libDaisy//src/daisy_core.h ****     GPIOPort port;
 263:../../libDaisy//src/daisy_core.h ****     uint8_t  pin;
 264:../../libDaisy//src/daisy_core.h **** 
 265:../../libDaisy//src/daisy_core.h ****     /** @brief Constructor creates a valid pin. 
 266:../../libDaisy//src/daisy_core.h ****      *  @param pt GPIOPort between PA, and PK corresponding to STM32 Port.
 267:../../libDaisy//src/daisy_core.h ****      *  @param pn pin number in range of 0-15
 268:../../libDaisy//src/daisy_core.h ****     */
 269:../../libDaisy//src/daisy_core.h ****     constexpr Pin(const GPIOPort pt, const uint8_t pn) : port(pt), pin(pn) {}
 270:../../libDaisy//src/daisy_core.h **** 
 271:../../libDaisy//src/daisy_core.h ****     /** @brief Basic Constructor creates an invalid Pin object */
 272:../../libDaisy//src/daisy_core.h ****     constexpr Pin() : port(PORTX), pin(255) {}
 952              		.loc 12 272 15 view .LVU235
 953              		.loc 12 272 15 is_stmt 0 view .LVU236
 954              	.LBE279:
 955              	.LBE280:
 956              	.LBE283:
 957              	.LBE286:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 40


 958              		.loc 11 74 12 view .LVU237
 959 001a 4FF60B72 		movw	r2, #65291
 960              	.LBE289:
 961              	.LBE303:
  33:USB_MIDI.cpp  ****     bool led_state;
 962              		.loc 9 33 16 view .LVU238
 963 001e 6349     		ldr	r1, .L99+8
 964              	.LBB304:
 965              	.LBB299:
  97:../../libDaisy//src/hid/midi.h **** 
 966              		.loc 7 97 9 view .LVU239
 967 0020 05F51044 		add	r4, r5, #36864
 968              	.LBE299:
 969              	.LBE304:
  33:USB_MIDI.cpp  ****     bool led_state;
 970              		.loc 9 33 16 view .LVU240
 971 0024 3346     		mov	r3, r6
 972 0026 03A8     		add	r0, sp, #12
 973              	.LVL77:
  33:USB_MIDI.cpp  ****     bool led_state;
 974              		.loc 9 33 16 view .LVU241
 975 0028 0968     		ldr	r1, [r1]
 976 002a 0096     		str	r6, [sp]
 977              	.LBB305:
 978              	.LBB306:
  17:../../DaisySP//Source/Synthesis/oscillator.h ****     /** Choices for output waveforms, POLYBLEP are appropriately labeled. Others are naive forms.
  18:../../DaisySP//Source/Synthesis/oscillator.h ****     */
  19:../../DaisySP//Source/Synthesis/oscillator.h ****     enum
  20:../../DaisySP//Source/Synthesis/oscillator.h ****     {
  21:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_SIN,
  22:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_TRI,
  23:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_SAW,
  24:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_RAMP,
  25:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_SQUARE,
  26:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_POLYBLEP_TRI,
  27:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_POLYBLEP_SAW,
  28:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_POLYBLEP_SQUARE,
  29:../../DaisySP//Source/Synthesis/oscillator.h ****         WAVE_LAST,
  30:../../DaisySP//Source/Synthesis/oscillator.h ****     };
  31:../../DaisySP//Source/Synthesis/oscillator.h **** 
  32:../../DaisySP//Source/Synthesis/oscillator.h **** 
  33:../../DaisySP//Source/Synthesis/oscillator.h ****     /** Initializes the Oscillator
  34:../../DaisySP//Source/Synthesis/oscillator.h **** 
  35:../../DaisySP//Source/Synthesis/oscillator.h ****         \param sample_rate - sample rate of the audio engine being run, and the frequency that the 
  36:../../DaisySP//Source/Synthesis/oscillator.h **** 
  37:../../DaisySP//Source/Synthesis/oscillator.h ****         Defaults:
  38:../../DaisySP//Source/Synthesis/oscillator.h ****         - freq_ = 100 Hz
  39:../../DaisySP//Source/Synthesis/oscillator.h ****         - amp_ = 0.5
  40:../../DaisySP//Source/Synthesis/oscillator.h ****         - waveform_ = sine wave.
  41:../../DaisySP//Source/Synthesis/oscillator.h ****     */
  42:../../DaisySP//Source/Synthesis/oscillator.h ****     void Init(float sample_rate)
  43:../../DaisySP//Source/Synthesis/oscillator.h ****     {
  44:../../DaisySP//Source/Synthesis/oscillator.h ****         sr_        = sample_rate;
 979              		.loc 6 44 20 view .LVU242
 980 002c DFF89881 		ldr	r8, .L99+36
 981              	.LBE306:
 982              	.LBE305:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 41


 983              	.LBB310:
 984              	.LBB290:
 985              	.LBB287:
 986              	.LBB284:
 987              	.LBB281:
  69:../../libDaisy//src/per/gpio.h ****         {
 988              		.loc 11 69 73 view .LVU243
 989 0030 CDE90326 		strd	r2, r6, [sp, #12]
 990              	.LBE281:
 991              	.LBE284:
 992              	.LBE287:
 993              	.LBE290:
 994              	.LBE310:
  33:USB_MIDI.cpp  ****     bool led_state;
 995              		.loc 9 33 16 view .LVU244
 996 0034 0122     		movs	r2, #1
 997              	.LBB311:
 998              	.LBB291:
 999              	.LBB288:
 1000              	.LBB285:
 1001              	.LBB282:
  69:../../libDaisy//src/per/gpio.h ****         {
 1002              		.loc 11 69 73 view .LVU245
 1003 0036 CDE90566 		strd	r6, r6, [sp, #20]
 1004              	.LVL78:
  69:../../libDaisy//src/per/gpio.h ****         {
 1005              		.loc 11 69 73 view .LVU246
 1006              	.LBE282:
 1007              	.LBE285:
 1008              	.LBE288:
 1009              	.LBE291:
 1010              	.LBE311:
  33:USB_MIDI.cpp  ****     bool led_state;
 1011              		.loc 9 33 5 is_stmt 1 view .LVU247
  33:USB_MIDI.cpp  ****     bool led_state;
 1012              		.loc 9 33 16 is_stmt 0 view .LVU248
 1013 003a FFF7FEFF 		bl	_ZN5daisy4GPIO4InitENS_3PinENS0_4ModeENS0_4PullENS0_5SpeedE
 1014              	.LVL79:
  34:USB_MIDI.cpp  ****     led_state = true;
 1015              		.loc 9 34 5 is_stmt 1 view .LVU249
 1016              		.loc 9 35 5 view .LVU250
  36:USB_MIDI.cpp  ****     /** Initialize USB Midi 
  37:USB_MIDI.cpp  **** 		 *  by default this is set to use the built in (USB FS) peripheral.
  38:USB_MIDI.cpp  **** 		 * 
  39:USB_MIDI.cpp  **** 		 *  by setting midi_cfg.transport_config.periph = MidiUsbTransport::Config::EXTERNAL
  40:USB_MIDI.cpp  **** 		 *  the USB HS pins can be used (as FS) for MIDI 
  41:USB_MIDI.cpp  **** 		 */
  42:USB_MIDI.cpp  ****     MidiUsbHandler::Config midi_cfg;
 1017              		.loc 9 42 5 view .LVU251
  43:USB_MIDI.cpp  ****     midi_cfg.transport_config.periph = MidiUsbTransport::Config::INTERNAL;
 1018              		.loc 9 43 5 view .LVU252
  44:USB_MIDI.cpp  ****     midi.Init(midi_cfg);
 1019              		.loc 9 44 5 view .LVU253
 1020              	.LBB312:
 1021              	.LBI292:
  95:../../libDaisy//src/hid/midi.h ****     {
 1022              		.loc 7 95 10 view .LVU254
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 42


 1023              	.LBB300:
  99:../../libDaisy//src/hid/midi.h **** 
 1024              		.loc 7 99 24 is_stmt 0 view .LVU255
 1025 003e 3146     		mov	r1, r6
 1026 0040 04F1A800 		add	r0, r4, #168
  97:../../libDaisy//src/hid/midi.h **** 
 1027              		.loc 7 97 9 view .LVU256
 1028 0044 84F8A560 		strb	r6, [r4, #165]
  99:../../libDaisy//src/hid/midi.h **** 
 1029              		.loc 7 99 24 view .LVU257
 1030 0048 FFF7FEFF 		bl	_ZN5daisy16MidiUsbTransport4InitENS0_6ConfigE
 1031              	.LVL80:
 1032              	.LBB294:
 1033              	.LBI294:
  24:../../libDaisy//src/util/ringbuffer.h **** 
 1034              		.loc 10 24 17 is_stmt 1 view .LVU258
 1035              	.LBE294:
 102:../../libDaisy//src/hid/midi.h ****         pstate_                = ParserEmpty;
 1036              		.loc 7 102 32 is_stmt 0 view .LVU259
 1037 004c 0A23     		movs	r3, #10
 1038              	.LBB297:
 1039              	.LBB295:
  24:../../libDaisy//src/util/ringbuffer.h **** 
 1040              		.loc 10 24 49 view .LVU260
 1041 004e C4F89C60 		str	r6, [r4, #156]
 1042              	.LBE295:
 1043              	.LBE297:
 1044              	.LBE300:
 1045              	.LBE312:
  45:USB_MIDI.cpp  **** 
  46:USB_MIDI.cpp  ****     /** Initialize our test tone */
  47:USB_MIDI.cpp  ****     osc.Init(hw.AudioSampleRate());
 1046              		.loc 9 47 13 view .LVU261
 1047 0052 5448     		ldr	r0, .L99
 1048              	.LBB313:
 1049              	.LBB301:
 1050              	.LBB298:
 1051              	.LBB296:
  24:../../libDaisy//src/util/ringbuffer.h **** 
 1052              		.loc 10 24 36 view .LVU262
 1053 0054 C4F89860 		str	r6, [r4, #152]
 1054              	.LVL81:
  24:../../libDaisy//src/util/ringbuffer.h **** 
 1055              		.loc 10 24 36 view .LVU263
 1056              	.LBE296:
 1057              	.LBE298:
 1058              	.LBE301:
 1059              	.LBE313:
 1060              		.loc 9 47 5 is_stmt 1 view .LVU264
 1061              	.LBB314:
 1062              	.LBB302:
 103:../../libDaisy//src/hid/midi.h ****     }
 1063              		.loc 7 103 32 is_stmt 0 view .LVU265
 1064 0058 2E71     		strb	r6, [r5, #4]
 102:../../libDaisy//src/hid/midi.h ****         pstate_                = ParserEmpty;
 1065              		.loc 7 102 32 view .LVU266
 1066 005a 2B72     		strb	r3, [r5, #8]
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 43


 1067              	.LBE302:
 1068              	.LBE314:
 1069              		.loc 9 47 13 view .LVU267
 1070 005c FFF7FEFF 		bl	_ZN5daisy9DaisySeed15AudioSampleRateEv
 1071              	.LVL82:
 1072              	.LBB315:
 1073              	.LBB307:
  45:../../DaisySP//Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
 1074              		.loc 6 45 27 view .LVU268
 1075 0060 B7EE006A 		vmov.f32	s12, #1.0e+0
  46:../../DaisySP//Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
  47:../../DaisySP//Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
 1076              		.loc 6 47 20 view .LVU269
 1077 0064 4FF07C53 		mov	r3, #1056964608
 1078              	.LBE307:
 1079              	.LBE315:
 1080              		.loc 9 47 13 view .LVU270
 1081 0068 F0EE407A 		vmov.f32	s15, s0
 1082              	.LVL83:
 1083              	.LBB316:
 1084              	.LBI305:
  42:../../DaisySP//Source/Synthesis/oscillator.h ****     {
 1085              		.loc 6 42 10 is_stmt 1 view .LVU271
 1086              	.LBB308:
  44:../../DaisySP//Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
 1087              		.loc 6 44 9 view .LVU272
  46:../../DaisySP//Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 1088              		.loc 6 46 20 is_stmt 0 view .LVU273
 1089 006c 9FED507A 		vldr.32	s14, .L99+12
 1090              		.loc 6 47 20 view .LVU274
 1091 0070 C8F80430 		str	r3, [r8, #4]	@ float
  48:../../DaisySP//Source/Synthesis/oscillator.h ****         pw_        = 0.5f;
  49:../../DaisySP//Source/Synthesis/oscillator.h ****         pw_rad_    = pw_ * TWOPI_F;
  50:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
  51:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 1092              		.loc 6 51 34 view .LVU275
 1093 0074 4046     		mov	r0, r8
  48:../../DaisySP//Source/Synthesis/oscillator.h ****         pw_        = 0.5f;
 1094              		.loc 6 48 20 view .LVU276
 1095 0076 C8F80C30 		str	r3, [r8, #12]	@ float
 1096              		.loc 6 51 34 view .LVU277
 1097 007a B0EE470A 		vmov.f32	s0, s14
 1098              	.LVL84:
  45:../../DaisySP//Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 1099              		.loc 6 45 27 view .LVU278
 1100 007e C6EE276A 		vdiv.f32	s13, s12, s15
  49:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
 1101              		.loc 6 49 20 view .LVU279
 1102 0082 4C4B     		ldr	r3, .L99+16
  44:../../DaisySP//Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
 1103              		.loc 6 44 20 view .LVU280
 1104 0084 C8ED057A 		vstr.32	s15, [r8, #20]
  45:../../DaisySP//Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 1105              		.loc 6 45 9 is_stmt 1 view .LVU281
  49:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
 1106              		.loc 6 49 20 is_stmt 0 view .LVU282
 1107 0088 C8F81030 		str	r3, [r8, #16]	@ float
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 44


  50:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 1108              		.loc 6 50 20 view .LVU283
 1109 008c 0023     		movs	r3, #0
  46:../../DaisySP//Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
 1110              		.loc 6 46 20 view .LVU284
 1111 008e 88ED027A 		vstr.32	s14, [r8, #8]
  50:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 1112              		.loc 6 50 20 view .LVU285
 1113 0092 C8F81C30 		str	r3, [r8, #28]	@ float
  45:../../DaisySP//Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 1114              		.loc 6 45 20 view .LVU286
 1115 0096 C8ED066A 		vstr.32	s13, [r8, #24]
  46:../../DaisySP//Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
 1116              		.loc 6 46 9 is_stmt 1 view .LVU287
  47:../../DaisySP//Source/Synthesis/oscillator.h ****         pw_        = 0.5f;
 1117              		.loc 6 47 9 view .LVU288
  48:../../DaisySP//Source/Synthesis/oscillator.h ****         pw_rad_    = pw_ * TWOPI_F;
 1118              		.loc 6 48 9 view .LVU289
  49:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
 1119              		.loc 6 49 9 view .LVU290
  50:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 1120              		.loc 6 50 9 view .LVU291
 1121              		.loc 6 51 9 view .LVU292
 1122              		.loc 6 51 34 is_stmt 0 view .LVU293
 1123 009a FFF7FEFF 		bl	_ZN7daisysp10Oscillator12CalcPhaseIncEf
 1124              	.LVL85:
  52:../../DaisySP//Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
  53:../../DaisySP//Source/Synthesis/oscillator.h ****         eoc_       = true;
  54:../../DaisySP//Source/Synthesis/oscillator.h ****         eor_       = true;
 1125              		.loc 6 54 20 view .LVU294
 1126 009e 40F20113 		movw	r3, #257
 1127              	.LBE308:
 1128              	.LBE316:
  48:USB_MIDI.cpp  **** 
  49:USB_MIDI.cpp  ****     /** And start the audio callback */
  50:USB_MIDI.cpp  ****     hw.StartAudio(AudioCallback);
 1129              		.loc 9 50 18 view .LVU295
 1130 00a2 4549     		ldr	r1, .L99+20
 1131 00a4 3F48     		ldr	r0, .L99
 1132              	.LBB317:
 1133              	.LBB309:
  52:../../DaisySP//Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 1134              		.loc 6 52 20 view .LVU296
 1135 00a6 88F80060 		strb	r6, [r8]
 1136 00aa 05F19806 		add	r6, r5, #152
  51:../../DaisySP//Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 1137              		.loc 6 51 20 view .LVU297
 1138 00ae 88ED080A 		vstr.32	s0, [r8, #32]
  52:../../DaisySP//Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 1139              		.loc 6 52 9 is_stmt 1 view .LVU298
  53:../../DaisySP//Source/Synthesis/oscillator.h ****         eor_       = true;
 1140              		.loc 6 53 9 view .LVU299
 1141              		.loc 6 54 9 view .LVU300
 1142              		.loc 6 54 20 is_stmt 0 view .LVU301
 1143 00b2 A8F82C30 		strh	r3, [r8, #44]	@ movhi
 1144              	.LVL86:
 1145              		.loc 6 54 20 view .LVU302
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 45


 1146              	.LBE309:
 1147              	.LBE317:
 1148              		.loc 9 50 5 is_stmt 1 view .LVU303
 1149              		.loc 9 50 18 is_stmt 0 view .LVU304
 1150 00b6 FFF7FEFF 		bl	_ZN5daisy9DaisySeed10StartAudioEPFvPKPKfPPfjE
 1151              	.LVL87:
 1152              	.L85:
  51:USB_MIDI.cpp  ****     while(1)
 1153              		.loc 9 51 5 is_stmt 1 view .LVU305
 1154              	.LBB318:
  52:USB_MIDI.cpp  ****     {
  53:USB_MIDI.cpp  ****         /** Listen to MIDI for new changes */
  54:USB_MIDI.cpp  ****         midi.Listen();
 1155              		.loc 9 54 9 view .LVU306
 1156              	.LBB319:
 1157              	.LBI319:
 110:../../libDaisy//src/hid/midi.h ****     {
 1158              		.loc 7 110 10 view .LVU307
 1159              	.LBB320:
 113:../../libDaisy//src/hid/midi.h ****         while(transport_.Readable())
 1160              		.loc 7 113 29 is_stmt 0 view .LVU308
 1161 00ba FFF7FEFF 		bl	_ZN5daisy6System6GetNowEv
 1162              	.LVL88:
 1163 00be 8146     		mov	r9, r0
 1164              	.LVL89:
 113:../../libDaisy//src/hid/midi.h ****         while(transport_.Readable())
 1165              		.loc 7 113 29 view .LVU309
 1166 00c0 07E0     		b	.L82
 1167              	.LVL90:
 1168              	.L97:
 116:../../libDaisy//src/hid/midi.h ****             Parse(transport_.Rx());
 1169              		.loc 7 116 24 view .LVU310
 1170 00c2 C4F8A090 		str	r9, [r4, #160]
 117:../../libDaisy//src/hid/midi.h ****         }
 1171              		.loc 7 117 18 view .LVU311
 1172 00c6 FFF7FEFF 		bl	_ZN5daisy16MidiUsbTransport2RxEv
 1173              	.LVL91:
 1174 00ca 0146     		mov	r1, r0
 1175 00cc 3648     		ldr	r0, .L99+4
 1176 00ce FFF7FEFF 		bl	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh
 1177              	.LVL92:
 1178              	.L82:
 114:../../libDaisy//src/hid/midi.h ****         {
 1179              		.loc 7 114 34 is_stmt 1 view .LVU312
 1180 00d2 3A48     		ldr	r0, .L99+24
 1181 00d4 FFF7FEFF 		bl	_ZN5daisy16MidiUsbTransport8ReadableEv
 1182              	.LVL93:
 1183 00d8 0346     		mov	r3, r0
 117:../../libDaisy//src/hid/midi.h ****         }
 1184              		.loc 7 117 18 is_stmt 0 view .LVU313
 1185 00da 3848     		ldr	r0, .L99+24
 114:../../libDaisy//src/hid/midi.h ****         {
 1186              		.loc 7 114 34 view .LVU314
 1187 00dc 002B     		cmp	r3, #0
 1188 00de F0D1     		bne	.L97
 123:../../libDaisy//src/hid/midi.h ****         {
 1189              		.loc 7 123 32 view .LVU315
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 46


 1190 00e0 3648     		ldr	r0, .L99+24
 1191 00e2 FFF7FEFF 		bl	_ZN5daisy16MidiUsbTransport8RxActiveEv
 1192              	.LVL94:
 123:../../libDaisy//src/hid/midi.h ****         {
 1193              		.loc 7 123 9 view .LVU316
 1194 00e6 0346     		mov	r3, r0
 1195 00e8 0028     		cmp	r0, #0
 1196 00ea 52D0     		beq	.L98
 1197              	.LVL95:
 1198              	.L83:
 123:../../libDaisy//src/hid/midi.h ****         {
 1199              		.loc 7 123 9 view .LVU317
 1200              	.LBE320:
 1201              	.LBE319:
  55:USB_MIDI.cpp  **** 
  56:USB_MIDI.cpp  ****         /** When there are messages waiting in the queue... */
  57:USB_MIDI.cpp  ****         while(midi.HasEvents())
 1202              		.loc 9 57 9 is_stmt 1 view .LVU318
 1203              		.loc 9 57 29 view .LVU319
 1204              	.LBB324:
 1205              	.LBI324:
 134:../../libDaisy//src/hid/midi.h **** 
 1206              		.loc 7 134 10 view .LVU320
 1207              	.LBB325:
 1208              	.LBI325:
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1209              		.loc 10 36 19 view .LVU321
 1210              	.LBB326:
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1211              		.loc 10 36 46 is_stmt 0 view .LVU322
 1212 00ec D4F89C30 		ldr	r3, [r4, #156]
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1213              		.loc 10 36 59 view .LVU323
 1214 00f0 D4F89820 		ldr	r2, [r4, #152]
 1215              	.LVL96:
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1216              		.loc 10 36 57 view .LVU324
 1217 00f4 9B1A     		subs	r3, r3, r2
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1218              		.loc 10 36 72 view .LVU325
 1219 00f6 DBB2     		uxtb	r3, r3
 1220              	.LBE326:
 1221              	.LBE325:
 1222              	.LBE324:
 1223              		.loc 9 57 29 view .LVU326
 1224 00f8 002B     		cmp	r3, #0
 1225 00fa DED0     		beq	.L85
 1226              	.L86:
 1227              	.LBB327:
 1228              	.LBB328:
 1229              	.LBB329:
 1230              	.LBB330:
  59:../../libDaisy//src/util/ringbuffer.h ****     }
  60:../../libDaisy//src/util/ringbuffer.h **** 
  61:../../libDaisy//src/util/ringbuffer.h ****     /** Reads the first available element from the ring buffer
  62:../../libDaisy//src/util/ringbuffer.h ****     \return read value
  63:../../libDaisy//src/util/ringbuffer.h ****      */
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 47


  64:../../libDaisy//src/util/ringbuffer.h ****     inline T Read()
  65:../../libDaisy//src/util/ringbuffer.h ****     {
  66:../../libDaisy//src/util/ringbuffer.h ****         while(!readable())
 1231              		.loc 10 66 24 is_stmt 1 view .LVU327
 1232              	.LVL97:
 1233              	.LBB331:
 1234              	.LBI331:
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1235              		.loc 10 36 19 view .LVU328
 1236              	.LBB332:
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1237              		.loc 10 36 46 is_stmt 0 view .LVU329
 1238 00fc D4F89C30 		ldr	r3, [r4, #156]
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1239              		.loc 10 36 59 view .LVU330
 1240 0100 D4F89820 		ldr	r2, [r4, #152]
 1241              	.LVL98:
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1242              		.loc 10 36 57 view .LVU331
 1243 0104 9B1A     		subs	r3, r3, r2
  36:../../libDaisy//src/util/ringbuffer.h **** 
 1244              		.loc 10 36 72 view .LVU332
 1245 0106 DBB2     		uxtb	r3, r3
 1246              	.LBE332:
 1247              	.LBE331:
 1248              		.loc 10 66 24 view .LVU333
 1249 0108 002B     		cmp	r3, #0
 1250 010a F7D0     		beq	.L86
 1251              	.LVL99:
 1252              	.LBB333:
 1253              	.LBI333:
  67:../../libDaisy//src/util/ringbuffer.h ****             ;
  68:../../libDaisy//src/util/ringbuffer.h ****         return ImmediateRead();
  69:../../libDaisy//src/util/ringbuffer.h ****     }
  70:../../libDaisy//src/util/ringbuffer.h **** 
  71:../../libDaisy//src/util/ringbuffer.h ****     /** Reads next element from ring buffer immediately
  72:../../libDaisy//src/util/ringbuffer.h ****     \return read value
  73:../../libDaisy//src/util/ringbuffer.h ****      */
  74:../../libDaisy//src/util/ringbuffer.h ****     inline T ImmediateRead()
 1254              		.loc 10 74 14 is_stmt 1 view .LVU334
 1255              	.LBB334:
  75:../../libDaisy//src/util/ringbuffer.h ****     {
  76:../../libDaisy//src/util/ringbuffer.h ****         size_t r      = read_ptr_;
 1256              		.loc 10 76 16 is_stmt 0 view .LVU335
 1257 010c D4F89830 		ldr	r3, [r4, #152]
 1258              	.LVL100:
  77:../../libDaisy//src/util/ringbuffer.h ****         T      result = buffer_[r];
 1259              		.loc 10 77 16 view .LVU336
 1260 0110 03EBC302 		add	r2, r3, r3, lsl #3
 1261              	.LVL101:
  78:../../libDaisy//src/util/ringbuffer.h ****         read_ptr_     = (r + 1) % size;
 1262              		.loc 10 78 28 view .LVU337
 1263 0114 0133     		adds	r3, r3, #1
 1264              	.LVL102:
  77:../../libDaisy//src/util/ringbuffer.h ****         T      result = buffer_[r];
 1265              		.loc 10 77 16 view .LVU338
 1266 0116 1201     		lsls	r2, r2, #4
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 48


 1267              		.loc 10 78 33 view .LVU339
 1268 0118 DBB2     		uxtb	r3, r3
  77:../../libDaisy//src/util/ringbuffer.h ****         T      result = buffer_[r];
 1269              		.loc 10 77 16 view .LVU340
 1270 011a 16F80290 		ldrb	r9, [r6, r2]	@ zero_extendqisi2
 1271              	.LVL103:
  77:../../libDaisy//src/util/ringbuffer.h ****         T      result = buffer_[r];
 1272              		.loc 10 77 16 view .LVU341
 1273 011e A918     		adds	r1, r5, r2
 1274              		.loc 10 78 23 view .LVU342
 1275 0120 C4F89830 		str	r3, [r4, #152]
 1276              	.LVL104:
 1277              		.loc 10 78 23 view .LVU343
 1278              	.LBE334:
 1279              	.LBE333:
 1280              	.LBE330:
 1281              	.LBE329:
 1282              	.LBE328:
 1283              	.LBB339:
  58:USB_MIDI.cpp  ****         {
  59:USB_MIDI.cpp  ****             /** Pull the oldest one from the list... */
  60:USB_MIDI.cpp  ****             auto msg = midi.PopEvent();
  61:USB_MIDI.cpp  ****             switch(msg.type)
 1284              		.loc 9 61 13 view .LVU344
 1285 0124 B9F1010F 		cmp	r9, #1
 1286              	.LBE339:
 1287              	.LBB355:
 1288              	.LBB338:
 1289              	.LBB337:
 1290              	.LBB336:
 1291              	.LBB335:
  77:../../libDaisy//src/util/ringbuffer.h ****         read_ptr_     = (r + 1) % size;
 1292              		.loc 10 77 16 view .LVU345
 1293 0128 91F8A0A0 		ldrb	r10, [r1, #160]	@ zero_extendqisi2
 1294              	.LVL105:
  77:../../libDaisy//src/util/ringbuffer.h ****         read_ptr_     = (r + 1) % size;
 1295              		.loc 10 77 16 view .LVU346
 1296 012c 91F8A1B0 		ldrb	fp, [r1, #161]	@ zero_extendqisi2
 1297              	.LVL106:
  77:../../libDaisy//src/util/ringbuffer.h ****         read_ptr_     = (r + 1) % size;
 1298              		.loc 10 77 16 view .LVU347
 1299              	.LBE335:
 1300              	.LBE336:
 1301              	.LBE337:
 1302              	.LBE338:
 1303              	.LBE355:
 1304              		.loc 9 61 13 is_stmt 1 view .LVU348
 1305              	.LBB356:
 1306 0130 DCD1     		bne	.L83
 1307              	.LBE356:
 1308              	.LBE327:
 1309              	.LBE318:
  62:USB_MIDI.cpp  ****             {
  63:USB_MIDI.cpp  ****                 case NoteOn:
 1310              		.loc 9 63 17 view .LVU349
  64:USB_MIDI.cpp  ****                 {
 1311              		.loc 9 64 17 view .LVU350
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 49


 1312              	.LBB360:
 1313              	.LBB358:
 1314              	.LBB357:
 1315              	.LBB340:
  65:USB_MIDI.cpp  ****                             // Set the onboard LED
  66:USB_MIDI.cpp  ****                     hw.SetLed(led_state);
 1316              		.loc 9 66 21 view .LVU351
 1317              		.loc 9 66 30 is_stmt 0 view .LVU352
 1318 0132 3946     		mov	r1, r7
 1319 0134 1B48     		ldr	r0, .L99
 1320 0136 FFF7FEFF 		bl	_ZN5daisy9DaisySeed6SetLedEb
 1321              	.LVL107:
  67:USB_MIDI.cpp  ****                     my_led.Write(true);
 1322              		.loc 9 67 21 is_stmt 1 view .LVU353
 1323              		.loc 9 67 33 is_stmt 0 view .LVU354
 1324 013a 4946     		mov	r1, r9
 1325 013c 03A8     		add	r0, sp, #12
  68:USB_MIDI.cpp  ****                     System::Delay(200);
  69:USB_MIDI.cpp  ****                     my_led.Write(false);
  70:USB_MIDI.cpp  **** 
  71:USB_MIDI.cpp  **** 
  72:USB_MIDI.cpp  ****                     // Toggle the LED state for the next time around.
  73:USB_MIDI.cpp  ****                     led_state = !led_state;
 1326              		.loc 9 73 31 view .LVU355
 1327 013e 87F00107 		eor	r7, r7, #1
 1328              	.LVL108:
  67:USB_MIDI.cpp  ****                     my_led.Write(true);
 1329              		.loc 9 67 33 view .LVU356
 1330 0142 FFF7FEFF 		bl	_ZN5daisy4GPIO5WriteEb
 1331              	.LVL109:
  68:USB_MIDI.cpp  ****                     System::Delay(200);
 1332              		.loc 9 68 21 is_stmt 1 view .LVU357
  68:USB_MIDI.cpp  ****                     System::Delay(200);
 1333              		.loc 9 68 34 is_stmt 0 view .LVU358
 1334 0146 C820     		movs	r0, #200
 1335 0148 FFF7FEFF 		bl	_ZN5daisy6System5DelayEm
 1336              	.LVL110:
  69:USB_MIDI.cpp  **** 
 1337              		.loc 9 69 21 is_stmt 1 view .LVU359
  69:USB_MIDI.cpp  **** 
 1338              		.loc 9 69 33 is_stmt 0 view .LVU360
 1339 014c 0021     		movs	r1, #0
 1340 014e 03A8     		add	r0, sp, #12
 1341 0150 FFF7FEFF 		bl	_ZN5daisy4GPIO5WriteEb
 1342              	.LVL111:
 1343              		.loc 9 73 21 is_stmt 1 view .LVU361
  74:USB_MIDI.cpp  ****                     /** and change the frequency of the oscillator */
  75:USB_MIDI.cpp  ****                     auto note_msg = msg.AsNoteOn();
 1344              		.loc 9 75 21 view .LVU362
 1345              	.LBB341:
 1346              	.LBI341:
 1347              		.file 13 "../../libDaisy//src/hid/MidiEvent.h"
   1:../../libDaisy//src/hid/MidiEvent.h **** namespace daisy
   2:../../libDaisy//src/hid/MidiEvent.h **** {
   3:../../libDaisy//src/hid/MidiEvent.h **** /** @addtogroup midi MIDI
   4:../../libDaisy//src/hid/MidiEvent.h ****  *  @ingroup human_interface
   5:../../libDaisy//src/hid/MidiEvent.h ****  *  @ingroup libdaisy
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 50


   6:../../libDaisy//src/hid/MidiEvent.h ****  *  @brief MIDI handlers, transports, and message types
   7:../../libDaisy//src/hid/MidiEvent.h ****  *  @{
   8:../../libDaisy//src/hid/MidiEvent.h ****  */
   9:../../libDaisy//src/hid/MidiEvent.h **** 
  10:../../libDaisy//src/hid/MidiEvent.h **** /** @defgroup midi_events MIDI_EVENTS 
  11:../../libDaisy//src/hid/MidiEvent.h ****  *  @{
  12:../../libDaisy//src/hid/MidiEvent.h **** */
  13:../../libDaisy//src/hid/MidiEvent.h **** 
  14:../../libDaisy//src/hid/MidiEvent.h **** /** Parsed from the Status Byte, these are the common Midi Messages that can be handled. \n
  15:../../libDaisy//src/hid/MidiEvent.h **** At this time only 3-byte messages are correctly parsed into MidiEvents.
  16:../../libDaisy//src/hid/MidiEvent.h **** */
  17:../../libDaisy//src/hid/MidiEvent.h **** enum MidiMessageType
  18:../../libDaisy//src/hid/MidiEvent.h **** {
  19:../../libDaisy//src/hid/MidiEvent.h ****     NoteOff,               /**< & */
  20:../../libDaisy//src/hid/MidiEvent.h ****     NoteOn,                /**< & */
  21:../../libDaisy//src/hid/MidiEvent.h ****     PolyphonicKeyPressure, /**< & */
  22:../../libDaisy//src/hid/MidiEvent.h ****     ControlChange,         /**< & */
  23:../../libDaisy//src/hid/MidiEvent.h ****     ProgramChange,         /**< & */
  24:../../libDaisy//src/hid/MidiEvent.h ****     ChannelPressure,       /**< & */
  25:../../libDaisy//src/hid/MidiEvent.h ****     PitchBend,             /**< & */
  26:../../libDaisy//src/hid/MidiEvent.h ****     SystemCommon,          /**< & */
  27:../../libDaisy//src/hid/MidiEvent.h ****     SystemRealTime,        /**< & */
  28:../../libDaisy//src/hid/MidiEvent.h ****     ChannelMode,           /**< & */
  29:../../libDaisy//src/hid/MidiEvent.h ****     MessageLast,           /**< & */
  30:../../libDaisy//src/hid/MidiEvent.h **** };
  31:../../libDaisy//src/hid/MidiEvent.h **** 
  32:../../libDaisy//src/hid/MidiEvent.h **** enum SystemCommonType
  33:../../libDaisy//src/hid/MidiEvent.h **** {
  34:../../libDaisy//src/hid/MidiEvent.h ****     SystemExclusive,     /**< & */
  35:../../libDaisy//src/hid/MidiEvent.h ****     MTCQuarterFrame,     /**< & */
  36:../../libDaisy//src/hid/MidiEvent.h ****     SongPositionPointer, /**< & */
  37:../../libDaisy//src/hid/MidiEvent.h ****     SongSelect,          /**< & */
  38:../../libDaisy//src/hid/MidiEvent.h ****     SCUndefined0,        /**< & */
  39:../../libDaisy//src/hid/MidiEvent.h ****     SCUndefined1,        /**< & */
  40:../../libDaisy//src/hid/MidiEvent.h ****     TuneRequest,         /**< & */
  41:../../libDaisy//src/hid/MidiEvent.h ****     SysExEnd,            /**< & */
  42:../../libDaisy//src/hid/MidiEvent.h ****     SystemCommonLast,    /**< & */
  43:../../libDaisy//src/hid/MidiEvent.h **** };
  44:../../libDaisy//src/hid/MidiEvent.h **** 
  45:../../libDaisy//src/hid/MidiEvent.h **** enum SystemRealTimeType
  46:../../libDaisy//src/hid/MidiEvent.h **** {
  47:../../libDaisy//src/hid/MidiEvent.h ****     TimingClock,        /**< & */
  48:../../libDaisy//src/hid/MidiEvent.h ****     SRTUndefined0,      /**< & */
  49:../../libDaisy//src/hid/MidiEvent.h ****     Start,              /**< & */
  50:../../libDaisy//src/hid/MidiEvent.h ****     Continue,           /**< & */
  51:../../libDaisy//src/hid/MidiEvent.h ****     Stop,               /**< & */
  52:../../libDaisy//src/hid/MidiEvent.h ****     SRTUndefined1,      /**< & */
  53:../../libDaisy//src/hid/MidiEvent.h ****     ActiveSensing,      /**< & */
  54:../../libDaisy//src/hid/MidiEvent.h ****     Reset,              /**< & */
  55:../../libDaisy//src/hid/MidiEvent.h ****     SystemRealTimeLast, /**< & */
  56:../../libDaisy//src/hid/MidiEvent.h **** };
  57:../../libDaisy//src/hid/MidiEvent.h **** 
  58:../../libDaisy//src/hid/MidiEvent.h **** enum ChannelModeType
  59:../../libDaisy//src/hid/MidiEvent.h **** {
  60:../../libDaisy//src/hid/MidiEvent.h ****     AllSoundOff,         /**< & */
  61:../../libDaisy//src/hid/MidiEvent.h ****     ResetAllControllers, /**< & */
  62:../../libDaisy//src/hid/MidiEvent.h ****     LocalControl,        /**< & */
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 51


  63:../../libDaisy//src/hid/MidiEvent.h ****     AllNotesOff,         /**< & */
  64:../../libDaisy//src/hid/MidiEvent.h ****     OmniModeOff,         /**< & */
  65:../../libDaisy//src/hid/MidiEvent.h ****     OmniModeOn,          /**< & */
  66:../../libDaisy//src/hid/MidiEvent.h ****     MonoModeOn,          /**< & */
  67:../../libDaisy//src/hid/MidiEvent.h ****     PolyModeOn,          /**< & */
  68:../../libDaisy//src/hid/MidiEvent.h ****     ChannelModeLast,     /**< & */
  69:../../libDaisy//src/hid/MidiEvent.h **** };
  70:../../libDaisy//src/hid/MidiEvent.h **** 
  71:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing note, and velocity data for a given channel.
  72:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
  73:../../libDaisy//src/hid/MidiEvent.h **** */
  74:../../libDaisy//src/hid/MidiEvent.h **** struct NoteOffEvent
  75:../../libDaisy//src/hid/MidiEvent.h **** {
  76:../../libDaisy//src/hid/MidiEvent.h ****     int     channel;  /**< & */
  77:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t note;     /**< & */
  78:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t velocity; /**< & */
  79:../../libDaisy//src/hid/MidiEvent.h **** };
  80:../../libDaisy//src/hid/MidiEvent.h **** 
  81:../../libDaisy//src/hid/MidiEvent.h **** 
  82:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing note, and velocity data for a given channel.
  83:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
  84:../../libDaisy//src/hid/MidiEvent.h **** */
  85:../../libDaisy//src/hid/MidiEvent.h **** struct NoteOnEvent
  86:../../libDaisy//src/hid/MidiEvent.h **** {
  87:../../libDaisy//src/hid/MidiEvent.h ****     int     channel;  /**< & */
  88:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t note;     /**< & */
  89:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t velocity; /**< & */
  90:../../libDaisy//src/hid/MidiEvent.h **** };
  91:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing note, and pressure data for a given channel.
  92:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
  93:../../libDaisy//src/hid/MidiEvent.h **** */
  94:../../libDaisy//src/hid/MidiEvent.h **** struct PolyphonicKeyPressureEvent
  95:../../libDaisy//src/hid/MidiEvent.h **** {
  96:../../libDaisy//src/hid/MidiEvent.h ****     int     channel;
  97:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t note;
  98:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t pressure;
  99:../../libDaisy//src/hid/MidiEvent.h **** };
 100:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing control number, and value for a given channel.
 101:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 102:../../libDaisy//src/hid/MidiEvent.h **** */
 103:../../libDaisy//src/hid/MidiEvent.h **** struct ControlChangeEvent
 104:../../libDaisy//src/hid/MidiEvent.h **** {
 105:../../libDaisy//src/hid/MidiEvent.h ****     int     channel;        /**< & */
 106:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t control_number; /**< & */
 107:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t value;          /**< & */
 108:../../libDaisy//src/hid/MidiEvent.h **** };
 109:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing new program number, for a given channel.
 110:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 111:../../libDaisy//src/hid/MidiEvent.h **** */
 112:../../libDaisy//src/hid/MidiEvent.h **** struct ProgramChangeEvent
 113:../../libDaisy//src/hid/MidiEvent.h **** {
 114:../../libDaisy//src/hid/MidiEvent.h ****     int     channel; /**< & */
 115:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t program; /**< & */
 116:../../libDaisy//src/hid/MidiEvent.h **** };
 117:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing pressure (aftertouch), for a given channel.
 118:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 119:../../libDaisy//src/hid/MidiEvent.h **** */
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 52


 120:../../libDaisy//src/hid/MidiEvent.h **** struct ChannelPressureEvent
 121:../../libDaisy//src/hid/MidiEvent.h **** {
 122:../../libDaisy//src/hid/MidiEvent.h ****     int     channel;  /**< & */
 123:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t pressure; /**< & */
 124:../../libDaisy//src/hid/MidiEvent.h **** };
 125:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing pitch bend value for a given channel.
 126:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 127:../../libDaisy//src/hid/MidiEvent.h **** */
 128:../../libDaisy//src/hid/MidiEvent.h **** struct PitchBendEvent
 129:../../libDaisy//src/hid/MidiEvent.h **** {
 130:../../libDaisy//src/hid/MidiEvent.h ****     int     channel; /**< & */
 131:../../libDaisy//src/hid/MidiEvent.h ****     int16_t value;   /**< & */
 132:../../libDaisy//src/hid/MidiEvent.h **** };
 133:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing channel mode event for a given channel.
 134:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 135:../../libDaisy//src/hid/MidiEvent.h **** */
 136:../../libDaisy//src/hid/MidiEvent.h **** struct ChannelModeEvent
 137:../../libDaisy//src/hid/MidiEvent.h **** {
 138:../../libDaisy//src/hid/MidiEvent.h ****     int             channel;    /**< & */
 139:../../libDaisy//src/hid/MidiEvent.h ****     ChannelModeType event_type; /**< & */
 140:../../libDaisy//src/hid/MidiEvent.h ****     int16_t         value;      /**< & */
 141:../../libDaisy//src/hid/MidiEvent.h **** };
 142:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing sysex data.
 143:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 144:../../libDaisy//src/hid/MidiEvent.h **** */
 145:../../libDaisy//src/hid/MidiEvent.h **** struct SystemExclusiveEvent
 146:../../libDaisy//src/hid/MidiEvent.h **** {
 147:../../libDaisy//src/hid/MidiEvent.h ****     int     length;
 148:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t data[SYSEX_BUFFER_LEN]; /**< & */
 149:../../libDaisy//src/hid/MidiEvent.h **** };
 150:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing QuarterFrame data.
 151:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 152:../../libDaisy//src/hid/MidiEvent.h **** */
 153:../../libDaisy//src/hid/MidiEvent.h **** struct MTCQuarterFrameEvent
 154:../../libDaisy//src/hid/MidiEvent.h **** {
 155:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t message_type; /**< & */
 156:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t value;        /**< & */
 157:../../libDaisy//src/hid/MidiEvent.h **** };
 158:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing song position data.
 159:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 160:../../libDaisy//src/hid/MidiEvent.h **** */
 161:../../libDaisy//src/hid/MidiEvent.h **** struct SongPositionPointerEvent
 162:../../libDaisy//src/hid/MidiEvent.h **** {
 163:../../libDaisy//src/hid/MidiEvent.h ****     uint16_t position; /**< & */
 164:../../libDaisy//src/hid/MidiEvent.h **** };
 165:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing song select data.
 166:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 167:../../libDaisy//src/hid/MidiEvent.h **** */
 168:../../libDaisy//src/hid/MidiEvent.h **** struct SongSelectEvent
 169:../../libDaisy//src/hid/MidiEvent.h **** {
 170:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t song; /**< & */
 171:../../libDaisy//src/hid/MidiEvent.h **** };
 172:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing sound off data.
 173:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 174:../../libDaisy//src/hid/MidiEvent.h **** */
 175:../../libDaisy//src/hid/MidiEvent.h **** struct AllSoundOffEvent
 176:../../libDaisy//src/hid/MidiEvent.h **** {
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 53


 177:../../libDaisy//src/hid/MidiEvent.h ****     int channel; /**< & */
 178:../../libDaisy//src/hid/MidiEvent.h **** };
 179:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing ResetAllControllersEvent data.
 180:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 181:../../libDaisy//src/hid/MidiEvent.h **** */
 182:../../libDaisy//src/hid/MidiEvent.h **** struct ResetAllControllersEvent
 183:../../libDaisy//src/hid/MidiEvent.h **** {
 184:../../libDaisy//src/hid/MidiEvent.h ****     int     channel; /**< & */
 185:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t value;   /**< & */
 186:../../libDaisy//src/hid/MidiEvent.h **** };
 187:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing LocalControlEvent data.
 188:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 189:../../libDaisy//src/hid/MidiEvent.h **** */
 190:../../libDaisy//src/hid/MidiEvent.h **** struct LocalControlEvent
 191:../../libDaisy//src/hid/MidiEvent.h **** {
 192:../../libDaisy//src/hid/MidiEvent.h ****     int  channel;           /**< & */
 193:../../libDaisy//src/hid/MidiEvent.h ****     bool local_control_off; /**< & */
 194:../../libDaisy//src/hid/MidiEvent.h ****     bool local_control_on;  /**< & */
 195:../../libDaisy//src/hid/MidiEvent.h **** };
 196:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing AllNotesOffEvent data.
 197:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 198:../../libDaisy//src/hid/MidiEvent.h **** */
 199:../../libDaisy//src/hid/MidiEvent.h **** struct AllNotesOffEvent
 200:../../libDaisy//src/hid/MidiEvent.h **** {
 201:../../libDaisy//src/hid/MidiEvent.h ****     int channel; /**< & */
 202:../../libDaisy//src/hid/MidiEvent.h **** };
 203:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing OmniModeOffEvent data. 
 204:../../libDaisy//src/hid/MidiEvent.h ****  * Can be made from MidiEvent
 205:../../libDaisy//src/hid/MidiEvent.h **** */
 206:../../libDaisy//src/hid/MidiEvent.h **** struct OmniModeOffEvent
 207:../../libDaisy//src/hid/MidiEvent.h **** {
 208:../../libDaisy//src/hid/MidiEvent.h ****     int channel; /**< & */
 209:../../libDaisy//src/hid/MidiEvent.h **** };
 210:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing OmniModeOnEvent data.
 211:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 212:../../libDaisy//src/hid/MidiEvent.h **** */
 213:../../libDaisy//src/hid/MidiEvent.h **** struct OmniModeOnEvent
 214:../../libDaisy//src/hid/MidiEvent.h **** {
 215:../../libDaisy//src/hid/MidiEvent.h ****     int channel; /**< & */
 216:../../libDaisy//src/hid/MidiEvent.h **** };
 217:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing MonoModeOnEvent data.
 218:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 219:../../libDaisy//src/hid/MidiEvent.h **** */
 220:../../libDaisy//src/hid/MidiEvent.h **** struct MonoModeOnEvent
 221:../../libDaisy//src/hid/MidiEvent.h **** {
 222:../../libDaisy//src/hid/MidiEvent.h ****     int     channel;      /**< & */
 223:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t num_channels; /**< & */
 224:../../libDaisy//src/hid/MidiEvent.h **** };
 225:../../libDaisy//src/hid/MidiEvent.h **** /** Struct containing PolyModeOnEvent data.
 226:../../libDaisy//src/hid/MidiEvent.h **** Can be made from MidiEvent
 227:../../libDaisy//src/hid/MidiEvent.h **** */
 228:../../libDaisy//src/hid/MidiEvent.h **** struct PolyModeOnEvent
 229:../../libDaisy//src/hid/MidiEvent.h **** {
 230:../../libDaisy//src/hid/MidiEvent.h ****     int channel; /**< & */
 231:../../libDaisy//src/hid/MidiEvent.h **** };
 232:../../libDaisy//src/hid/MidiEvent.h **** 
 233:../../libDaisy//src/hid/MidiEvent.h **** 
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 54


 234:../../libDaisy//src/hid/MidiEvent.h **** /** Simple MidiEvent with message type, channel, and data[2] members.
 235:../../libDaisy//src/hid/MidiEvent.h **** */
 236:../../libDaisy//src/hid/MidiEvent.h **** struct MidiEvent
 237:../../libDaisy//src/hid/MidiEvent.h **** {
 238:../../libDaisy//src/hid/MidiEvent.h ****     // Newer ish.
 239:../../libDaisy//src/hid/MidiEvent.h ****     MidiMessageType    type;                         /**< & */
 240:../../libDaisy//src/hid/MidiEvent.h ****     int                channel;                      /**< & */
 241:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t            data[2];                      /**< & */
 242:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t            sysex_data[SYSEX_BUFFER_LEN]; /**< & */
 243:../../libDaisy//src/hid/MidiEvent.h ****     uint8_t            sysex_message_len;
 244:../../libDaisy//src/hid/MidiEvent.h ****     SystemCommonType   sc_type;
 245:../../libDaisy//src/hid/MidiEvent.h ****     SystemRealTimeType srt_type;
 246:../../libDaisy//src/hid/MidiEvent.h ****     ChannelModeType    cm_type;
 247:../../libDaisy//src/hid/MidiEvent.h **** 
 248:../../libDaisy//src/hid/MidiEvent.h ****     /** Returns the data within the MidiEvent as a NoteOffEvent struct */
 249:../../libDaisy//src/hid/MidiEvent.h ****     NoteOffEvent AsNoteOff()
 250:../../libDaisy//src/hid/MidiEvent.h ****     {
 251:../../libDaisy//src/hid/MidiEvent.h ****         NoteOffEvent m;
 252:../../libDaisy//src/hid/MidiEvent.h ****         m.channel  = channel;
 253:../../libDaisy//src/hid/MidiEvent.h ****         m.note     = data[0];
 254:../../libDaisy//src/hid/MidiEvent.h ****         m.velocity = data[1];
 255:../../libDaisy//src/hid/MidiEvent.h ****         return m;
 256:../../libDaisy//src/hid/MidiEvent.h ****     }
 257:../../libDaisy//src/hid/MidiEvent.h **** 
 258:../../libDaisy//src/hid/MidiEvent.h ****     /** Returns the data within the MidiEvent as a NoteOnEvent struct */
 259:../../libDaisy//src/hid/MidiEvent.h ****     NoteOnEvent AsNoteOn()
 1348              		.loc 13 259 17 view .LVU363
 1349              	.LBB342:
 260:../../libDaisy//src/hid/MidiEvent.h ****     {
 261:../../libDaisy//src/hid/MidiEvent.h ****         NoteOnEvent m;
 1350              		.loc 13 261 9 view .LVU364
 262:../../libDaisy//src/hid/MidiEvent.h ****         m.channel  = channel;
 1351              		.loc 13 262 9 view .LVU365
 263:../../libDaisy//src/hid/MidiEvent.h ****         m.note     = data[0];
 1352              		.loc 13 263 9 view .LVU366
 264:../../libDaisy//src/hid/MidiEvent.h ****         m.velocity = data[1];
 1353              		.loc 13 264 9 view .LVU367
 265:../../libDaisy//src/hid/MidiEvent.h ****         return m;
 1354              		.loc 13 265 9 view .LVU368
 1355              		.loc 13 265 9 is_stmt 0 view .LVU369
 1356              	.LBE342:
 1357              	.LBE341:
  76:USB_MIDI.cpp  ****                     if(note_msg.velocity != 0)
 1358              		.loc 9 76 21 is_stmt 1 view .LVU370
 1359 0154 BBF1000F 		cmp	fp, #0
 1360 0158 C8D0     		beq	.L83
  77:USB_MIDI.cpp  ****                         osc.SetFreq(mtof(note_msg.note));
 1361              		.loc 9 77 25 view .LVU371
 1362              	.LVL112:
 1363              	.LBB343:
 1364              	.LBI343:
 1365              		.file 14 "../../DaisySP//Source/Utility/dsp.h"
   1:../../DaisySP//Source/Utility/dsp.h **** /** Helpful defines, functions, and other utilities for use in/with daisysp modules.
   2:../../DaisySP//Source/Utility/dsp.h **** */
   3:../../DaisySP//Source/Utility/dsp.h **** #pragma once
   4:../../DaisySP//Source/Utility/dsp.h **** #ifndef DSY_CORE_DSP
   5:../../DaisySP//Source/Utility/dsp.h **** #define DSY_CORE_DSP
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 55


   6:../../DaisySP//Source/Utility/dsp.h **** #include <cassert>
   7:../../DaisySP//Source/Utility/dsp.h **** #include <cstdint>
   8:../../DaisySP//Source/Utility/dsp.h **** #include <random>
   9:../../DaisySP//Source/Utility/dsp.h **** #include <cmath>
  10:../../DaisySP//Source/Utility/dsp.h **** 
  11:../../DaisySP//Source/Utility/dsp.h **** /** PIs
  12:../../DaisySP//Source/Utility/dsp.h **** */
  13:../../DaisySP//Source/Utility/dsp.h **** #define PI_F 3.1415927410125732421875f
  14:../../DaisySP//Source/Utility/dsp.h **** #define TWOPI_F (2.0f * PI_F)
  15:../../DaisySP//Source/Utility/dsp.h **** #define HALFPI_F (PI_F * 0.5f)
  16:../../DaisySP//Source/Utility/dsp.h **** #define DSY_MIN(in, mn) (in < mn ? in : mn)
  17:../../DaisySP//Source/Utility/dsp.h **** #define DSY_MAX(in, mx) (in > mx ? in : mx)
  18:../../DaisySP//Source/Utility/dsp.h **** #define DSY_CLAMP(in, mn, mx) (DSY_MIN(DSY_MAX(in, mn), mx))
  19:../../DaisySP//Source/Utility/dsp.h **** #define DSY_COUNTOF(_arr) (sizeof(_arr) / sizeof(_arr[0]))
  20:../../DaisySP//Source/Utility/dsp.h **** 
  21:../../DaisySP//Source/Utility/dsp.h **** namespace daisysp
  22:../../DaisySP//Source/Utility/dsp.h **** {
  23:../../DaisySP//Source/Utility/dsp.h **** //Avoids division for random floats. e.g. rand() * kRandFrac
  24:../../DaisySP//Source/Utility/dsp.h **** static constexpr float kRandFrac = 1.f / (float)RAND_MAX;
  25:../../DaisySP//Source/Utility/dsp.h **** 
  26:../../DaisySP//Source/Utility/dsp.h **** //Convert from semitones to other units. e.g. 2 ^ (kOneTwelfth * x)
  27:../../DaisySP//Source/Utility/dsp.h **** static constexpr float kOneTwelfth = 1.f / 12.f;
  28:../../DaisySP//Source/Utility/dsp.h **** 
  29:../../DaisySP//Source/Utility/dsp.h **** /** efficient floating point min/max
  30:../../DaisySP//Source/Utility/dsp.h **** c/o stephen mccaul
  31:../../DaisySP//Source/Utility/dsp.h **** */
  32:../../DaisySP//Source/Utility/dsp.h **** inline float fmax(float a, float b)
  33:../../DaisySP//Source/Utility/dsp.h **** {
  34:../../DaisySP//Source/Utility/dsp.h ****     float r;
  35:../../DaisySP//Source/Utility/dsp.h **** #ifdef __arm__
  36:../../DaisySP//Source/Utility/dsp.h ****     asm("vmaxnm.f32 %[d], %[n], %[m]" : [d] "=t"(r) : [n] "t"(a), [m] "t"(b) :);
  37:../../DaisySP//Source/Utility/dsp.h **** #else
  38:../../DaisySP//Source/Utility/dsp.h ****     r = (a > b) ? a : b;
  39:../../DaisySP//Source/Utility/dsp.h **** #endif // __arm__
  40:../../DaisySP//Source/Utility/dsp.h ****     return r;
  41:../../DaisySP//Source/Utility/dsp.h **** }
  42:../../DaisySP//Source/Utility/dsp.h **** 
  43:../../DaisySP//Source/Utility/dsp.h **** inline float fmin(float a, float b)
  44:../../DaisySP//Source/Utility/dsp.h **** {
  45:../../DaisySP//Source/Utility/dsp.h ****     float r;
  46:../../DaisySP//Source/Utility/dsp.h **** #ifdef __arm__
  47:../../DaisySP//Source/Utility/dsp.h ****     asm("vminnm.f32 %[d], %[n], %[m]" : [d] "=t"(r) : [n] "t"(a), [m] "t"(b) :);
  48:../../DaisySP//Source/Utility/dsp.h **** #else
  49:../../DaisySP//Source/Utility/dsp.h ****     r = (a < b) ? a : b;
  50:../../DaisySP//Source/Utility/dsp.h **** #endif // __arm__
  51:../../DaisySP//Source/Utility/dsp.h ****     return r;
  52:../../DaisySP//Source/Utility/dsp.h **** }
  53:../../DaisySP//Source/Utility/dsp.h **** 
  54:../../DaisySP//Source/Utility/dsp.h **** /** quick fp clamp
  55:../../DaisySP//Source/Utility/dsp.h **** */
  56:../../DaisySP//Source/Utility/dsp.h **** inline float fclamp(float in, float min, float max)
  57:../../DaisySP//Source/Utility/dsp.h **** {
  58:../../DaisySP//Source/Utility/dsp.h ****     return fmin(fmax(in, min), max);
  59:../../DaisySP//Source/Utility/dsp.h **** }
  60:../../DaisySP//Source/Utility/dsp.h **** 
  61:../../DaisySP//Source/Utility/dsp.h **** /** From Musicdsp.org "Fast power and root estimates for 32bit floats)
  62:../../DaisySP//Source/Utility/dsp.h **** Original code by Stefan Stenzel
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 56


  63:../../DaisySP//Source/Utility/dsp.h **** These are approximations
  64:../../DaisySP//Source/Utility/dsp.h **** */
  65:../../DaisySP//Source/Utility/dsp.h **** inline float fastpower(float f, int n)
  66:../../DaisySP//Source/Utility/dsp.h **** {
  67:../../DaisySP//Source/Utility/dsp.h ****     long *lp, l;
  68:../../DaisySP//Source/Utility/dsp.h ****     lp = (long *)(&f);
  69:../../DaisySP//Source/Utility/dsp.h ****     l  = *lp;
  70:../../DaisySP//Source/Utility/dsp.h ****     l -= 0x3F800000;
  71:../../DaisySP//Source/Utility/dsp.h ****     l <<= (n - 1);
  72:../../DaisySP//Source/Utility/dsp.h ****     l += 0x3F800000;
  73:../../DaisySP//Source/Utility/dsp.h ****     *lp = l;
  74:../../DaisySP//Source/Utility/dsp.h ****     return f;
  75:../../DaisySP//Source/Utility/dsp.h **** }
  76:../../DaisySP//Source/Utility/dsp.h **** 
  77:../../DaisySP//Source/Utility/dsp.h **** inline float fastroot(float f, int n)
  78:../../DaisySP//Source/Utility/dsp.h **** {
  79:../../DaisySP//Source/Utility/dsp.h ****     long *lp, l;
  80:../../DaisySP//Source/Utility/dsp.h ****     lp = (long *)(&f);
  81:../../DaisySP//Source/Utility/dsp.h ****     l  = *lp;
  82:../../DaisySP//Source/Utility/dsp.h ****     l -= 0x3F800000;
  83:../../DaisySP//Source/Utility/dsp.h ****     l >>= (n = 1);
  84:../../DaisySP//Source/Utility/dsp.h ****     l += 0x3F800000;
  85:../../DaisySP//Source/Utility/dsp.h ****     *lp = l;
  86:../../DaisySP//Source/Utility/dsp.h ****     return f;
  87:../../DaisySP//Source/Utility/dsp.h **** }
  88:../../DaisySP//Source/Utility/dsp.h **** 
  89:../../DaisySP//Source/Utility/dsp.h **** /** From http://openaudio.blogspot.com/2017/02/faster-log10-and-pow.html
  90:../../DaisySP//Source/Utility/dsp.h **** No approximation, pow10f(x) gives a 90% speed increase over powf(10.f, x)
  91:../../DaisySP//Source/Utility/dsp.h **** */
  92:../../DaisySP//Source/Utility/dsp.h **** inline float pow10f(float f)
  93:../../DaisySP//Source/Utility/dsp.h **** {
  94:../../DaisySP//Source/Utility/dsp.h ****     return expf(2.302585092994046f * f);
  95:../../DaisySP//Source/Utility/dsp.h **** }
  96:../../DaisySP//Source/Utility/dsp.h **** 
  97:../../DaisySP//Source/Utility/dsp.h **** /* Original code for fastlog2f by Dr. Paul Beckmann from the ARM community forum, adapted from the 
  98:../../DaisySP//Source/Utility/dsp.h **** About 25% performance increase over std::log10f
  99:../../DaisySP//Source/Utility/dsp.h **** */
 100:../../DaisySP//Source/Utility/dsp.h **** inline float fastlog2f(float f)
 101:../../DaisySP//Source/Utility/dsp.h **** {
 102:../../DaisySP//Source/Utility/dsp.h ****     float frac;
 103:../../DaisySP//Source/Utility/dsp.h ****     int   exp;
 104:../../DaisySP//Source/Utility/dsp.h ****     frac = frexpf(fabsf(f), &exp);
 105:../../DaisySP//Source/Utility/dsp.h ****     f    = 1.23149591368684f;
 106:../../DaisySP//Source/Utility/dsp.h ****     f *= frac;
 107:../../DaisySP//Source/Utility/dsp.h ****     f += -4.11852516267426f;
 108:../../DaisySP//Source/Utility/dsp.h ****     f *= frac;
 109:../../DaisySP//Source/Utility/dsp.h ****     f += 6.02197014179219f;
 110:../../DaisySP//Source/Utility/dsp.h ****     f *= frac;
 111:../../DaisySP//Source/Utility/dsp.h ****     f += -3.13396450166353f;
 112:../../DaisySP//Source/Utility/dsp.h ****     f += exp;
 113:../../DaisySP//Source/Utility/dsp.h ****     return (f);
 114:../../DaisySP//Source/Utility/dsp.h **** }
 115:../../DaisySP//Source/Utility/dsp.h **** 
 116:../../DaisySP//Source/Utility/dsp.h **** inline float fastlog10f(float f)
 117:../../DaisySP//Source/Utility/dsp.h **** {
 118:../../DaisySP//Source/Utility/dsp.h ****     return fastlog2f(f) * 0.3010299956639812f;
 119:../../DaisySP//Source/Utility/dsp.h **** }
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 57


 120:../../DaisySP//Source/Utility/dsp.h **** 
 121:../../DaisySP//Source/Utility/dsp.h **** /** Midi to frequency helper
 122:../../DaisySP//Source/Utility/dsp.h **** */
 123:../../DaisySP//Source/Utility/dsp.h **** inline float mtof(float m)
 1366              		.loc 14 123 14 view .LVU372
 1367              	.LBB344:
 124:../../DaisySP//Source/Utility/dsp.h **** {
 125:../../DaisySP//Source/Utility/dsp.h ****     return powf(2, (m - 69.0f) / 12.0f) * 440.0f;
 1368              		.loc 14 125 5 view .LVU373
 1369              	.LBE344:
 1370              	.LBE343:
 1371              		.loc 9 77 36 is_stmt 0 view .LVU374
 1372 015a 07EE90AA 		vmov	s15, r10	@ int
 1373              	.LBB348:
 1374              	.LBB345:
 1375              		.loc 14 125 23 view .LVU375
 1376 015e 9FED187A 		vldr.32	s14, .L99+28
 1377              		.loc 14 125 16 view .LVU376
 1378 0162 F2EE080A 		vmov.f32	s1, #1.2e+1
 1379              	.LBE345:
 1380              	.LBE348:
 1381              		.loc 9 77 36 view .LVU377
 1382 0166 F8EE677A 		vcvt.f32.u32	s15, s15
 1383              	.LBB349:
 1384              	.LBB346:
 1385              		.loc 14 125 16 view .LVU378
 1386 016a B0EE000A 		vmov.f32	s0, #2.0e+0
 1387              		.loc 14 125 23 view .LVU379
 1388 016e 77EEC77A 		vsub.f32	s15, s15, s14
 1389              		.loc 14 125 16 view .LVU380
 1390 0172 C7EEA00A 		vdiv.f32	s1, s15, s1
 1391 0176 FFF7FEFF 		bl	powf
 1392              	.LVL113:
 1393              		.loc 14 125 43 view .LVU381
 1394 017a DFED127A 		vldr.32	s15, .L99+32
 1395              	.LBE346:
 1396              	.LBE349:
 1397              	.LBB350:
 1398              	.LBB351:
  55:../../DaisySP//Source/Synthesis/oscillator.h ****     }
  56:../../DaisySP//Source/Synthesis/oscillator.h **** 
  57:../../DaisySP//Source/Synthesis/oscillator.h **** 
  58:../../DaisySP//Source/Synthesis/oscillator.h ****     /** Changes the frequency of the Oscillator, and recalculates phase increment.
  59:../../DaisySP//Source/Synthesis/oscillator.h ****     */
  60:../../DaisySP//Source/Synthesis/oscillator.h ****     inline void SetFreq(const float f)
  61:../../DaisySP//Source/Synthesis/oscillator.h ****     {
  62:../../DaisySP//Source/Synthesis/oscillator.h ****         freq_      = f;
  63:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(f);
 1399              		.loc 6 63 34 view .LVU382
 1400 017e 1248     		ldr	r0, .L99+36
 1401              	.LBE351:
 1402              	.LBE350:
 1403              	.LBB353:
 1404              	.LBB347:
 1405              		.loc 14 125 43 view .LVU383
 1406 0180 20EE270A 		vmul.f32	s0, s0, s15
 1407              	.LVL114:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 58


 1408              		.loc 14 125 43 view .LVU384
 1409              	.LBE347:
 1410              	.LBE353:
 1411              	.LBB354:
 1412              	.LBI350:
  60:../../DaisySP//Source/Synthesis/oscillator.h ****     {
 1413              		.loc 6 60 17 is_stmt 1 view .LVU385
 1414              	.LBB352:
  62:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(f);
 1415              		.loc 6 62 9 view .LVU386
  62:../../DaisySP//Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(f);
 1416              		.loc 6 62 20 is_stmt 0 view .LVU387
 1417 0184 88ED020A 		vstr.32	s0, [r8, #8]
 1418              		.loc 6 63 9 is_stmt 1 view .LVU388
 1419              		.loc 6 63 34 is_stmt 0 view .LVU389
 1420 0188 FFF7FEFF 		bl	_ZN7daisysp10Oscillator12CalcPhaseIncEf
 1421              	.LVL115:
 1422              		.loc 6 63 20 view .LVU390
 1423 018c 88ED080A 		vstr.32	s0, [r8, #32]
  64:../../DaisySP//Source/Synthesis/oscillator.h ****     }
 1424              		.loc 6 64 5 view .LVU391
 1425 0190 ACE7     		b	.L83
 1426              	.LVL116:
 1427              	.L98:
 1428              		.loc 6 64 5 view .LVU392
 1429              	.LBE352:
 1430              	.LBE354:
 1431              	.LBE340:
 1432              	.LBE357:
 1433              	.LBE358:
 1434              	.LBB359:
 1435              	.LBB323:
 126:../../libDaisy//src/hid/midi.h ****             StartReceive();
 1436              		.loc 7 126 31 view .LVU393
 1437 0192 0A48     		ldr	r0, .L99+24
 125:../../libDaisy//src/hid/midi.h ****             transport_.FlushRx();
 1438              		.loc 7 125 21 view .LVU394
 1439 0194 2B71     		strb	r3, [r5, #4]
 126:../../libDaisy//src/hid/midi.h ****             StartReceive();
 1440              		.loc 7 126 31 view .LVU395
 1441 0196 FFF7FEFF 		bl	_ZN5daisy16MidiUsbTransport7FlushRxEv
 1442              	.LVL117:
 1443              	.LBB321:
 1444              	.LBI321:
 107:../../libDaisy//src/hid/midi.h **** 
 1445              		.loc 7 107 10 is_stmt 1 view .LVU396
 1446              	.LBB322:
 107:../../libDaisy//src/hid/midi.h **** 
 1447              		.loc 7 107 45 is_stmt 0 view .LVU397
 1448 019a 0848     		ldr	r0, .L99+24
 1449 019c FFF7FEFF 		bl	_ZN5daisy16MidiUsbTransport7StartRxEv
 1450              	.LVL118:
 107:../../libDaisy//src/hid/midi.h **** 
 1451              		.loc 7 107 49 view .LVU398
 1452 01a0 A4E7     		b	.L83
 1453              	.L100:
 1454 01a2 00BF     		.align	2
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 59


 1455              	.L99:
 1456 01a4 00000000 		.word	.LANCHOR1
 1457 01a8 00000000 		.word	midi
 1458 01ac 00000000 		.word	.LANCHOR2
 1459 01b0 0000C842 		.word	1120403456
 1460 01b4 DB0F4940 		.word	1078530011
 1461 01b8 00000000 		.word	_Z13AudioCallbackPKPKfPPfj
 1462 01bc A8900000 		.word	midi+37032
 1463 01c0 00008A42 		.word	1116340224
 1464 01c4 0000DC43 		.word	1138491392
 1465 01c8 00000000 		.word	.LANCHOR0
 1466              	.LBE322:
 1467              	.LBE321:
 1468              	.LBE323:
 1469              	.LBE359:
 1470              	.LBE360:
 1471              		.cfi_endproc
 1472              	.LFE4790:
 1474              		.section	.text.startup._GLOBAL__sub_I_hw,"ax",%progbits
 1475              		.align	1
 1476              		.p2align 2,,3
 1477              		.syntax unified
 1478              		.thumb
 1479              		.thumb_func
 1480              		.fpu fpv5-d16
 1482              	_GLOBAL__sub_I_hw:
 1483              	.LFB5372:
  78:USB_MIDI.cpp  ****                 }
  79:USB_MIDI.cpp  ****  
  80:USB_MIDI.cpp  ****                 break;
  81:USB_MIDI.cpp  ****                     // Since we only care about note-on messages in this example
  82:USB_MIDI.cpp  ****                     // we'll ignore all other message types
  83:USB_MIDI.cpp  ****                 default: break;
  84:USB_MIDI.cpp  ****             }
  85:USB_MIDI.cpp  ****         }
  86:USB_MIDI.cpp  ****     }
  87:USB_MIDI.cpp  **** }
 1484              		.loc 9 87 1 is_stmt 1 view -0
 1485              		.cfi_startproc
 1486              		@ args = 0, pretend = 0, frame = 0
 1487              		@ frame_needed = 0, uses_anonymous_args = 0
 1488              	.LBB392:
 1489              	.LBI392:
 1490              		.loc 9 87 1 view .LVU400
 1491              	.LVL119:
 1492              	.LBB393:
 1493              	.LBB394:
 1494              	.LBI394:
  21:../../libDaisy//src/daisy_seed.h ****     ~DaisySeed() {}
 1495              		.loc 1 21 5 view .LVU401
 1496              	.LBB395:
 1497              	.LBB396:
 1498              	.LBI396:
 1499              		.file 15 "../../libDaisy//src/per/qspi.h"
   1:../../libDaisy//src/per/qspi.h **** #ifndef DSY_QSPI
   2:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI /**< Macro */
   3:../../libDaisy//src/per/qspi.h **** 
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 60


   4:../../libDaisy//src/per/qspi.h **** #ifndef UNIT_TEST // for unit tests, a dummy implementation
   5:../../libDaisy//src/per/qspi.h **** 
   6:../../libDaisy//src/per/qspi.h **** #include <cstdint>
   7:../../libDaisy//src/per/qspi.h **** #include "daisy_core.h" // Added for dsy_gpio_pin typedef
   8:../../libDaisy//src/per/qspi.h **** 
   9:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI_TEXT       \
  10:../../libDaisy//src/per/qspi.h ****     __attribute__((section( \
  11:../../libDaisy//src/per/qspi.h ****         ".qspiflash_text"))) /**< used for reading memory in memory_mapped mode. */
  12:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI_DATA       \
  13:../../libDaisy//src/per/qspi.h ****     __attribute__((section( \
  14:../../libDaisy//src/per/qspi.h ****         ".qspiflash_data"))) /**< used for reading memory in memory_mapped mode. */
  15:../../libDaisy//src/per/qspi.h **** #define DSY_QSPI_BSS        \
  16:../../libDaisy//src/per/qspi.h ****     __attribute__((section( \
  17:../../libDaisy//src/per/qspi.h ****         ".qspiflash_bss"))) /**< used for reading memory in memory_mapped mode. */
  18:../../libDaisy//src/per/qspi.h **** 
  19:../../libDaisy//src/per/qspi.h **** namespace daisy
  20:../../libDaisy//src/per/qspi.h **** {
  21:../../libDaisy//src/per/qspi.h **** /** @addtogroup serial
  22:../../libDaisy//src/per/qspi.h **** @{
  23:../../libDaisy//src/per/qspi.h **** */
  24:../../libDaisy//src/per/qspi.h **** 
  25:../../libDaisy//src/per/qspi.h **** /** 
  26:../../libDaisy//src/per/qspi.h ****  Driver for QSPI peripheral to interface with external flash memory. \n 
  27:../../libDaisy//src/per/qspi.h ****     Currently supported QSPI Devices: \n 
  28:../../libDaisy//src/per/qspi.h ****     * IS25LP080D
  29:../../libDaisy//src/per/qspi.h **** */
  30:../../libDaisy//src/per/qspi.h **** class QSPIHandle
  31:../../libDaisy//src/per/qspi.h **** {
  32:../../libDaisy//src/per/qspi.h ****   public:
  33:../../libDaisy//src/per/qspi.h ****     enum Result
  34:../../libDaisy//src/per/qspi.h ****     {
  35:../../libDaisy//src/per/qspi.h ****         OK = 0,
  36:../../libDaisy//src/per/qspi.h ****         ERR
  37:../../libDaisy//src/per/qspi.h ****     };
  38:../../libDaisy//src/per/qspi.h **** 
  39:../../libDaisy//src/per/qspi.h ****     /** Indicates the current status of the module. 
  40:../../libDaisy//src/per/qspi.h ****          *  Warnings are indicated by a leading W.
  41:../../libDaisy//src/per/qspi.h ****          *  Errors are indicated by a leading E and cause an immediate exit.
  42:../../libDaisy//src/per/qspi.h ****          * 
  43:../../libDaisy//src/per/qspi.h ****          *  \param GOOD - No errors have been reported.
  44:../../libDaisy//src/per/qspi.h ****          *  \param E_HAL_ERROR - HAL code did not return HAL_OK.
  45:../../libDaisy//src/per/qspi.h ****          *  \param E_SWITCHING_MODES - An error was encountered while switching QSPI peripheral mod
  46:../../libDaisy//src/per/qspi.h ****          *  \param E_INVALID_MODE - QSPI should not be written to while the program is executing fr
  47:../../libDaisy//src/per/qspi.h ****          */
  48:../../libDaisy//src/per/qspi.h ****     enum Status
  49:../../libDaisy//src/per/qspi.h ****     {
  50:../../libDaisy//src/per/qspi.h ****         GOOD = 0,
  51:../../libDaisy//src/per/qspi.h ****         E_HAL_ERROR,
  52:../../libDaisy//src/per/qspi.h ****         E_SWITCHING_MODES,
  53:../../libDaisy//src/per/qspi.h ****         E_INVALID_MODE,
  54:../../libDaisy//src/per/qspi.h ****     };
  55:../../libDaisy//src/per/qspi.h **** 
  56:../../libDaisy//src/per/qspi.h ****     /** Configuration structure for interfacing with QSPI Driver */
  57:../../libDaisy//src/per/qspi.h ****     struct Config
  58:../../libDaisy//src/per/qspi.h ****     {
  59:../../libDaisy//src/per/qspi.h ****         /** Flash Devices supported. (Both of these are more-or-less the same, just different sizes
  60:../../libDaisy//src/per/qspi.h ****         enum Device
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 61


  61:../../libDaisy//src/per/qspi.h ****         {
  62:../../libDaisy//src/per/qspi.h ****             IS25LP080D,  /**< & */
  63:../../libDaisy//src/per/qspi.h ****             IS25LP064A,  /**< & */
  64:../../libDaisy//src/per/qspi.h ****             DEVICE_LAST, /**< & */
  65:../../libDaisy//src/per/qspi.h ****         };
  66:../../libDaisy//src/per/qspi.h **** 
  67:../../libDaisy//src/per/qspi.h ****         /** 
  68:../../libDaisy//src/per/qspi.h ****         Modes of operation.
  69:../../libDaisy//src/per/qspi.h ****         Memory Mapped mode: QSPI configured so that the QSPI can be
  70:../../libDaisy//src/per/qspi.h ****         read from starting address 0x90000000. Writing is not
  71:../../libDaisy//src/per/qspi.h ****         possible in this mode. \n 
  72:../../libDaisy//src/per/qspi.h ****         Indirect Polling mode: Device driver enabled. 
  73:../../libDaisy//src/per/qspi.h ****         */
  74:../../libDaisy//src/per/qspi.h ****         enum Mode
  75:../../libDaisy//src/per/qspi.h ****         {
  76:../../libDaisy//src/per/qspi.h ****             MEMORY_MAPPED,    /**< & */
  77:../../libDaisy//src/per/qspi.h ****             INDIRECT_POLLING, /**< & */
  78:../../libDaisy//src/per/qspi.h ****             MODE_LAST,
  79:../../libDaisy//src/per/qspi.h ****         };
  80:../../libDaisy//src/per/qspi.h **** 
  81:../../libDaisy//src/per/qspi.h ****         //SCK,  CE# (active low)
  82:../../libDaisy//src/per/qspi.h ****         struct
  83:../../libDaisy//src/per/qspi.h ****         {
  84:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io0; /**< & */
  85:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io1; /**< & */
  86:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io2; /**< & */
  87:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin io3; /**< & */
  88:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin clk; /**< & */
  89:../../libDaisy//src/per/qspi.h ****             dsy_gpio_pin ncs; /**< & */
  90:../../libDaisy//src/per/qspi.h ****         } pin_config;
  91:../../libDaisy//src/per/qspi.h **** 
  92:../../libDaisy//src/per/qspi.h ****         Device device;
  93:../../libDaisy//src/per/qspi.h ****         Mode   mode;
  94:../../libDaisy//src/per/qspi.h ****     };
  95:../../libDaisy//src/per/qspi.h **** 
  96:../../libDaisy//src/per/qspi.h ****     /** 
  97:../../libDaisy//src/per/qspi.h ****         Initializes QSPI peripheral, and Resets, and prepares memory for access.
  98:../../libDaisy//src/per/qspi.h ****         \param config should be populated with the mode, device and pin_config before calling this 
  99:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 100:../../libDaisy//src/per/qspi.h ****         */
 101:../../libDaisy//src/per/qspi.h ****     Result Init(const Config& config);
 102:../../libDaisy//src/per/qspi.h **** 
 103:../../libDaisy//src/per/qspi.h ****     /** Returns the current config. */
 104:../../libDaisy//src/per/qspi.h ****     const Config& GetConfig() const;
 105:../../libDaisy//src/per/qspi.h **** 
 106:../../libDaisy//src/per/qspi.h ****     // Couldn't this just be called before anything else in init? That
 107:../../libDaisy//src/per/qspi.h ****     // would make manually calling it unnecessary.
 108:../../libDaisy//src/per/qspi.h ****     /** 
 109:../../libDaisy//src/per/qspi.h ****         Deinitializes the peripheral
 110:../../libDaisy//src/per/qspi.h ****         This should be called before reinitializing QSPI in a different mode.
 111:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 112:../../libDaisy//src/per/qspi.h ****         */
 113:../../libDaisy//src/per/qspi.h ****     Result DeInit();
 114:../../libDaisy//src/per/qspi.h **** 
 115:../../libDaisy//src/per/qspi.h ****     /** 
 116:../../libDaisy//src/per/qspi.h ****         Writes a single page to to the specified address on the QSPI chip.
 117:../../libDaisy//src/per/qspi.h ****         For IS25LP*, page size is 256 bytes.
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 62


 118:../../libDaisy//src/per/qspi.h ****         \param address Address to write to
 119:../../libDaisy//src/per/qspi.h ****         \param size Buffer size
 120:../../libDaisy//src/per/qspi.h ****         \param buffer Buffer to write
 121:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 122:../../libDaisy//src/per/qspi.h ****         */
 123:../../libDaisy//src/per/qspi.h ****     Result WritePage(uint32_t address, uint32_t size, uint8_t* buffer);
 124:../../libDaisy//src/per/qspi.h **** 
 125:../../libDaisy//src/per/qspi.h ****     /** 
 126:../../libDaisy//src/per/qspi.h ****         Writes data in buffer to to the QSPI. Starting at address to address+size 
 127:../../libDaisy//src/per/qspi.h ****         \param address Address to write to
 128:../../libDaisy//src/per/qspi.h ****         \param size Buffer size
 129:../../libDaisy//src/per/qspi.h ****         \param buffer Buffer to write
 130:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 131:../../libDaisy//src/per/qspi.h ****         */
 132:../../libDaisy//src/per/qspi.h ****     Result Write(uint32_t address, uint32_t size, uint8_t* buffer);
 133:../../libDaisy//src/per/qspi.h **** 
 134:../../libDaisy//src/per/qspi.h ****     /** 
 135:../../libDaisy//src/per/qspi.h ****         Erases the area specified on the chip.
 136:../../libDaisy//src/per/qspi.h ****         Erasures will happen by 4K, 32K or 64K increments.
 137:../../libDaisy//src/per/qspi.h ****         Smallest erase possible is 4kB at a time. (on IS25LP*)
 138:../../libDaisy//src/per/qspi.h ****         \param start_addr Address to begin erasing from
 139:../../libDaisy//src/per/qspi.h ****         \param end_addr  Address to stop erasing at
 140:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 141:../../libDaisy//src/per/qspi.h ****         */
 142:../../libDaisy//src/per/qspi.h ****     Result Erase(uint32_t start_addr, uint32_t end_addr);
 143:../../libDaisy//src/per/qspi.h **** 
 144:../../libDaisy//src/per/qspi.h ****     /**  
 145:../../libDaisy//src/per/qspi.h ****          Erases a single sector of the chip.  
 146:../../libDaisy//src/per/qspi.h ****         TODO: Document the size of this function. 
 147:../../libDaisy//src/per/qspi.h ****         \param address Address of sector to erase
 148:../../libDaisy//src/per/qspi.h ****         \return Result::OK or Result::ERR
 149:../../libDaisy//src/per/qspi.h ****         */
 150:../../libDaisy//src/per/qspi.h ****     Result EraseSector(uint32_t address);
 151:../../libDaisy//src/per/qspi.h **** 
 152:../../libDaisy//src/per/qspi.h ****     /** Returns the current class status. Useful for debugging.
 153:../../libDaisy//src/per/qspi.h ****      *  \returns Status
 154:../../libDaisy//src/per/qspi.h ****      */
 155:../../libDaisy//src/per/qspi.h ****     Status GetStatus();
 156:../../libDaisy//src/per/qspi.h **** 
 157:../../libDaisy//src/per/qspi.h ****     /** Returns a pointer to the actual memory used 
 158:../../libDaisy//src/per/qspi.h ****      *  The memory at this address is read-only
 159:../../libDaisy//src/per/qspi.h ****      *  to write to it use the Write function.
 160:../../libDaisy//src/per/qspi.h ****      * 
 161:../../libDaisy//src/per/qspi.h ****      *  \param offset returns the pointer starting this 
 162:../../libDaisy//src/per/qspi.h ****      *                many bytes into the memory
 163:../../libDaisy//src/per/qspi.h ****     */
 164:../../libDaisy//src/per/qspi.h ****     void* GetData(uint32_t offset = 0);
 165:../../libDaisy//src/per/qspi.h **** 
 166:../../libDaisy//src/per/qspi.h ****     QSPIHandle() : pimpl_(nullptr) {}
 1500              		.loc 15 166 5 view .LVU402
 1501              	.LBE396:
 1502              	.LBE395:
 1503              	.LBE394:
 1504              	.LBE393:
 1505              	.LBE392:
 1506              		.loc 9 87 1 is_stmt 0 view .LVU403
 1507 0000 38B5     		push	{r3, r4, r5, lr}
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 63


 1508              		.cfi_def_cfa_offset 16
 1509              		.cfi_offset 3, -16
 1510              		.cfi_offset 4, -12
 1511              		.cfi_offset 5, -8
 1512              		.cfi_offset 14, -4
 1513              	.LBB444:
 1514              	.LBB442:
 1515              	.LBB414:
 1516              	.LBB412:
 1517              	.LBB401:
 1518              	.LBB397:
 1519              	.LBB398:
 1520              		.loc 15 166 34 view .LVU404
 1521 0002 1248     		ldr	r0, .L103
 1522 0004 0024     		movs	r4, #0
 1523              	.LBE398:
 1524              	.LBE397:
 1525              	.LBE401:
 1526              	.LBE412:
 1527              	.LBE414:
  15:USB_MIDI.cpp  **** MidiUsbHandler midi;
 1528              		.loc 9 15 16 view .LVU405
 1529 0006 124A     		ldr	r2, .L103+4
 1530 0008 1249     		ldr	r1, .L103+8
 1531              	.LBB415:
 1532              	.LBB413:
 1533              	.LBB402:
 1534              	.LBB400:
 1535              	.LBB399:
 1536              		.loc 15 166 34 view .LVU406
 1537 000a 0460     		str	r4, [r0]
 1538              	.LVL120:
 1539              		.loc 15 166 34 view .LVU407
 1540              	.LBE399:
 1541              	.LBE400:
 1542              	.LBE402:
 1543              	.LBB403:
 1544              	.LBI403:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1545              		.loc 5 95 5 is_stmt 1 view .LVU408
 1546              	.LBB404:
 1547              	.LBB405:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1548              		.loc 5 95 35 is_stmt 0 view .LVU409
 1549 000c 4461     		str	r4, [r0, #20]
 1550              	.LVL121:
  95:../../libDaisy//src/hid/audio.h ****     ~AudioHandle() {}
 1551              		.loc 5 95 35 view .LVU410
 1552              	.LBE405:
 1553              	.LBE404:
 1554              	.LBE403:
 1555              	.LBB406:
 1556              	.LBI406:
  92:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
 1557              		.loc 4 92 5 is_stmt 1 view .LVU411
  92:../../libDaisy//src/per/adc.h ****     ~AdcHandle() {}
 1558              		.loc 4 92 5 is_stmt 0 view .LVU412
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 64


 1559              	.LBE406:
 1560              	.LBB407:
 1561              	.LBI407:
 1562              		.file 16 "../../libDaisy//src/per/dac.h"
   1:../../libDaisy//src/per/dac.h **** #pragma once
   2:../../libDaisy//src/per/dac.h **** #ifndef DSY_DAC_H
   3:../../libDaisy//src/per/dac.h **** #define DSY_DAC_H
   4:../../libDaisy//src/per/dac.h **** 
   5:../../libDaisy//src/per/dac.h **** #include "daisy_core.h"
   6:../../libDaisy//src/per/dac.h **** 
   7:../../libDaisy//src/per/dac.h **** namespace daisy
   8:../../libDaisy//src/per/dac.h **** {
   9:../../libDaisy//src/per/dac.h **** /** @brief DAC handle for Built-in DAC Peripheral 
  10:../../libDaisy//src/per/dac.h ****  *  @ingroup per_analog
  11:../../libDaisy//src/per/dac.h ****  ** 
  12:../../libDaisy//src/per/dac.h ****  ** For now only Normal Mode is supported,
  13:../../libDaisy//src/per/dac.h ****  ** Sample and hold mode provides reduced power consumption, but requires a bit more setup.
  14:../../libDaisy//src/per/dac.h ****  **
  15:../../libDaisy//src/per/dac.h ****  ** For now connecting the DAC through other internal peripherals is also not supported.
  16:../../libDaisy//src/per/dac.h ****  **
  17:../../libDaisy//src/per/dac.h ****  ** Since the DAC channels have dedicated pins we don't need to pass in a pin config like with
  18:../../libDaisy//src/per/dac.h ****  ** other modules. However, it is still important to not try to use the DAC pins for anything else.
  19:../../libDaisy//src/per/dac.h ****  ** DAC Channel 1 is on PA4, and DAC Channel 2 is on PA5
  20:../../libDaisy//src/per/dac.h ****  ***/
  21:../../libDaisy//src/per/dac.h **** class DacHandle
  22:../../libDaisy//src/per/dac.h **** {
  23:../../libDaisy//src/per/dac.h ****   public:
  24:../../libDaisy//src/per/dac.h ****     /** Return Values for the DacHandle class */
  25:../../libDaisy//src/per/dac.h ****     enum class Result
  26:../../libDaisy//src/per/dac.h ****     {
  27:../../libDaisy//src/per/dac.h ****         OK,
  28:../../libDaisy//src/per/dac.h ****         ERR,
  29:../../libDaisy//src/per/dac.h ****     };
  30:../../libDaisy//src/per/dac.h **** 
  31:../../libDaisy//src/per/dac.h ****     /** Selects which channel(s) will be configured for use. */
  32:../../libDaisy//src/per/dac.h ****     enum class Channel
  33:../../libDaisy//src/per/dac.h ****     {
  34:../../libDaisy//src/per/dac.h ****         ONE,
  35:../../libDaisy//src/per/dac.h ****         TWO,
  36:../../libDaisy//src/per/dac.h ****         BOTH,
  37:../../libDaisy//src/per/dac.h ****     };
  38:../../libDaisy//src/per/dac.h **** 
  39:../../libDaisy//src/per/dac.h ****     /** Sets the Mode for the DAC channels.
  40:../../libDaisy//src/per/dac.h ****      **
  41:../../libDaisy//src/per/dac.h ****      ** Polling mode uses the blocking mode to transmit a single value at a time.
  42:../../libDaisy//src/per/dac.h ****      **
  43:../../libDaisy//src/per/dac.h ****      ** DMA mode uses a buffer, and periodically transmits it triggering a 
  44:../../libDaisy//src/per/dac.h ****      ** callback to fill the buffer when it is ready for more samples.
  45:../../libDaisy//src/per/dac.h ****      ***/
  46:../../libDaisy//src/per/dac.h ****     enum class Mode
  47:../../libDaisy//src/per/dac.h ****     {
  48:../../libDaisy//src/per/dac.h ****         POLLING,
  49:../../libDaisy//src/per/dac.h ****         DMA,
  50:../../libDaisy//src/per/dac.h ****     };
  51:../../libDaisy//src/per/dac.h **** 
  52:../../libDaisy//src/per/dac.h ****     /** Sets the number of bits per sample transmitted out of the DAC.
  53:../../libDaisy//src/per/dac.h ****      ** The output range will be: 0V - VDDA
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 65


  54:../../libDaisy//src/per/dac.h ****      ** The resolution will be roughly: bitdepth / (VDDA - 0V) 
  55:../../libDaisy//src/per/dac.h ****      ***/
  56:../../libDaisy//src/per/dac.h ****     enum class BitDepth
  57:../../libDaisy//src/per/dac.h ****     {
  58:../../libDaisy//src/per/dac.h ****         BITS_8,
  59:../../libDaisy//src/per/dac.h ****         BITS_12
  60:../../libDaisy//src/per/dac.h ****     };
  61:../../libDaisy//src/per/dac.h **** 
  62:../../libDaisy//src/per/dac.h ****     /** Sets whether the DAC output is buffered for higher drive ability. */
  63:../../libDaisy//src/per/dac.h ****     enum class BufferState
  64:../../libDaisy//src/per/dac.h ****     {
  65:../../libDaisy//src/per/dac.h ****         ENABLED,
  66:../../libDaisy//src/per/dac.h ****         DISABLED,
  67:../../libDaisy//src/per/dac.h ****     };
  68:../../libDaisy//src/per/dac.h **** 
  69:../../libDaisy//src/per/dac.h ****     /** Configuration structure for initializing the DAC structure. */
  70:../../libDaisy//src/per/dac.h ****     struct Config
  71:../../libDaisy//src/per/dac.h ****     {
  72:../../libDaisy//src/per/dac.h ****         /** Target Samplerate in Hz used to configure the internal 
  73:../../libDaisy//src/per/dac.h ****          ** timebase for DMA mode. Does nothing in POLLING mode.
  74:../../libDaisy//src/per/dac.h ****          ** If the value is 0 at Init time this will default to 48000Hz 
  75:../../libDaisy//src/per/dac.h ****          ** otherwise the driver will attempt meet the target.*/
  76:../../libDaisy//src/per/dac.h ****         uint32_t target_samplerate;
  77:../../libDaisy//src/per/dac.h **** 
  78:../../libDaisy//src/per/dac.h ****         Channel     chn;
  79:../../libDaisy//src/per/dac.h ****         Mode        mode;
  80:../../libDaisy//src/per/dac.h ****         BitDepth    bitdepth;
  81:../../libDaisy//src/per/dac.h ****         BufferState buff_state;
  82:../../libDaisy//src/per/dac.h ****     };
  83:../../libDaisy//src/per/dac.h **** 
  84:../../libDaisy//src/per/dac.h ****     DacHandle() : pimpl_(nullptr) {}
 1563              		.loc 16 84 5 is_stmt 1 view .LVU413
 1564              	.LBB408:
 1565              	.LBB409:
 1566              		.loc 16 84 33 is_stmt 0 view .LVU414
 1567 000e 0462     		str	r4, [r0, #32]
 1568              	.LVL122:
 1569              		.loc 16 84 33 view .LVU415
 1570              	.LBE409:
 1571              	.LBE408:
 1572              	.LBE407:
 1573              	.LBB410:
 1574              	.LBI410:
  40:../../libDaisy//src/hid/usb.h **** 
 1575              		.loc 3 40 5 is_stmt 1 view .LVU416
  40:../../libDaisy//src/hid/usb.h **** 
 1576              		.loc 3 40 5 is_stmt 0 view .LVU417
 1577              	.LBE410:
 1578              	.LBB411:
 1579              	.LBI411:
  77:../../libDaisy//src/sys/system.h ****     ~System() {}
 1580              		.loc 2 77 5 is_stmt 1 view .LVU418
  77:../../libDaisy//src/sys/system.h ****     ~System() {}
 1581              		.loc 2 77 5 is_stmt 0 view .LVU419
 1582              	.LBE411:
 1583              	.LBE413:
 1584              	.LBE415:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 66


  15:USB_MIDI.cpp  **** MidiUsbHandler midi;
 1585              		.loc 9 15 16 view .LVU420
 1586 0010 FFF7FEFF 		bl	__aeabi_atexit
 1587              	.LVL123:
 1588              	.LBB416:
 1589              	.LBI416:
  84:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 1590              		.loc 7 84 5 is_stmt 1 view .LVU421
 1591              	.LBB417:
 1592              	.LBB418:
 1593              	.LBB419:
 1594              	.LBI419:
 1595              		.file 17 "../../libDaisy//src/per/uart.h"
   1:../../libDaisy//src/per/uart.h **** /* 
   2:../../libDaisy//src/per/uart.h **** TODO
   3:../../libDaisy//src/per/uart.h **** - UART1 defaults to DMA, add flexible config for DMA on all periphs
   4:../../libDaisy//src/per/uart.h **** - Transmit function improvements.
   5:../../libDaisy//src/per/uart.h **** - Overflow handling, etc. for Rx Queue.
   6:../../libDaisy//src/per/uart.h **** */
   7:../../libDaisy//src/per/uart.h **** 
   8:../../libDaisy//src/per/uart.h **** #pragma once
   9:../../libDaisy//src/per/uart.h **** #ifndef DSY_UART_H
  10:../../libDaisy//src/per/uart.h **** #define DSY_UART_H /**< macro */
  11:../../libDaisy//src/per/uart.h **** #include "daisy_core.h"
  12:../../libDaisy//src/per/uart.h **** 
  13:../../libDaisy//src/per/uart.h **** 
  14:../../libDaisy//src/per/uart.h **** namespace daisy
  15:../../libDaisy//src/per/uart.h **** {
  16:../../libDaisy//src/per/uart.h **** /** @addtogroup serial
  17:../../libDaisy//src/per/uart.h ****     @{
  18:../../libDaisy//src/per/uart.h ****     */
  19:../../libDaisy//src/per/uart.h **** 
  20:../../libDaisy//src/per/uart.h **** /** 
  21:../../libDaisy//src/per/uart.h ****     Uart Peripheral
  22:../../libDaisy//src/per/uart.h ****     @author shensley
  23:../../libDaisy//src/per/uart.h ****     @date March 2020
  24:../../libDaisy//src/per/uart.h ****     */
  25:../../libDaisy//src/per/uart.h **** class UartHandler
  26:../../libDaisy//src/per/uart.h **** {
  27:../../libDaisy//src/per/uart.h ****   public:
  28:../../libDaisy//src/per/uart.h ****     struct Config
  29:../../libDaisy//src/per/uart.h ****     {
  30:../../libDaisy//src/per/uart.h ****         enum class Peripheral
  31:../../libDaisy//src/per/uart.h ****         {
  32:../../libDaisy//src/per/uart.h ****             USART_1,
  33:../../libDaisy//src/per/uart.h ****             USART_2,
  34:../../libDaisy//src/per/uart.h ****             USART_3,
  35:../../libDaisy//src/per/uart.h ****             UART_4,
  36:../../libDaisy//src/per/uart.h ****             UART_5,
  37:../../libDaisy//src/per/uart.h ****             USART_6,
  38:../../libDaisy//src/per/uart.h ****             UART_7,
  39:../../libDaisy//src/per/uart.h ****             UART_8,
  40:../../libDaisy//src/per/uart.h ****             LPUART_1,
  41:../../libDaisy//src/per/uart.h ****         };
  42:../../libDaisy//src/per/uart.h **** 
  43:../../libDaisy//src/per/uart.h ****         enum class StopBits
  44:../../libDaisy//src/per/uart.h ****         {
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 67


  45:../../libDaisy//src/per/uart.h ****             BITS_0_5,
  46:../../libDaisy//src/per/uart.h ****             BITS_1,
  47:../../libDaisy//src/per/uart.h ****             BITS_1_5,
  48:../../libDaisy//src/per/uart.h ****             BITS_2,
  49:../../libDaisy//src/per/uart.h ****         };
  50:../../libDaisy//src/per/uart.h **** 
  51:../../libDaisy//src/per/uart.h ****         enum class Parity
  52:../../libDaisy//src/per/uart.h ****         {
  53:../../libDaisy//src/per/uart.h ****             NONE,
  54:../../libDaisy//src/per/uart.h ****             EVEN,
  55:../../libDaisy//src/per/uart.h ****             ODD,
  56:../../libDaisy//src/per/uart.h ****         };
  57:../../libDaisy//src/per/uart.h **** 
  58:../../libDaisy//src/per/uart.h ****         enum class Mode
  59:../../libDaisy//src/per/uart.h ****         {
  60:../../libDaisy//src/per/uart.h ****             RX,
  61:../../libDaisy//src/per/uart.h ****             TX,
  62:../../libDaisy//src/per/uart.h ****             TX_RX,
  63:../../libDaisy//src/per/uart.h ****         };
  64:../../libDaisy//src/per/uart.h **** 
  65:../../libDaisy//src/per/uart.h ****         enum class WordLength
  66:../../libDaisy//src/per/uart.h ****         {
  67:../../libDaisy//src/per/uart.h ****             BITS_7,
  68:../../libDaisy//src/per/uart.h ****             BITS_8,
  69:../../libDaisy//src/per/uart.h ****             BITS_9,
  70:../../libDaisy//src/per/uart.h ****         };
  71:../../libDaisy//src/per/uart.h **** 
  72:../../libDaisy//src/per/uart.h ****         struct
  73:../../libDaisy//src/per/uart.h ****         {
  74:../../libDaisy//src/per/uart.h ****             dsy_gpio_pin tx; /**< & */
  75:../../libDaisy//src/per/uart.h ****             dsy_gpio_pin rx; /**< & */
  76:../../libDaisy//src/per/uart.h ****         } pin_config;        /**< & */
  77:../../libDaisy//src/per/uart.h **** 
  78:../../libDaisy//src/per/uart.h ****         Config()
  79:../../libDaisy//src/per/uart.h ****         {
  80:../../libDaisy//src/per/uart.h ****             // user must init periph, pin_config, and mode
  81:../../libDaisy//src/per/uart.h ****             stopbits   = StopBits::BITS_1;
  82:../../libDaisy//src/per/uart.h ****             parity     = Parity::NONE;
  83:../../libDaisy//src/per/uart.h ****             wordlength = WordLength::BITS_8;
  84:../../libDaisy//src/per/uart.h ****             baudrate   = 4800;
  85:../../libDaisy//src/per/uart.h ****             // baudrate   = 31250;
  86:../../libDaisy//src/per/uart.h ****         }
  87:../../libDaisy//src/per/uart.h **** 
  88:../../libDaisy//src/per/uart.h ****         Peripheral periph;
  89:../../libDaisy//src/per/uart.h ****         StopBits   stopbits;
  90:../../libDaisy//src/per/uart.h ****         Parity     parity;
  91:../../libDaisy//src/per/uart.h ****         Mode       mode;
  92:../../libDaisy//src/per/uart.h ****         WordLength wordlength;
  93:../../libDaisy//src/per/uart.h ****         uint32_t   baudrate;
  94:../../libDaisy//src/per/uart.h ****     };
  95:../../libDaisy//src/per/uart.h **** 
  96:../../libDaisy//src/per/uart.h **** 
  97:../../libDaisy//src/per/uart.h ****     UartHandler() : pimpl_(nullptr) {}
 1596              		.loc 17 97 5 view .LVU422
 1597              		.loc 17 97 5 is_stmt 0 view .LVU423
 1598              	.LBE419:
 1599              	.LBB424:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 68


 1600              	.LBI424:
  21:../../libDaisy//src/util/ringbuffer.h **** 
 1601              		.loc 10 21 5 is_stmt 1 view .LVU424
  21:../../libDaisy//src/util/ringbuffer.h **** 
 1602              		.loc 10 21 5 is_stmt 0 view .LVU425
 1603              	.LBE424:
 1604              	.LBB425:
 1605              	.LBI425:
  19:../../libDaisy//src/hid/usb_midi.h **** 
  20:../../libDaisy//src/hid/usb_midi.h ****     struct Config
  21:../../libDaisy//src/hid/usb_midi.h ****     {
  22:../../libDaisy//src/hid/usb_midi.h ****         enum Periph
  23:../../libDaisy//src/hid/usb_midi.h ****         {
  24:../../libDaisy//src/hid/usb_midi.h ****             INTERNAL = 0,
  25:../../libDaisy//src/hid/usb_midi.h ****             EXTERNAL
  26:../../libDaisy//src/hid/usb_midi.h ****         };
  27:../../libDaisy//src/hid/usb_midi.h **** 
  28:../../libDaisy//src/hid/usb_midi.h ****         Periph periph;
  29:../../libDaisy//src/hid/usb_midi.h ****     };
  30:../../libDaisy//src/hid/usb_midi.h **** 
  31:../../libDaisy//src/hid/usb_midi.h ****     void Init(Config config);
  32:../../libDaisy//src/hid/usb_midi.h **** 
  33:../../libDaisy//src/hid/usb_midi.h ****     void    StartRx();
  34:../../libDaisy//src/hid/usb_midi.h ****     size_t  Readable();
  35:../../libDaisy//src/hid/usb_midi.h ****     uint8_t Rx();
  36:../../libDaisy//src/hid/usb_midi.h ****     bool    RxActive();
  37:../../libDaisy//src/hid/usb_midi.h ****     void    FlushRx();
  38:../../libDaisy//src/hid/usb_midi.h ****     void    Tx(uint8_t* buffer, size_t size);
  39:../../libDaisy//src/hid/usb_midi.h **** 
  40:../../libDaisy//src/hid/usb_midi.h ****     class Impl;
  41:../../libDaisy//src/hid/usb_midi.h **** 
  42:../../libDaisy//src/hid/usb_midi.h ****     MidiUsbTransport() : pimpl_(nullptr) {}
 1606              		.loc 8 42 5 is_stmt 1 view .LVU426
 1607              		.loc 8 42 5 is_stmt 0 view .LVU427
 1608              	.LBE425:
 1609              	.LBB430:
 1610              	.LBB420:
 1611              	.LBB421:
 1612              		.loc 17 97 35 view .LVU428
 1613 0014 1048     		ldr	r0, .L103+12
 1614              	.LBE421:
 1615              	.LBE420:
 1616              	.LBE430:
 1617              	.LBE418:
  84:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 1618              		.loc 7 84 5 view .LVU429
 1619 0016 114D     		ldr	r5, .L103+16
 1620 0018 4FF60F01 		movw	r1, #63503
 1621              	.LBB434:
 1622              	.LBB431:
 1623              	.LBB426:
 1624              	.LBB427:
 1625              		.loc 8 42 40 view .LVU430
 1626 001c 00F51043 		add	r3, r0, #36864
 1627              	.LBE427:
 1628              	.LBE426:
 1629              	.LBE431:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 69


 1630              	.LBB432:
 1631              	.LBB423:
 1632              	.LBB422:
 1633              		.loc 17 97 35 view .LVU431
 1634 0020 0460     		str	r4, [r0]
 1635              	.LBE422:
 1636              	.LBE423:
 1637              	.LBE432:
 1638              	.LBE434:
 1639              	.LBE417:
 1640              	.LBE416:
  16:USB_MIDI.cpp  **** Oscillator     osc;
 1641              		.loc 9 16 16 view .LVU432
 1642 0022 0B4A     		ldr	r2, .L103+4
 1643              	.LBB439:
 1644              	.LBB437:
 1645              	.LBB435:
 1646              	.LBB433:
 1647              	.LBB429:
 1648              	.LBB428:
 1649              		.loc 8 42 40 view .LVU433
 1650 0024 C3F8A840 		str	r4, [r3, #168]
 1651              	.LBE428:
 1652              	.LBE429:
 1653              	.LBE433:
  84:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 1654              		.loc 7 84 19 view .LVU434
 1655 0028 0724     		movs	r4, #7
 1656              	.LBE435:
  84:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 1657              		.loc 7 84 5 view .LVU435
 1658 002a A3F8B010 		strh	r1, [r3, #176]	@ movhi
 1659 002e C3F8AC50 		str	r5, [r3, #172]
 1660              	.LBE437:
 1661              	.LBE439:
  16:USB_MIDI.cpp  **** Oscillator     osc;
 1662              		.loc 9 16 16 view .LVU436
 1663 0032 0B49     		ldr	r1, .L103+20
 1664              	.LBB440:
 1665              	.LBB438:
 1666              	.LBB436:
  84:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 1667              		.loc 7 84 19 view .LVU437
 1668 0034 83F8B240 		strb	r4, [r3, #178]
 1669              	.LVL124:
  84:../../libDaisy//src/hid/midi.h ****     ~MidiHandler() {}
 1670              		.loc 7 84 19 view .LVU438
 1671              	.LBE436:
 1672              	.LBE438:
 1673              	.LBE440:
  16:USB_MIDI.cpp  **** Oscillator     osc;
 1674              		.loc 9 16 16 view .LVU439
 1675 0038 FFF7FEFF 		bl	__aeabi_atexit
 1676              	.LVL125:
 1677              	.LBB441:
 1678              	.LBI441:
  15:../../DaisySP//Source/Synthesis/oscillator.h ****     ~Oscillator() {}
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 70


 1679              		.loc 6 15 5 is_stmt 1 view .LVU440
  15:../../DaisySP//Source/Synthesis/oscillator.h ****     ~Oscillator() {}
 1680              		.loc 6 15 5 is_stmt 0 view .LVU441
 1681              	.LBE441:
  17:USB_MIDI.cpp  **** 
 1682              		.loc 9 17 16 view .LVU442
 1683 003c 044A     		ldr	r2, .L103+4
 1684 003e 0949     		ldr	r1, .L103+24
 1685 0040 0948     		ldr	r0, .L103+28
 1686              	.LBE442:
 1687              	.LBE444:
 1688              		.loc 9 87 1 view .LVU443
 1689 0042 BDE83840 		pop	{r3, r4, r5, lr}
 1690              		.cfi_restore 14
 1691              		.cfi_restore 5
 1692              		.cfi_restore 4
 1693              		.cfi_restore 3
 1694              		.cfi_def_cfa_offset 0
 1695              	.LBB445:
 1696              	.LBB443:
  17:USB_MIDI.cpp  **** 
 1697              		.loc 9 17 16 view .LVU444
 1698 0046 FFF7FEBF 		b	__aeabi_atexit
 1699              	.LVL126:
 1700              	.L104:
 1701 004a 00BF     		.align	2
 1702              	.L103:
 1703 004c 00000000 		.word	.LANCHOR1
 1704 0050 00000000 		.word	__dso_handle
 1705 0054 00000000 		.word	_ZN5daisy9DaisySeedD1Ev
 1706 0058 00000000 		.word	midi
 1707 005c 80707FF0 		.word	-260083584
 1708 0060 00000000 		.word	_ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED1Ev
 1709 0064 00000000 		.word	_ZN7daisysp10OscillatorD1Ev
 1710 0068 00000000 		.word	.LANCHOR0
 1711              	.LBE443:
 1712              	.LBE445:
 1713              		.cfi_endproc
 1714              	.LFE5372:
 1716              		.section	.init_array,"aw",%init_array
 1717              		.align	2
 1718 0000 00000000 		.word	_GLOBAL__sub_I_hw(target1)
 1719              		.global	osc
 1720              		.global	midi
 1721              		.global	hw
 1722              		.section	.bss.hw,"aw",%nobits
 1723              		.align	2
 1724              		.set	.LANCHOR1,. + 0
 1727              	hw:
 1728 0000 00000000 		.space	60
 1728      00000000 
 1728      00000000 
 1728      00000000 
 1728      00000000 
 1729              		.section	.bss.midi,"aw",%nobits
 1730              		.align	2
 1733              	midi:
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 71


 1734 0000 00000000 		.space	37044
 1734      00000000 
 1734      00000000 
 1734      00000000 
 1734      00000000 
 1735              		.section	.bss.osc,"aw",%nobits
 1736              		.align	2
 1737              		.set	.LANCHOR0,. + 0
 1740              	osc:
 1741 0000 00000000 		.space	48
 1741      00000000 
 1741      00000000 
 1741      00000000 
 1741      00000000 
 1742              		.section	.rodata._ZN5daisy4seedL2D1E,"a"
 1743              		.align	2
 1744              		.set	.LANCHOR2,. + 0
 1747              	_ZN5daisy4seedL2D1E:
 1748 0000 02       		.byte	2
 1749 0001 0B       		.byte	11
 1750              		.text
 1751              	.Letext0:
 1752              		.file 18 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/machine/_d
 1753              		.file 19 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/_stdin
 1754              		.file 20 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdint.h"
 1755              		.file 21 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/lib/gcc/arm-none-eabi/10.3.1/inc
 1756              		.file 22 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1757              		.file 23 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1758              		.file 24 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1759              		.file 25 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1760              		.file 26 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1761              		.file 27 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1762              		.file 28 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1763              		.file 29 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1764              		.file 30 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1765              		.file 31 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1766              		.file 32 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1767              		.file 33 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1768              		.file 34 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1769              		.file 35 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1770              		.file 36 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1771              		.file 37 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1772              		.file 38 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1773              		.file 39 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1774              		.file 40 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/_types
 1775              		.file 41 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/reent.
 1776              		.file 42 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/sys/lock.h
 1777              		.file 43 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/math.h"
 1778              		.file 44 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdlib.h"
 1779              		.file 45 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1780              		.file 46 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/c++/10.3.1
 1781              		.file 47 "../../libDaisy//src/per/tim.h"
 1782              		.file 48 "../../libDaisy//src/per/sai.h"
 1783              		.file 49 "../../libDaisy//src/util/wav_format.h"
 1784              		.file 50 "../../libDaisy//src/dev/max11300.h"
 1785              		.file 51 "../../libDaisy//src/dev/sdram.h"
 1786              		.file 52 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/lib/gcc/arm-none-eabi/10.3.1/inc
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 72


 1787              		.file 53 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/stdio.h"
 1788              		.file 54 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/string.h"
 1789              		.file 55 "../../DaisySP//Source/Control/adenv.h"
 1790              		.file 56 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/wchar.h"
 1791              		.file 57 "/opt/homebrew/Cellar/arm-none-eabi-gcc/10.3-2021.07/gcc/arm-none-eabi/include/locale.h"
 1792              		.file 58 "../../libDaisy//src/dev/sr_595.h"
 1793              		.file 59 "<built-in>"
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 73


DEFINED SYMBOLS
                            *ABS*:0000000000000000 USB_MIDI.cpp
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:17     .text._ZN5daisy9DaisySeedD2Ev:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:26     .text._ZN5daisy9DaisySeedD2Ev:0000000000000000 _ZN5daisy9DaisySeedD2Ev
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:26     .text._ZN5daisy9DaisySeedD2Ev:0000000000000000 _ZN5daisy9DaisySeedD1Ev
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:67     .text._ZN7daisysp10OscillatorD2Ev:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:75     .text._ZN7daisysp10OscillatorD2Ev:0000000000000000 _ZN7daisysp10OscillatorD2Ev
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:75     .text._ZN7daisysp10OscillatorD2Ev:0000000000000000 _ZN7daisysp10OscillatorD1Ev
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:92     .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:100    .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev:0000000000000000 _ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:100    .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED2Ev:0000000000000000 _ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED1Ev
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:123    .text._Z13AudioCallbackPKPKfPPfj:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:131    .text._Z13AudioCallbackPKPKfPPfj:0000000000000000 _Z13AudioCallbackPKPKfPPfj
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:204    .text._Z13AudioCallbackPKPKfPPfj:0000000000000034 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:209    .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:217    .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh:0000000000000000 _ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:296    .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh:0000000000000050 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:300    .text._ZN5daisy11MidiHandlerINS_16MidiUsbTransportEE5ParseEh:0000000000000054 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:877    .text.startup.main:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:885    .text.startup.main:0000000000000000 main
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1456   .text.startup.main:00000000000001a4 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1733   .bss.midi:0000000000000000 midi
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1475   .text.startup._GLOBAL__sub_I_hw:0000000000000000 $t
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1482   .text.startup._GLOBAL__sub_I_hw:0000000000000000 _GLOBAL__sub_I_hw
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1703   .text.startup._GLOBAL__sub_I_hw:000000000000004c $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1717   .init_array:0000000000000000 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1740   .bss.osc:0000000000000000 osc
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1727   .bss.hw:0000000000000000 hw
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1723   .bss.hw:0000000000000000 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1730   .bss.midi:0000000000000000 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1736   .bss.osc:0000000000000000 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1743   .rodata._ZN5daisy4seedL2D1E:0000000000000000 $d
/var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s:1747   .rodata._ZN5daisy4seedL2D1E:0000000000000000 _ZN5daisy4seedL2D1E
                           .group:0000000000000000 _ZN5daisy9DaisySeedD5Ev
                           .group:0000000000000000 _ZN7daisysp10OscillatorD5Ev
                           .group:0000000000000000 _ZN5daisy11MidiHandlerINS_16MidiUsbTransportEED5Ev

UNDEFINED SYMBOLS
_ZN7daisysp10Oscillator7ProcessEv
memcpy
_ZN5daisy9DaisySeed9ConfigureEv
_ZN5daisy9DaisySeed4InitEb
_ZN5daisy4GPIO4InitENS_3PinENS0_4ModeENS0_4PullENS0_5SpeedE
_ZN5daisy16MidiUsbTransport4InitENS0_6ConfigE
_ZN5daisy9DaisySeed15AudioSampleRateEv
_ZN7daisysp10Oscillator12CalcPhaseIncEf
_ZN5daisy9DaisySeed10StartAudioEPFvPKPKfPPfjE
_ZN5daisy6System6GetNowEv
_ZN5daisy16MidiUsbTransport2RxEv
_ZN5daisy16MidiUsbTransport8ReadableEv
_ZN5daisy16MidiUsbTransport8RxActiveEv
_ZN5daisy9DaisySeed6SetLedEb
_ZN5daisy4GPIO5WriteEb
_ZN5daisy6System5DelayEm
powf
_ZN5daisy16MidiUsbTransport7FlushRxEv
_ZN5daisy16MidiUsbTransport7StartRxEv
ARM GAS  /var/folders/yp/crnf17014176vrw9djtwrtgr0000gn/T//ccDjszBD.s 			page 74


__aeabi_atexit
__dso_handle
